import{a as Ci,b as kl,c as _n,d as bn,e as vn,f as yn,g as xn,h as Cn,i as wn,j as Mn,k as Sn,l as kn,m as Da,n as zl,o as jl,p as Vl,q as es,r as ql,s as Wl,x as Ul}from"./chunk-FUKNBEGF.js";import{a as $l}from"./chunk-HARV7ZLU.js";import{$ as Ke,$b as sl,$c as Cl,$d as ns,Aa as m,Ab as Xc,B as fi,Ba as M,Bb as Zc,Bd as ao,C as gi,Ca as ke,Cb as be,D as Jt,Da as Ee,Db as yi,E as Lc,Ea as Ho,Eb as Ea,Ed as Pl,F as J,Fa as ee,Fb as Jc,G as ya,Ga as qo,Gb as ut,Gc as Xo,H as _e,Ha as ka,Hb as el,Hc as gl,Hd as Rl,I as xe,Ia as A,Ib as te,Ic as _l,Id as ro,J as Le,Ja as R,Jc as oo,Jd as Ol,K as ge,Ka as dt,Kb as pt,Kd as si,L as nt,La as We,Lb as Ot,Ma as Ue,Mb as At,Mc as Zo,Md as Al,Na as ot,Nc as Te,Nd as gn,O as V,Oa as de,Ob as Ae,Od as Fl,P as Ce,Pa as he,Pb as tl,Pc as bl,Pd as Ll,Q as ei,Qa as ni,Qb as Ft,Qc as Ia,Qd as Nl,R as Nc,Ra as p,Rb as il,Rc as vl,Rd as Bl,S as xa,Sa as z,Sc as so,Sd as Vu,T as G,Ta as j,Tb as Lt,Tc as Jo,U as Q,Ua as Vc,Ub as Nt,Ud as Mi,V as It,Va as ji,Vb as $o,W as cn,Wa as Vi,Wb as Go,Wc as yl,Xa as Hi,Xb as Qo,Xc as xl,Xd as Hl,Y as Ca,Ya as _i,Yb as nl,Yc as Bt,Yd as ts,Z as ti,Za as Be,Zb as ol,Zc as mn,Zd as En,_ as Dt,_b as xi,_c as jt,_d as is,a as le,aa as Ne,ab as Pt,ac as Ko,ad as Vt,b as lt,ba as jo,bb as Rt,bc as al,bd as wl,c as Oc,ca as ii,cb as Wo,cc as rl,d as ju,da as zc,db as to,dc as Fe,dd as Ht,e as Bo,ea as wa,eb as Ct,ec as ft,ed as un,fa as b,fc as cl,fd as Ml,g as Oe,ga as S,gb as Pe,gc as ll,gd as pn,h as Ac,ha as Ma,hb as oi,hc as dl,hd as fn,ia as Sa,ib as wt,ic as hl,j as ba,ja as Bc,jb as bi,jc as Xe,ka as jc,kb as ht,kc as X,kd as qt,l as Xn,la as eo,lb as re,lc as zt,ld as Sl,m as rn,mb as Hc,mc as no,md as Ze,na as xt,nb as vi,nc as qi,nd as El,oa as P,ob as qc,oc as ml,od as gt,pa as Vo,pb as dn,pc as st,pd as Tl,qa as se,qb as Wc,qc as Wi,qd as wi,ra as x,rb as Uc,rc as Ui,rd as Il,sa as ze,sb as $c,sc as hn,sd as Dl,t as zi,ta as ae,tb as mt,tc as Ta,u as Bi,ua as De,ub as io,uc as Yo,v as Zn,va as ln,vb as Gc,vc as ul,wb as Qc,x as Jn,xb as Kc,xc as pl,y as va,yb as Uo,yc as fl,z as Fc,za as h,zb as Yc}from"./chunk-7QJRHYUZ.js";var Gl=["toast-component",""];function qu(n,i){if(n&1){let e=ee();h(0,"button",5),A("click",function(){G(e);let o=R();return Q(o.remove())}),h(1,"span",6),p(2,"\xD7"),m()()}}function Wu(n,i){if(n&1&&(ke(0),p(1),Ee()),n&2){let e=R(2);b(),j("[",e.duplicatesCount+1,"]")}}function Uu(n,i){if(n&1&&(h(0,"div"),p(1),P(2,Wu,2,1,"ng-container",4),m()),n&2){let e=R();De(e.options.titleClass),se("aria-label",e.title),b(),j(" ",e.title," "),b(),x("ngIf",e.duplicatesCount)}}function $u(n,i){if(n&1&&M(0,"div",7),n&2){let e=R();De(e.options.messageClass),x("innerHTML",e.message,wa)}}function Gu(n,i){if(n&1&&(h(0,"div",8),p(1),m()),n&2){let e=R();De(e.options.messageClass),se("aria-label",e.message),b(),j(" ",e.message," ")}}function Qu(n,i){if(n&1&&(h(0,"div"),M(1,"div",9),m()),n&2){let e=R();b(),ze("width",e.width()+"%")}}function Ku(n,i){if(n&1){let e=ee();h(0,"button",5),A("click",function(){G(e);let o=R();return Q(o.remove())}),h(1,"span",6),p(2,"\xD7"),m()()}}function Yu(n,i){if(n&1&&(ke(0),p(1),Ee()),n&2){let e=R(2);b(),j("[",e.duplicatesCount+1,"]")}}function Xu(n,i){if(n&1&&(h(0,"div"),p(1),P(2,Yu,2,1,"ng-container",4),m()),n&2){let e=R();De(e.options.titleClass),se("aria-label",e.title),b(),j(" ",e.title," "),b(),x("ngIf",e.duplicatesCount)}}function Zu(n,i){if(n&1&&M(0,"div",7),n&2){let e=R();De(e.options.messageClass),x("innerHTML",e.message,wa)}}function Ju(n,i){if(n&1&&(h(0,"div",8),p(1),m()),n&2){let e=R();De(e.options.messageClass),se("aria-label",e.message),b(),j(" ",e.message," ")}}function ep(n,i){if(n&1&&(h(0,"div"),M(1,"div",9),m()),n&2){let e=R();b(),ze("width",e.width()+"%")}}var Pa=class{_attachedHost;component;viewContainerRef;injector;constructor(i,e){this.component=i,this.injector=e}attach(i,e){return this._attachedHost=i,i.attach(this,e)}detach(){let i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},Ra=class{_attachedPortal;_disposeFn;attach(i,e){return this._attachedPortal=i,this.attachComponentPortal(i,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}},Oa=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Oe;_activate=new Oe;_manualClose=new Oe;_resetTimeout=new Oe;_countDuplicate=new Oe;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,e){i&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Tn=class{toastId;config;message;title;toastType;toastRef;_onTap=new Oe;_onAction=new Oe;constructor(i,e,t,o,s,a){this.toastId=i,this.config=e,this.message=t,this.title=o,this.toastType=s,this.toastRef=a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}},Ql={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Kl=new Le("ToastConfig"),Aa=class extends Ra{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,e,t){super(),this._hostDomElement=i,this._componentFactoryResolver=e,this._appRef=t}attachComponentPortal(i,e){let t=this._componentFactoryResolver.resolveComponentFactory(i.component),o;return o=t.create(i.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(i){return i.hostView.rootNodes[0]}},tp=(()=>{class n{_document=nt(wt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fa=class{_portalHost;constructor(i){this._portalHost=i}attach(i,e=!0){return this._portalHost.attach(i,e)}detach(){return this._portalHost.detach()}},ip=(()=>{class n{_overlayContainer=nt(tp);_componentFactoryResolver=nt(Sa);_appRef=nt(to);_document=nt(wt);_paneElements=new Map;create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(e),o.classList.add("toast-container"),t?t.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(e){return new Aa(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Fa(this._createPortalHost(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wt=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,t,o,s,a){this.overlay=t,this._injector=o,this.sanitizer=s,this.ngZone=a,this.toastrConfig=le(le({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=le(le({},e.default.iconClasses),e.config.iconClasses))}show(e,t,o={},s=""){return this._preBuildNotification(s,e,t,this.applyConfig(o))}success(e,t,o={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,t,this.applyConfig(o))}error(e,t,o={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,t,this.applyConfig(o))}info(e,t,o={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,t,this.applyConfig(o))}warning(e,t,o={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,t,this.applyConfig(o))}clear(e){for(let t of this.toasts)if(e!==void 0){if(t.toastId===e){t.toastRef.manualClose();return}}else t.toastRef.manualClose()}remove(e){let t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(e="",t="",o,s){let{includeTitleDuplicates:a}=this.toastrConfig;for(let r of this.toasts){let c=a&&r.title===e;if((!a||c)&&r.message===t)return r.toastRef.onDuplicate(o,s),r}return null}applyConfig(e={}){return le(le({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,o,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,o,s)):this._buildNotification(e,t,o,s)}_buildNotification(e,t,o,s){if(!s.toastComponent)throw new Error("toastComponent required");let a=this.findDuplicate(o,t,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||t)&&this.toastrConfig.preventDuplicates&&a!==null)return a;this.previousToastMessage=t;let r=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(r=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=t;t&&s.enableHtml&&(l=this.sanitizer.sanitize(zc.HTML,t));let d=new Oa(c),u=new Tn(this.index,s,l,o,e,d),f=[{provide:Tn,useValue:u}],g=ti.create({providers:f,parent:this._injector}),_=new Pa(s.toastComponent,g),v=c.attach(_,s.newestOnTop);d.componentInstance=v.instance;let y={toastId:this.index,title:o||"",message:t||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:u.onTap(),onAction:u.onAction(),portal:v};return r||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{y.toastRef.activate()})),this.toasts.push(y),y}static \u0275fac=function(t){return new(t||n)(ge(Kl),ge(ip),ge(ti),ge(Yc),ge(Ke))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),np=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=eo(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,o){this.toastrService=e,this.toastPackage=t,this.ngZone=o,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=eo({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>lt(le({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width.set(t/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>lt(le({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>lt(le({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(t){return new(t||n)(S(Wt),S(Tn),S(Ke))};static \u0275cmp=V({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,o){t&1&&A("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),t&2&&(ka("@flyInOut",o._state),De(o.toastClasses),ze("display",o.displayStyle))},standalone:!0,features:[Be],attrs:Gl,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,o){t&1&&P(0,qu,3,0,"button",0)(1,Uu,3,5,"div",1)(2,$u,1,3,"div",2)(3,Gu,2,4,"div",3)(4,Qu,2,2,"div",4),t&2&&(x("ngIf",o.options.closeButton),b(),x("ngIf",o.title),b(),x("ngIf",o.message&&o.options.enableHtml),b(),x("ngIf",o.message&&!o.options.enableHtml),b(),x("ngIf",o.options.progressBar))},dependencies:[re],encapsulation:2,data:{animation:[no("flyInOut",[Wi("inactive",st({opacity:0})),Wi("active",st({opacity:1})),Wi("removed",st({opacity:0})),Ui("inactive => active",qi("{{ easeTime }}ms {{ easing }}")),Ui("active => removed",qi("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),op=lt(le({},Ql),{toastComponent:np}),sp=(n={})=>Nc([{provide:Kl,useValue:{default:op,config:n}}]),Yl=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[sp(e)]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ce({type:n});static \u0275inj=xe({})}return n})();var ap=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=eo(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=eo("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,o){this.toastrService=e,this.toastPackage=t,this.appRef=o,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width.set(t/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(t){return new(t||n)(S(Wt),S(Tn),S(to))};static \u0275cmp=V({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,o){t&1&&A("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),t&2&&(De(o.toastClasses),ze("display",o.displayStyle))},standalone:!0,features:[Be],attrs:Gl,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,o){t&1&&P(0,Ku,3,0,"button",0)(1,Xu,3,5,"div",1)(2,Zu,1,3,"div",2)(3,Ju,2,4,"div",3)(4,ep,2,2,"div",4),t&2&&(x("ngIf",o.options.closeButton),b(),x("ngIf",o.title),b(),x("ngIf",o.message&&o.options.enableHtml),b(),x("ngIf",o.message&&!o.options.enableHtml),b(),x("ngIf",o.options.progressBar))},dependencies:[re],encapsulation:2,changeDetection:0})}return n})(),L1=lt(le({},Ql),{toastComponent:ap});function rp(n,i){n&1&&(h(0,"mat-error"),p(1," Username is required "),m())}function cp(n,i){n&1&&(h(0,"mat-error"),p(1," Password is required "),m())}function lp(n,i){n&1&&(h(0,"div",17)(1,"mat-icon"),p(2,"error"),m(),h(3,"span"),p(4,"Invalid username or password. Please try again."),m()())}function dp(n,i){if(n&1&&(h(0,"div",18)(1,"mat-icon"),p(2,"check_circle"),m(),h(3,"span"),p(4),m()()),n&2){let e=R();b(4),z(e.registerSuccessMessage)}}var Na=(()=>{class n{constructor(e,t,o,s,a){this.authService=e,this.activatedRoute=t,this.router=o,this.toastr=s,this.localStorage=a,this.registerSuccessMessage="",this.isError=!1,this.hidePassword=!0,this.loginRequestPayload={username:"",password:""},this.loginForm=new At({username:new Ae("",te.required),password:new Ae("",te.required)})}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{e.registered!==void 0&&e.registered==="true"&&(this.toastr.success("Signup Successful"),this.registerSuccessMessage="Please Check your inbox for activation email activate your account before you Login!")})}login(){this.loginRequestPayload.username=this.loginForm.get("username").value,this.loginRequestPayload.password=this.loginForm.get("password").value;let e;this.authService.login(this.loginRequestPayload).subscribe(t=>{if(t){let o=this.localStorage.retrieve("role");console.log("Login successful. User role:",o),o==="ROLE_ADMIN"?(console.log("Routing to admin dashboard"),this.router.navigate(["/admin/dashboard"])):o==="ROLE_VICTIM"?(console.log("Routing to victim dashboard"),this.router.navigate(["/victim/dashboard"])):o==="ROLE_DEPARTMENT_HEAD"||o==="ROLE_DISPATCHER"||o==="ROLE_RESCUE_TEAM_MEMBER"?(console.log("Routing to department dashboard"),this.router.navigate(["/department/dashboard"])):(console.log("Routing to default home"),this.router.navigate(["/home"])),this.toastr.success("Login successful!","Welcome")}else this.isError=!0,console.log("LOGIN ERROR"),this.toastr.error("Login failed. Please try again.","Error"),rn(e),this.router.navigateByUrl("/login")},t=>{e=t,this.isError=!0,console.error("Login error:",t),this.toastr.error("Invalid username or password","Login Failed")})}static{this.\u0275fac=function(t){return new(t||n)(S(Xe),S(Xc),S(be),S(Wt),S(ft))}}static{this.\u0275cmp=V({type:n,selectors:[["app-login"]],decls:39,vars:10,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"subtitle"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username","required",""],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password","required","",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","login-error",4,"ngIf"],["class","login-success",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],[1,"register-link"],["routerLink","/signup"],[1,"login-error"],[1,"login-success"]],template:function(t,o){if(t&1&&(h(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"mat-icon",3),p(5,"security"),m(),h(6,"h1"),p(7,"Emergency Management System"),m(),h(8,"p",4),p(9,"Sign in to access the dashboard"),m()()(),h(10,"mat-card-content")(11,"form",5),A("ngSubmit",function(){return o.login()}),h(12,"mat-form-field",6)(13,"mat-label"),p(14,"Username"),m(),M(15,"input",7),h(16,"mat-icon",8),p(17,"person"),m(),P(18,rp,2,0,"mat-error",9),m(),h(19,"mat-form-field",6)(20,"mat-label"),p(21,"Password"),m(),M(22,"input",10),h(23,"mat-icon",8),p(24,"lock"),m(),h(25,"button",11),A("click",function(){return o.hidePassword=!o.hidePassword}),h(26,"mat-icon"),p(27),m()(),P(28,cp,2,0,"mat-error",9),m(),P(29,lp,5,0,"div",12)(30,dp,5,1,"div",13),h(31,"button",14)(32,"span"),p(33,"Sign In"),m()(),h(34,"div",15)(35,"span"),p(36,"New User?"),m(),h(37,"a",16),p(38,"SIGN UP"),m()()()()()()),t&2){let s,a;b(11),x("formGroup",o.loginForm),b(7),x("ngIf",(s=o.loginForm.get("username"))==null?null:s.hasError("required")),b(4),x("type",o.hidePassword?"password":"text"),b(3),se("aria-label","Hide password")("aria-pressed",o.hidePassword),b(2),z(o.hidePassword?"visibility_off":"visibility"),b(),x("ngIf",(a=o.loginForm.get("password"))==null?null:a.hasError("required")),b(),x("ngIf",o.isError),b(),x("ngIf",o.registerSuccessMessage),b(),x("disabled",o.loginForm.invalid)}},dependencies:[re,yi,Bt,jt,Vt,qt,Ht,un,pn,fn,Ci,Ft,ut,pt,Ot,xi,Lt,Nt,Ze,gt,wi],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;box-shadow:0 10px 40px #0003!important;border-radius:16px!important;overflow:hidden}.login-header[_ngcontent-%COMP%]{text-align:center;padding:32px 24px 16px;background:linear-gradient(135deg,#d32f2f,#f44336);color:#fff;width:100%}.logo-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin:0 auto 16px;display:block}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.9}mat-card-content[_ngcontent-%COMP%]{padding:32px 24px!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.login-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#ffebee;border-radius:8px;color:#c62828;font-size:14px}.login-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.login-success[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#e8f5e9;border-radius:8px;color:#2e7d32;font-size:14px}.login-success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.login-button[_ngcontent-%COMP%]{height:48px;font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin-top:8px}.register-link[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-top:8px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:600;margin-left:4px;transition:color .2s}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0d47a1;text-decoration:underline}@media (max-width: 600px){.login-card[_ngcontent-%COMP%]{max-width:100%}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}mat-card-content[_ngcontent-%COMP%]{padding:24px 16px!important}}"]})}}return n})();var rs=class{constructor(i,e,t,o){this.people=i,this.fire=e,this.medical=t,this.crime=o}};var cs=class{constructor(i,e,t,o,s,a){this.name=i,this.numberOfPeople=e,this.nature=t,this.location=o,this.assignedToTeamId=s,this.status=a}};var hp=["input"],mp=["label"],up=["*"],pp=new Le("mat-checkbox-default-options",{providedIn:"root",factory:ed});function ed(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var $e=function(n){return n[n.Init=0]="Init",n[n.Checked=1]="Checked",n[n.Unchecked=2]="Unchecked",n[n.Indeterminate=3]="Indeterminate",n}($e||{}),fp={provide:Jc,useExisting:ya(()=>ls),multi:!0},za=class{},gp=0,Xl=ed(),ls=(()=>{class n{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let t=new za;return t.source=this,t.checked=e,t}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,t,o,s,a,r){this._elementRef=e,this._changeDetectorRef=t,this._ngZone=o,this._animationMode=a,this._options=r,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Dt,this.indeterminateChange=new Dt,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=$e.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Xl,this.color=this._options.color||Xl.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++gp}`,this.disabledInteractive=r?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){let t=e!=this._indeterminate;this._indeterminate=e,t&&(this._indeterminate?this._transitionCheckState($e.Indeterminate):this._transitionCheckState(this.checked?$e.Checked:$e.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let t=this._currentCheckState,o=this._getAnimationTargetElement();if(!(t===e||!o)&&(this._currentAnimationClass&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);let s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?$e.Checked:$e.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,t){if(this._animationMode==="NoopAnimations")return"";switch(e){case $e.Init:if(t===$e.Checked)return this._animationClasses.uncheckedToChecked;if(t==$e.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case $e.Unchecked:return t===$e.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case $e.Checked:return t===$e.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case $e.Indeterminate:return t===$e.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(Ct),S(Ke),Ca("tabindex"),S(ii,8),S(pp,8))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-checkbox"]],viewQuery:function(t,o){if(t&1&&(ot(hp,5),ot(mp,5),ot(so,5)),t&2){let s;de(s=he())&&(o._inputElement=s.first),de(s=he())&&(o._labelElement=s.first),de(s=he())&&(o.ripple=s.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(t,o){t&2&&(qo("id",o.id),se("tabindex",null)("aria-label",null)("aria-labelledby",null),De(o.color?"mat-"+o.color:"mat-accent"),ae("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mdc-checkbox--disabled",o.disabled)("mat-mdc-checkbox-disabled",o.disabled)("mat-mdc-checkbox-checked",o.checked)("mat-mdc-checkbox-disabled-interactive",o.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",Pe],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",Pe],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:oi(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Pe],checked:[2,"checked","checked",Pe],disabled:[2,"disabled","disabled",Pe],indeterminate:[2,"indeterminate","indeterminate",Pe]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[_i([fp,{provide:el,useExisting:n,multi:!0}]),xt,xa,Be],ngContentSelectors:up,decls:15,vars:20,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(t,o){if(t&1){let s=ee();dt(),h(0,"div",3),A("click",function(r){return G(s),Q(o._preventBubblingFromLabel(r))}),h(1,"div",4,0)(3,"div",5),A("click",function(){return G(s),Q(o._onTouchTargetClick())}),m(),h(4,"input",6,1),A("blur",function(){return G(s),Q(o._onBlur())})("click",function(){return G(s),Q(o._onInputClick())})("change",function(r){return G(s),Q(o._onInteractionEvent(r))}),m(),M(6,"div",7),h(7,"div",8),It(),h(8,"svg",9),M(9,"path",10),m(),cn(),M(10,"div",11),m(),M(11,"div",12),m(),h(12,"label",13,2),We(14),m()()}if(t&2){let s=ni(2);x("labelPosition",o.labelPosition),b(4),ae("mdc-checkbox--selected",o.checked),x("checked",o.checked)("indeterminate",o.indeterminate)("disabled",o.disabled&&!o.disabledInteractive)("id",o.inputId)("required",o.required)("tabIndex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex),se("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-checked",o.indeterminate?"mixed":null)("aria-disabled",o.disabled&&o.disabledInteractive?!0:null)("name",o.name)("value",o.value),b(7),x("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),b(),x("for",o.inputId)}},dependencies:[so,xl],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.cdk-high-contrast-active .mdc-checkbox--disabled{opacity:.5}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-app-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-app-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.cdk-high-contrast-active .mdc-checkbox--disabled .mdc-checkbox__checkmark,.cdk-high-contrast-active .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return n})();var td=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[ls,Te,Te]})}}return n})();function bp(n,i){n&1&&(h(0,"mat-error"),p(1," Name is required "),m())}function vp(n,i){n&1&&(h(0,"mat-error"),p(1," Number of people is required "),m())}function yp(n,i){n&1&&(h(0,"mat-error"),p(1," Must be at least 1 "),m())}function xp(n,i){n&1&&(h(0,"mat-error"),p(1," Location is required "),m())}var id=(()=>{class n{constructor(e,t,o,s,a,r){this.ngZone=e,this.localStorage=t,this.vicService=o,this.FormBuilder=s,this.http=a,this.router=r,this.isHidden=!0,this.request=new rs(0,!1,!1,!1),this.invalid=!0,this.requestForm=new At({name:new Ae,people:new Ae,fire:new Ae,medical:new Ae,crime:new Ae,location:new Ae}),this.message="THIS IS MESSAGE",this.invalidLogin=!1}ngOnInit(){}onSubmit(e){let t;e.crime?e.fire?e.medical?t=6:t=3:e.medical?t=5:t=0:e.fire?e.medical?t=4:t=1:e.medical&&(t=2),console.log(e.name),console.log("nature"+e.nature),console.log("NATURE CALCULATED"+t);var o=new cs(e.name,e.people,t,e.location,0,!0);this.vicService.addRequest(o).subscribe(s=>{console.log(s),this.localStorage.store("request",s),this.ngZone.run(()=>this.router.navigateByUrl("requestLanding"))},s=>console.log(s))}redirectToLobby(){this.router.navigate(["lobby"])}returnData(e){e.id!=null&&this.router.navigate(["/lobby",e.id]),console.log(e.id)}showRequestForm(){this.isHidden==!0?this.isHidden=!1:this.isHidden=!0}redirectToLogin(){this.router.navigate(["./login"])}sendMessage(){this.chatService.sendMessage(this.message),this.message=""}static{this.\u0275fac=function(t){return new(t||n)(S(Ke),S(ft),S(Dl),S(Ko),S(mt),S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-request"]],decls:63,vars:9,consts:[[1,"request-container"],[1,"request-card"],[1,"request-header"],[1,"header-icon"],[1,"subtitle"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter your full name","required",""],["matPrefix",""],[4,"ngIf"],["matInput","","type","number","formControlName","people","placeholder","How many people need help?","min","1","max","100","required",""],["matInput","","formControlName","location","placeholder","Enter exact location (street, building, landmark)","required",""],[1,"emergency-type-section"],[1,"section-label"],[1,"emergency-chips"],["formControlName","fire",1,"emergency-chip","fire-chip",3,"ngModelChange","ngModel"],["formControlName","medical",1,"emergency-chip","medical-chip",3,"ngModelChange","ngModel"],["formControlName","crime",1,"emergency-chip","crime-chip",3,"ngModelChange","ngModel"],["matInput","","rows","4","placeholder","Any additional details that may help responders...","maxlength","500"],[1,"form-actions"],["mat-raised-button","","color","warn","type","submit",1,"submit-button",3,"disabled"],["mat-button","","type","button","routerLink","/home",1,"cancel-button"]],template:function(t,o){if(t&1&&(h(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"mat-icon",3),p(5,"emergency"),m(),h(6,"h1"),p(7,"Create Emergency Request"),m(),h(8,"p",4),p(9,"Please provide details about the emergency"),m()()(),h(10,"mat-card-content")(11,"form",5),A("ngSubmit",function(){return o.onSubmit(o.requestForm.value)}),h(12,"mat-form-field",6)(13,"mat-label"),p(14,"Your Name"),m(),M(15,"input",7),h(16,"mat-icon",8),p(17,"person"),m(),P(18,bp,2,0,"mat-error",9),m(),h(19,"mat-form-field",6)(20,"mat-label"),p(21,"Number of People Affected"),m(),M(22,"input",10),h(23,"mat-icon",8),p(24,"groups"),m(),P(25,vp,2,0,"mat-error",9)(26,yp,2,0,"mat-error",9),m(),h(27,"mat-form-field",6)(28,"mat-label"),p(29,"Location"),m(),M(30,"input",11),h(31,"mat-icon",8),p(32,"place"),m(),P(33,xp,2,0,"mat-error",9),m(),h(34,"div",12)(35,"label",13),p(36,"Type of Emergency (Select all that apply)"),m(),h(37,"div",14)(38,"mat-checkbox",15),Hi("ngModelChange",function(a){return Vi(o.request.fire,a)||(o.request.fire=a),a}),h(39,"mat-icon"),p(40,"local_fire_department"),m(),p(41," Fire "),m(),h(42,"mat-checkbox",16),Hi("ngModelChange",function(a){return Vi(o.request.medical,a)||(o.request.medical=a),a}),h(43,"mat-icon"),p(44,"medical_services"),m(),p(45," Medical Emergency "),m(),h(46,"mat-checkbox",17),Hi("ngModelChange",function(a){return Vi(o.request.crime,a)||(o.request.crime=a),a}),h(47,"mat-icon"),p(48,"shield"),m(),p(49," Crime/Security "),m()()(),h(50,"mat-form-field",6)(51,"mat-label"),p(52,"Additional Information (Optional)"),m(),M(53,"textarea",18),h(54,"mat-icon",8),p(55,"description"),m()(),h(56,"div",19)(57,"button",20)(58,"mat-icon"),p(59,"send"),m(),p(60," Submit Emergency Request "),m(),h(61,"button",21),p(62," Cancel "),m()()()()()()),t&2){let s,a,r,c;b(11),x("formGroup",o.requestForm),b(7),x("ngIf",(s=o.requestForm.get("name"))==null?null:s.hasError("required")),b(7),x("ngIf",(a=o.requestForm.get("people"))==null?null:a.hasError("required")),b(),x("ngIf",(r=o.requestForm.get("people"))==null?null:r.hasError("min")),b(7),x("ngIf",(c=o.requestForm.get("location"))==null?null:c.hasError("required")),b(5),ji("ngModel",o.request.fire),b(4),ji("ngModel",o.request.medical),b(4),ji("ngModel",o.request.crime),b(11),x("disabled",o.requestForm.invalid)}},dependencies:[re,yi,Bt,jt,Vt,qt,Ht,un,pn,Ci,Ft,ut,il,pt,Ot,xi,ol,nl,Lt,Nt,ls,Ze,gt],styles:[".request-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.request-card[_ngcontent-%COMP%]{width:100%;max-width:600px;box-shadow:0 10px 40px #0003!important;border-radius:16px!important;overflow:hidden}.request-header[_ngcontent-%COMP%]{text-align:center;padding:32px 24px 16px;background:linear-gradient(135deg,#d32f2f,#f44336);color:#fff;width:100%}.header-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin:0 auto 16px;display:block}.request-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:500}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.9}mat-card-content[_ngcontent-%COMP%]{padding:32px 24px!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.emergency-type-section[_ngcontent-%COMP%]{margin:8px 0}.section-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:var(--text-primary);margin-bottom:12px}.emergency-chips[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.emergency-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px!important;height:48px!important;font-size:14px;transition:all .3s ease}.emergency-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.fire-chip.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:var(--emergency-critical)!important;color:#fff!important}.medical-chip.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:var(--emergency-high)!important;color:#fff!important}.crime-chip.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1976d2!important;color:#fff!important}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px;justify-content:space-between}.submit-button[_ngcontent-%COMP%]{height:48px;font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;flex:1;display:flex;align-items:center;justify-content:center;gap:8px}.cancel-button[_ngcontent-%COMP%]{height:48px;font-size:14px}@media (max-width: 600px){.request-card[_ngcontent-%COMP%]{max-width:100%}.request-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}mat-card-content[_ngcontent-%COMP%]{padding:24px 16px!important}.emergency-chips[_ngcontent-%COMP%]{flex-direction:column}.emergency-chip[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}}"]})}}return n})();var nd=(()=>{class n{constructor(e){this.router=e}ngOnInit(){}static{this.\u0275fac=function(t){return new(t||n)(S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,o){t&1&&(h(0,"p"),p(1,"logout works!"),m())}})}}return n})();function Cp(n,i){n&1&&(h(0,"th",16),p(1," Id. "),m())}function wp(n,i){if(n&1&&(h(0,"td",17),p(1),m()),n&2){let e=i.$implicit;b(),j(" ",e.rescueTeamId," ")}}function Mp(n,i){n&1&&(h(0,"th",18),p(1," requestId "),m())}function Sp(n,i){if(n&1&&(h(0,"td",19),p(1),m()),n&2){let e=i.$implicit;b(),j(" ",e.requestId," ")}}function kp(n,i){n&1&&(h(0,"th",18),p(1," location "),m())}function Ep(n,i){if(n&1&&(h(0,"td",19),p(1),m()),n&2){let e=i.$implicit;b(),j(" ",e.location," ")}}function Tp(n,i){n&1&&(h(0,"th",18),p(1," Members "),m())}function Ip(n,i){if(n&1&&(h(0,"td",19),p(1),m()),n&2){let e=i.$implicit;b(),j(" ",e.members," ")}}function Dp(n,i){n&1&&(h(0,"th",16),p(1," Status "),m())}function Pp(n,i){if(n&1&&(h(0,"td",17),p(1),m()),n&2){let e=i.$implicit;b(),j(" ",e.status," ")}}function Rp(n,i){n&1&&(h(0,"th",20),p(1," Action "),m())}function Op(n,i){n&1&&(h(0,"td",17)(1,"button",21),p(2,"Message"),m()())}function Ap(n,i){n&1&&M(0,"tr",22)}function Fp(n,i){n&1&&M(0,"tr",23)}var ad=(()=>{class n{constructor(e,t){this.dialog=e,this.data=t,this.displayedColumns=["Id","request_id","location","members","status","action"],this.dataSource=new zl}ngOnInit(){this.RequestData=this.data,console.log(this.data),console.log(this.RequestData),this.dataSource.data=this.RequestData}close(){this.dialog.closeAll()}static{this.\u0275fac=function(t){return new(t||n)(S(gn),S(Al))}}static{this.\u0275cmp=V({type:n,selectors:[["app-rescue-team-info-dialog"]],decls:26,vars:3,consts:[["mat-dialog-title","","layout-align","center",1,"rescueTeamDialog"],[1,"btnCreateSubreddit",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","request_id"],["mat-header-cell","","style","text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","location"],["matColumnDef","members"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-cell","","class","align-right",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",1,"align-right"],[1,"btnCreateSubreddit"],["mat-header-row",""],["mat-row",""]],template:function(t,o){t&1&&(h(0,"h4",0),p(1,"Rescue Team Dialog"),m(),h(2,"button",1),A("click",function(){return o.close()}),p(3,"Close"),m(),h(4,"mat-dialog-content")(5,"table",2),ke(6,3),P(7,Cp,2,0,"th",4)(8,wp,2,1,"td",5),Ee(),ke(9,6),P(10,Mp,2,0,"th",7)(11,Sp,2,1,"td",8),Ee(),ke(12,9),P(13,kp,2,0,"th",7)(14,Ep,2,1,"td",8),Ee(),ke(15,10),P(16,Tp,2,0,"th",7)(17,Ip,2,1,"td",8),Ee(),ke(18,11),P(19,Dp,2,0,"th",4)(20,Pp,2,1,"td",5),Ee(),ke(21,12),P(22,Rp,2,0,"th",13)(23,Op,3,0,"td",5),Ee(),P(24,Ap,1,0,"tr",14)(25,Fp,1,0,"tr",15),m()()),t&2&&(b(5),x("dataSource",o.RequestData),b(19),x("matHeaderRowDef",o.displayedColumns),b(),x("matRowDefColumns",o.displayedColumns))},dependencies:[_n,vn,wn,yn,bn,Mn,xn,Cn,Sn,kn,Fl,Ll],styles:[".btnCreateSubreddit[_ngcontent-%COMP%]{margin-top:5px;color:#0079d3;background-color:transparent}.align-right[_ngcontent-%COMP%]{display:flex;padding:21px 0;justify-content:flex-end}"]})}}return n})();var Cd=ju(Vu());var zp=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],Bp=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function jp(n,i){n&1&&(h(0,"span",3),We(1,1),m())}function Vp(n,i){n&1&&(h(0,"span",6),We(1,2),m())}var Hp=["*"];var qp=new Le("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),rd=new Le("MatChipAvatar"),cd=new Le("MatChipTrailingIcon"),ld=new Le("MatChipRemove"),md=new Le("MatChip"),dd=(()=>{class n{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=e}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(e,t){this._elementRef=e,this._parentChip=t,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,e.nativeElement.nodeName==="BUTTON"&&e.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(md))}}static{this.\u0275dir=ei({type:n,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(t,o){t&1&&A("click",function(a){return o._handleClick(a)})("keydown",function(a){return o._handleKeydown(a)}),t&2&&(se("tabindex",o._getTabindex())("disabled",o._getDisabledAttribute())("aria-disabled",o.disabled),ae("mdc-evolution-chip__action--primary",o._isPrimary)("mdc-evolution-chip__action--presentational",!o.isInteractive)("mdc-evolution-chip__action--trailing",!o._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Pe],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?-1:oi(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[xt]})}}return n})();var Wp=0,Ba=(()=>{class n{_hasFocus(){return this._hasFocusInternal}get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get disabled(){return this._disabled||this._chipListDisabled}set disabled(e){this._disabled=e}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}constructor(e,t,o,s,a,r,c){this._changeDetectorRef=e,this._elementRef=t,this._ngZone=o,this._focusMonitor=s,this._globalRippleOptions=c,this._onFocus=new Oe,this._onBlur=new Oe,this.role=null,this._hasFocusInternal=!1,this.id=`mat-mdc-chip-${Wp++}`,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this._chipListDisabled=!1,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this._disabled=!1,this.removed=new Dt,this.destroyed=new Dt,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=nt(yl),this._injector=nt(ti),this._document=a,this._animationsDisabled=r==="NoopAnimations",this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=zi(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(t=>{let o=t._elementRef.nativeElement;return o===e||o.contains(e)})}_getActions(){let e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let t=e!==null;t!==this._hasFocusInternal&&(this._hasFocusInternal=t,t?this._onFocus.next({chip:this}):Vo(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static{this.\u0275fac=function(t){return new(t||n)(S(Ct),S(Ne),S(Ke),S(oo),S(wt),S(ii,8),S(vl,8))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,o,s){if(t&1&&(Ue(s,rd,5),Ue(s,cd,5),Ue(s,ld,5),Ue(s,rd,5),Ue(s,cd,5),Ue(s,ld,5)),t&2){let a;de(a=he())&&(o.leadingIcon=a.first),de(a=he())&&(o.trailingIcon=a.first),de(a=he())&&(o.removeIcon=a.first),de(a=he())&&(o._allLeadingIcons=a),de(a=he())&&(o._allTrailingIcons=a),de(a=he())&&(o._allRemoveIcons=a)}},viewQuery:function(t,o){if(t&1&&ot(dd,5),t&2){let s;de(s=he())&&(o.primaryAction=s.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(t,o){t&1&&A("keydown",function(a){return o._handleKeydown(a)}),t&2&&(qo("id",o.id),se("role",o.role)("aria-label",o.ariaLabel),De("mat-"+(o.color||"primary")),ae("mdc-evolution-chip",!o._isBasicChip)("mdc-evolution-chip--disabled",o.disabled)("mdc-evolution-chip--with-trailing-action",o._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",o.leadingIcon)("mdc-evolution-chip--with-primary-icon",o.leadingIcon)("mdc-evolution-chip--with-avatar",o.leadingIcon)("mat-mdc-chip-with-avatar",o.leadingIcon)("mat-mdc-chip-highlighted",o.highlighted)("mat-mdc-chip-disabled",o.disabled)("mat-mdc-basic-chip",o._isBasicChip)("mat-mdc-standard-chip",!o._isBasicChip)("mat-mdc-chip-with-trailing-icon",o._hasTrailingIcon())("_mat-animation-noopable",o._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Pe],highlighted:[2,"highlighted","highlighted",Pe],disableRipple:[2,"disableRipple","disableRipple",Pe],disabled:[2,"disabled","disabled",Pe]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[_i([{provide:md,useExisting:n}]),xt,Be],ngContentSelectors:Bp,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(t,o){t&1&&(dt(zp),M(0,"span",0),h(1,"span",1)(2,"span",2),P(3,jp,2,0,"span",3),h(4,"span",4),We(5),M(6,"span",5),m()()(),P(7,Vp,2,0,"span",6)),t&2&&(b(2),x("isInteractive",!1),b(),ln(o.leadingIcon?3:-1),b(4),ln(o._hasTrailingIcon()?7:-1))},dependencies:[dd],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return n})();var ud=(()=>{class n{get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}constructor(e,t,o){this._elementRef=e,this._changeDetectorRef=t,this._dir=o,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new Oe,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new jo}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips?.forEach(e=>{e._chipListDisabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){let e=this._elementRef.nativeElement.tabIndex;e!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=e))}_getChipStream(e){return this._chips.changes.pipe(fi(null),gi(()=>zi(...this._chips.map(e))))}_originatesFromChip(e){let t=e.target;for(;t&&t!==this._elementRef.nativeElement;){if(t.classList.contains("mat-mdc-chip"))return!0;t=t.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(fi(this._chips)).subscribe(e=>{let t=[];e.forEach(o=>o._getActions().forEach(s=>t.push(s))),this._chipActions.reset(t),this._chipActions.notifyOnChanges()}),this._keyManager=new Xo(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(Jt(this._destroyed)).subscribe(({chip:e})=>{let t=e._getSourceAction(document.activeElement);t&&this._keyManager.updateActiveItem(t)}),this._dir?.change.pipe(Jt(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(fi(null),Jt(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Jt(this._destroyed)).subscribe(e=>{let o=this._chips.toArray().indexOf(e.chip);this._isValidIndex(o)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=o)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),t=this._chips.toArray()[e];t.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():t.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(Ct),S(Zo,8))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-chip-set"]],contentQueries:function(t,o,s){if(t&1&&Ue(s,Ba,5),t&2){let a;de(a=he())&&(o._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(t,o){t&1&&A("keydown",function(a){return o._handleKeydown(a)}),t&2&&se("role",o.role)},inputs:{disabled:[2,"disabled","disabled",Pe],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:oi(e)]},standalone:!0,features:[xt,Be],ngContentSelectors:Hp,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(t,o){t&1&&(dt(),h(0,"div",0),We(1),m())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}}return n})();var pd=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({providers:[bl,{provide:qp,useValue:{separatorKeyCodes:[13]}}],imports:[Te,Jo,Te]})}}return n})();var Kp=["mat-menu-item",""],Yp=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Xp=["mat-icon, [matMenuItemIcon]","*"];function Zp(n,i){n&1&&(It(),h(0,"svg",2),M(1,"polygon",3),m())}var Jp=["*"];function ef(n,i){if(n&1){let e=ee();h(0,"div",0),A("keydown",function(o){G(e);let s=R();return Q(s._handleKeydown(o))})("click",function(){G(e);let o=R();return Q(o.closed.emit("click"))})("@transformMenu.start",function(o){G(e);let s=R();return Q(s._onAnimationStart(o))})("@transformMenu.done",function(o){G(e);let s=R();return Q(s._onAnimationDone(o))}),h(1,"div",1),We(2),m()()}if(n&2){let e=R();De(e._classList),x("id",e.panelId)("@transformMenu",e._panelAnimationState),se("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var ja=new Le("MAT_MENU_PANEL"),$i=(()=>{class n{constructor(e,t,o,s,a){this._elementRef=e,this._document=t,this._focusMonitor=o,this._parentMenu=s,this._changeDetectorRef=a,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Oe,this._focused=new Oe,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),t=e.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<t.length;o++)t[o].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(wt),S(oo),S(ja,8),S(Ct))}}static{this.\u0275cmp=V({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(t,o){t&1&&A("click",function(a){return o._checkDisabled(a)})("mouseenter",function(){return o._handleMouseEnter()}),t&2&&(se("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),ae("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Pe],disableRipple:[2,"disableRipple","disableRipple",Pe]},exportAs:["matMenuItem"],standalone:!0,features:[xt,Be],attrs:Kp,ngContentSelectors:Xp,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,o){t&1&&(dt(Yp),We(0),h(1,"span",0),We(2,1),m(),M(3,"div",1),P(4,Zp,2,0,":svg:svg",2)),t&2&&(b(3),x("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),b(),ln(o._triggersSubmenu?4:-1))},dependencies:[so],encapsulation:2,changeDetection:0})}}return n})();var tf=new Le("MatMenuContent");var hs={transformMenu:no("transformMenu",[Wi("void",st({opacity:0,transform:"scale(0.8)"})),Ui("void => enter",qi("120ms cubic-bezier(0, 0, 0.2, 1)",st({opacity:1,transform:"scale(1)"}))),Ui("* => void",qi("100ms 25ms linear",st({opacity:0})))]),fadeInItems:no("fadeInItems",[Wi("showing",st({opacity:1})),Ui("void => *",[st({opacity:0}),qi("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},lw=hs.fadeInItems,dw=hs.transformMenu,nf=0,of=new Le("mat-menu-default-options",{providedIn:"root",factory:sf});function sf(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Si=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){let t=this._previousPanelClass,o=le({},this._classList);t&&t.length&&t.split(" ").forEach(s=>{o[s]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(s=>{o[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=o}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,t,o,s){this._elementRef=e,this._changeDetectorRef=s,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new jo,this._classList={},this._panelAnimationState="void",this._animationDone=new Oe,this.closed=new Dt,this.close=this.closed,this.panelId=`mat-menu-panel-${nf++}`,this._injector=nt(ti),this.overlayPanelClass=o.overlayPanelClass||"",this._xPosition=o.xPosition,this._yPosition=o.yPosition,this.backdropClass=o.backdropClass,this.overlapTrigger=o.overlapTrigger,this.hasBackdrop=o.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Xo(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(fi(this._directDescendantItems),gi(e=>zi(...e.map(t=>t._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let t=this._keyManager;if(this._panelAnimationState==="enter"&&t.activeItem?._hasFocus()){let o=e.toArray(),s=Math.max(0,Math.min(o.length-1,t.activeItemIndex||0));o[s]&&!o[s].disabled?t.setActiveItem(s):t.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(fi(this._directDescendantItems),gi(t=>zi(...t.map(o=>o._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let t=e.keyCode,o=this._keyManager;switch(t){case 27:fl(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(t===38||t===40)&&o.setFocusOrigin("keyboard"),o.onKeydown(e);return}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Vo(()=>{let t=null;if(this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!t||!t.contains(document.activeElement)){let o=this._keyManager;o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&t&&t.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(this._baseElevation===null){let r=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(r)}let t=Math.min(this._baseElevation+e,24),o=`${this._elevationPrefix}${t}`,s=Object.keys(this._classList).find(a=>a.startsWith(this._elevationPrefix));if(!s||s===this._previousElevation){let a=le({},this._classList);this._previousElevation&&(a[this._previousElevation]=!1),a[o]=!0,this._previousElevation=o,this._classList=a}}setPositionClasses(e=this.xPosition,t=this.yPosition){this._classList=lt(le({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":t==="above","mat-menu-below":t==="below"}),this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,e.toState==="enter"&&this._keyManager.activeItemIndex===0&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(fi(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(Ke),S(of),S(Ct))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-menu"]],contentQueries:function(t,o,s){if(t&1&&(Ue(s,tf,5),Ue(s,$i,5),Ue(s,$i,4)),t&2){let a;de(a=he())&&(o.lazyContent=a.first),de(a=he())&&(o._allItems=a),de(a=he())&&(o.items=a)}},viewQuery:function(t,o){if(t&1&&ot(Ma,5),t&2){let s;de(s=he())&&(o.templateRef=s.first)}},hostVars:3,hostBindings:function(t,o){t&2&&se("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Pe],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:Pe(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[_i([{provide:ja,useExisting:n}]),xt,Be],ngContentSelectors:Jp,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(t,o){t&1&&(dt(),P(0,ef,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[hs.transformMenu,hs.fadeInItems]},changeDetection:0})}}return n})(),bd=new Le("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=nt(ro);return()=>n.scrollStrategies.reposition()}});function af(n){return()=>n.scrollStrategies.reposition()}var rf={provide:bd,deps:[ro],useFactory:af},fd=pl({passive:!0});var ms=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(t=>{this._destroyMenu(t),(t==="click"||t==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(t)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,t,o,s,a,r,c,l,d){this._overlay=e,this._element=t,this._viewContainerRef=o,this._menuItemInstance=r,this._dir=c,this._focusMonitor=l,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Bo.EMPTY,this._hoverSubscription=Bo.EMPTY,this._menuCloseSubscription=Bo.EMPTY,this._changeDetectorRef=nt(Ct),this._handleTouchStart=u=>{_l(u)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Dt,this.onMenuOpen=this.menuOpened,this.menuClosed=new Dt,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=a instanceof Si?a:void 0,t.nativeElement.addEventListener("touchstart",this._handleTouchStart,fd)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,fd),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let e=this.menu;if(this._menuOpen||!e)return;let t=this._createOverlay(e),o=t.getConfig(),s=o.positionStrategy;this._setPosition(e,s),o.hasBackdrop=e.hasBackdrop==null?!this.triggersSubmenu():e.hasBackdrop,t.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Si&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Jt(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;let t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,t instanceof Si?(t._resetAnimation(),t.lazyContent?t._animationDone.pipe(Bi(o=>o.toState==="void"),Jn(1),Jt(t.lazyContent._attached)).subscribe({next:()=>t.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),t?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let t=0,o=e.parentMenu;for(;o;)t++,o=o.parentMenu;e.setElevation(t)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let t=this._getOverlayConfig(e);this._subscribeToPositions(e,t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Rl({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,t){e.setPositionClasses&&t.positionChanges.subscribe(o=>{let s=o.connectionPair.overlayX==="start"?"after":"before",a=o.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,a)):e.setPositionClasses(s,a)})}_setPosition(e,t){let[o,s]=e.xPosition==="before"?["end","start"]:["start","end"],[a,r]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,l]=[a,r],[d,u]=[o,s],f=0;if(this.triggersSubmenu()){if(u=o=e.xPosition==="before"?"start":"end",s=d=o==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let g=this._parentMaterialMenu.items.first;this._parentInnerPadding=g?g._getHostElement().offsetTop:0}f=a==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(c=a==="top"?"bottom":"top",l=r==="top"?"bottom":"top");t.withPositions([{originX:o,originY:c,overlayX:d,overlayY:a,offsetY:f},{originX:s,originY:c,overlayX:u,overlayY:a,offsetY:f},{originX:o,originY:l,overlayX:d,overlayY:r,offsetY:-f},{originX:s,originY:l,overlayX:u,overlayY:r,offsetY:-f}])}_menuClosingActions(){let e=this._overlayRef.backdropClick(),t=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:Xn(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Bi(a=>a!==this._menuItemInstance),Bi(()=>this._menuOpen)):Xn();return zi(e,o,s,t)}_handleMousedown(e){gl(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let t=e.keyCode;(t===13||t===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(t===39&&this.dir==="ltr"||t===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Bi(e=>e===this._menuItemInstance&&!e.disabled),va(0,ba)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Si&&this.menu._isAnimating?this.menu._animationDone.pipe(Jn(1),va(0,ba),Jt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Pl(e.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(t){return new(t||n)(S(ro),S(Ne),S(jc),S(bd),S(ja,8),S($i,10),S(Zo,8),S(oo),S(Ke))}}static{this.\u0275dir=ei({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(t,o){t&1&&A("click",function(a){return o._handleClick(a)})("mousedown",function(a){return o._handleMousedown(a)})("keydown",function(a){return o._handleKeydown(a)}),t&2&&se("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}}return n})(),vd=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({providers:[rf],imports:[dn,Jo,Te,Ol,ao,Te]})}}return n})();function df(n,i){n&1&&(h(0,"th",29),p(1,"ID"),m())}function hf(n,i){if(n&1&&(h(0,"td",30)(1,"strong"),p(2),m()()),n&2){let e=i.$implicit;b(2),j("#",e.requestId,"")}}function mf(n,i){n&1&&(h(0,"th",29),p(1,"Requester"),m())}function uf(n,i){if(n&1&&(h(0,"td",30)(1,"div",31)(2,"mat-icon",32),p(3,"person"),m(),h(4,"span"),p(5),m()()()),n&2){let e=i.$implicit;b(5),z(e.name)}}function pf(n,i){n&1&&(h(0,"th",29),p(1,"Location"),m())}function ff(n,i){if(n&1&&(h(0,"td",30)(1,"div",33)(2,"mat-icon",34),p(3,"place"),m(),h(4,"span"),p(5),m()()()),n&2){let e=i.$implicit;b(5),z(e.location)}}function gf(n,i){n&1&&(h(0,"th",29),p(1,"Rescue Team"),m())}function _f(n,i){if(n&1&&(h(0,"mat-chip-set")(1,"mat-chip",36)(2,"mat-icon"),p(3,"groups"),m(),p(4),m()()),n&2){let e=R().$implicit;b(4),j(" ",e.resTeamObj," ")}}function bf(n,i){n&1&&(h(0,"span",37),p(1,"Not Assigned"),m())}function vf(n,i){if(n&1&&(h(0,"td",30),P(1,_f,5,1,"mat-chip-set",35)(2,bf,2,0,"ng-template",null,0,Wo),m()),n&2){let e=i.$implicit,t=ni(3);b(),x("ngIf",e.resTeamObj)("ngIfElse",t)}}function yf(n,i){n&1&&(h(0,"th",29),p(1,"Actions"),m())}function xf(n,i){if(n&1){let e=ee();h(0,"td",30)(1,"button",38)(2,"mat-icon"),p(3,"more_vert"),m()(),h(4,"mat-menu",null,1)(6,"button",39),A("click",function(){let o=G(e).$implicit,s=R();return Q(s.viewDetails(o))}),h(7,"mat-icon"),p(8,"visibility"),m(),h(9,"span"),p(10,"View Details"),m()(),h(11,"button",39),A("click",function(){G(e);let o=R();return Q(o.openChatLobby())}),h(12,"mat-icon"),p(13,"chat"),m(),h(14,"span"),p(15,"Message"),m()()()()}if(n&2){let e=ni(5);b(),x("matMenuTriggerFor",e)}}function Cf(n,i){n&1&&M(0,"tr",40)}function wf(n,i){n&1&&M(0,"tr",41)}function Mf(n,i){n&1&&(h(0,"div",42)(1,"mat-icon"),p(2,"inbox"),m(),h(3,"p"),p(4,"No active emergency requests"),m()())}var wd=(()=>{class n{constructor(e,t,o,s,a,r,c,l,d){this.websocketService=e,this.requestService=t,this.rescueTeamService=o,this.authService=s,this.messageService=a,this.router=r,this.localStorage=c,this.http=l,this.dialog=d,this.rescueTeamId=0,this.password="user",this.username="",this.requestAssignedToUser=[],this.AllUsers=[],this.newMessages=[],this.requestDialogOpen=!1,this.rescueInfoDialogOpen=!1,this.employeeInfoDialogOpen=!1,this.active_request=[],this.displayedColumns=["sender","content"],this.displayedColumnsForRequest=["requestId","name","location","resTeamObj","actions"],this.allMessages=[]}applyFilter(e){let t=e.target.value;if(t&&this.active_request){let o=this.active_request.filter(s=>s.name?.toLowerCase().includes(t.toLowerCase())||s.location?.toLowerCase().includes(t.toLowerCase()));this.active_request=o}else this.loadActiveRequests()}viewDetails(e){console.log("View details for:",e)}loadActiveRequests(){this.user?.rescueTeamId&&this.requestService.getUserActiveRequest(this.user.rescueTeamId).subscribe(e=>{this.active_request=e||[]},e=>{console.error("Error loading active requests:",e),this.active_request=[]})}ngOnInit(){this.username=this.localStorage.retrieve("username"),console.log(this.username),this.connect(),this.newMessages=[],this.authService.getUser(this.username).subscribe(e=>{this.user=e,e.rescueTeamId&&(this.rescueTeamService.getRescueTeam(e.rescueTeamId).subscribe(t=>{this.rescueTeam=[t]},t=>{console.error("Error loading rescue team:",t),this.rescueTeam=[]}),this.rescueTeamService.getRequestFromRequestId(e.rescueTeamId).subscribe(t=>{this.requestAssignedToUser=t||[]},t=>{console.error("Error loading assigned requests:",t),this.requestAssignedToUser=[]}),this.requestService.getUserActiveRequest(e.rescueTeamId).subscribe(t=>{this.active_request=t||[]},t=>{console.error("Error loading active requests:",t),this.active_request=[]})),this.messageService.getMessageByUserId(e.userId).subscribe(t=>{this.allMessages=t||[]},t=>{console.error("Error loading messages:",t),this.allMessages=[]})},e=>{console.error("Error loading user:",e)}),this.authService.getAllUser().subscribe(e=>{this.AllUsers=e||[]},e=>{console.error("Error loading users:",e),this.AllUsers=[]}),this.websocketService.connectToWebSocket()}openRescueDialog(){let e=new si;e.data=this.requestAssignedToUser,e.disableClose=!0,e.autoFocus=!0,e.height="50%",e.width="60%",e.position={top:"100px",left:""},this.requestDialogOpen?(this.dialog.closeAll(),this.requestDialogOpen=!1):(this.dialog.open(jl,e),this.requestDialogOpen=!0)}openRescueTeamInfo(){let e=new si;e.disableClose=!0,e.data=this.rescueTeam,e.autoFocus=!0,e.position={top:"100px",left:""},this.rescueInfoDialogOpen?(this.dialog.closeAll(),this.rescueInfoDialogOpen=!1):(this.dialog.open(ad,e),this.rescueInfoDialogOpen=!0)}openEmployeesInfoDialog(){let e=new si;e.disableClose=!0,e.data=this.AllUsers,e.autoFocus=!0,e.position={top:"100px",left:""},this.employeeInfoDialogOpen?(this.dialog.closeAll(),this.employeeInfoDialogOpen=!1):(this.dialog.open(Vl,e),this.employeeInfoDialogOpen=!0)}openallMessageDialog(){let e=new si;e.disableClose=!0,e.data=this.allMessages,e.autoFocus=!0,e.position={top:"100px",left:""},this.employeeInfoDialogOpen?(this.dialog.closeAll(),this.employeeInfoDialogOpen=!1):(this.dialog.open(es,e),this.employeeInfoDialogOpen=!0)}openChatLobby(){let e=new si;e.disableClose=!0,e.autoFocus=!0,e.data,e.width="200%",e.position={top:"100px",left:""},this.dialog.open(ns,e)}connect(){let e=new Cd.default("http://localhost:8080/socket");this.ws=Bl.over(e),this.ws.connect({},t=>{this.ws.subscribe("/topic/chat",o=>{var s=JSON.parse(o.body);this.newMessages.push(s),console.log("ALL MESSAGES"+s.content)})})}static{this.\u0275fac=function(t){return new(t||n)(S(ts),S(Mi),S(En),S(Xe),S(is),S(be),S(ft),S(mt),S(gn))}}static{this.\u0275cmp=V({type:n,selectors:[["app-home-page"]],viewQuery:function(t,o){if(t&1&&ot(ql,5),t&2){let s;de(s=he())&&(o.paginator=s.first)}},decls:78,vars:4,consts:[["noTeam",""],["menu","matMenu"],[1,"home-container"],[1,"page-header"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"content-layout"],[1,"main-content"],[1,"requests-card"],[1,"card-title-row"],[1,"title-with-icon"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by location or name...",3,"keyup"],["matSuffix",""],["mat-table","",1,"requests-table",3,"dataSource"],["matColumnDef","requestId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","location"],["matColumnDef","resTeamObj"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","request-row",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],[1,"sidebar-panel"],[1,"quick-actions-card"],[1,"action-list"],["mat-button","",1,"action-item",3,"click"],["mat-header-cell",""],["mat-cell",""],[1,"requester-cell"],[1,"person-icon"],[1,"location-cell"],[1,"location-icon"],[4,"ngIf","ngIfElse"],[1,"team-chip"],[1,"no-team"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"request-row"],[1,"empty-state"]],template:function(t,o){t&1&&(h(0,"div",2)(1,"div",3)(2,"h1"),p(3,"Emergency Dashboard"),m(),h(4,"div",4)(5,"button",5),A("click",function(){return o.openChatLobby()}),h(6,"mat-icon"),p(7,"chat"),m(),p(8," Open Chat "),m()()(),h(9,"div",6)(10,"div",7)(11,"mat-card",8)(12,"mat-card-header")(13,"mat-card-title")(14,"div",9)(15,"div",10)(16,"mat-icon"),p(17,"emergency"),m(),h(18,"span"),p(19,"Active Emergency Requests"),m()(),h(20,"mat-form-field",11)(21,"mat-label"),p(22,"Search"),m(),h(23,"input",12),A("keyup",function(a){return o.applyFilter(a)}),m(),h(24,"mat-icon",13),p(25,"search"),m()()()()(),h(26,"mat-card-content")(27,"table",14),ke(28,15),P(29,df,2,0,"th",16)(30,hf,3,1,"td",17),Ee(),ke(31,18),P(32,mf,2,0,"th",16)(33,uf,6,1,"td",17),Ee(),ke(34,19),P(35,pf,2,0,"th",16)(36,ff,6,1,"td",17),Ee(),ke(37,20),P(38,gf,2,0,"th",16)(39,vf,4,2,"td",17),Ee(),ke(40,21),P(41,yf,2,0,"th",16)(42,xf,16,1,"td",17),Ee(),P(43,Cf,1,0,"tr",22)(44,wf,1,0,"tr",23),m(),P(45,Mf,5,0,"div",24),m()()(),h(46,"div",25)(47,"mat-card",26)(48,"mat-card-header")(49,"mat-card-title"),p(50,"Quick Actions"),m()(),h(51,"mat-card-content")(52,"div",27)(53,"button",28),A("click",function(){return o.openRescueDialog()}),h(54,"mat-icon"),p(55,"assignment"),m(),h(56,"span"),p(57,"Request Assigned"),m()(),h(58,"button",28),A("click",function(){return o.openRescueTeamInfo()}),h(59,"mat-icon"),p(60,"info"),m(),h(61,"span"),p(62,"Rescue Team Info"),m()(),h(63,"button",28),A("click",function(){return o.openEmployeesInfoDialog()}),h(64,"mat-icon"),p(65,"badge"),m(),h(66,"span"),p(67,"Employees"),m()(),h(68,"button",28),A("click",function(){return o.openChatLobby()}),h(69,"mat-icon"),p(70,"chat"),m(),h(71,"span"),p(72,"Chat Lobby"),m()(),h(73,"button",28),A("click",function(){return o.openallMessageDialog()}),h(74,"mat-icon"),p(75,"forum"),m(),h(76,"span"),p(77,"All Messages"),m()()()()()()()()),t&2&&(b(27),x("dataSource",o.active_request),b(16),x("matHeaderRowDef",o.displayedColumnsForRequest),b(),x("matRowDefColumns",o.displayedColumnsForRequest),b(),x("ngIf",!o.active_request||o.active_request.length===0))},dependencies:[re,Bt,jt,Vt,mn,qt,Ht,fn,Ci,_n,vn,wn,yn,bn,Mn,xn,Cn,Sn,kn,Ze,Ba,ud,Si,$i,ms,gt,wi],styles:[".home-container[_ngcontent-%COMP%]{padding:24px;max-width:1600px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:500;color:var(--text-primary);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.content-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 320px;gap:24px}.main-content[_ngcontent-%COMP%]{min-width:0}.requests-card[_ngcontent-%COMP%]{border-radius:12px!important}.card-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;gap:16px}.title-with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:20px;font-weight:500}.title-with-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--emergency-critical)}.search-field[_ngcontent-%COMP%]{width:300px}.requests-table[_ngcontent-%COMP%]{width:100%;margin-top:16px}.request-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.request-row[_ngcontent-%COMP%]:hover{background-color:#0000000a}.requester-cell[_ngcontent-%COMP%], .location-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.person-icon[_ngcontent-%COMP%], .location-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--text-secondary)}.team-chip[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:4px;background:var(--status-active)!important;color:#fff!important}.team-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.no-team[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.sidebar-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.quick-actions-card[_ngcontent-%COMP%]{border-radius:12px!important}.action-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.action-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;width:100%;justify-content:flex-start;text-align:left;border-radius:8px;transition:all .2s}.action-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.action-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:24px;width:24px;height:24px}.action-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}@media (max-width: 1024px){.content-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar-panel[_ngcontent-%COMP%]{order:-1}.search-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.card-title-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.search-field[_ngcontent-%COMP%]{width:100%}.requests-table[_ngcontent-%COMP%]{font-size:14px}}.sidebar[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:20px;color:#1c1c1c}.ActiveRequest-card[_ngcontent-%COMP%]{width:100%;height:100%;margin:50px 50px 10px 0}"]})}}return n})();function Sf(n,i){n&1&&(h(0,"span"),p(1," Please provide a valid email "),m())}function kf(n,i){n&1&&(h(0,"span"),p(1," Please provide a valid username "),m())}function Ef(n,i){n&1&&(h(0,"span"),p(1," Please provide a valid Password "),m())}function Tf(n,i){if(n&1&&(h(0,"option",23),p(1),m()),n&2){let e=i.$implicit;x("ngValue",e),b(),z(e)}}var Md=(()=>{class n{constructor(e,t,o){this.authService=e,this.router=t,this.toastr=o,this.Departments=["Fire","Medical","Police"],this.signupRequestPayload={username:"",email:"",password:"",department:""}}ngOnInit(){this.signupForm=new At({username:new Ae("",te.required),email:new Ae("",[te.required,te.email]),password:new Ae("",te.required),department:new Ae("",te.required)})}signup(){this.signupRequestPayload.email=this.signupForm.get("email").value,this.signupRequestPayload.username=this.signupForm.get("username").value,this.signupRequestPayload.password=this.signupForm.get("password").value,this.signupRequestPayload.department=this.signupForm.get("department").value,this.authService.signup(this.signupRequestPayload).subscribe(e=>{this.router.navigate(["/login"],{queryParams:{registered:"true"}})},e=>{console.log(e),this.toastr.error("Registration Failed! Please try again")})}changeDepartment(e){this.Departments.setValue(e.target.value,{onlySelf:!0})}static{this.\u0275fac=function(t){return new(t||n)(S(Xe),S(be),S(Wt))}}static{this.\u0275cmp=V({type:n,selectors:[["app-signup"]],decls:42,vars:8,consts:[[1,"register-section"],[1,"row","justify-content-center"],[1,"col-md-3"],[1,"col-md-6"],[1,"card"],[1,"card-header",2,"text-align","center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","row"],["for","email_address",1,"col-md-4","col-form-label","text-md-right"],["type","text","id","email_address","name","email-address","required","","autofocus","",1,"form-control",3,"formControlName"],[4,"ngIf"],[1,"col-md-4","col-form-label","text-md-right"],["type","text","required","","autofocus","",1,"form-control",3,"formControlName"],["for","password",1,"col-md-4","col-form-label","text-md-right"],["type","password","id","password","name","password","required","",1,"form-control",3,"formControlName"],["for","department",1,"col-md-4","col-form-label","text-md-right"],["appearance","fill"],["formControlName","department",1,"custom-select",3,"change"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-6","offset-md-4"],["type","submit",1,"sign-up"],[3,"ngValue"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1),M(2,"div",2),h(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4"),p(7,"Register"),m()(),h(8,"div",6)(9,"form",7),A("ngSubmit",function(){return o.signup()}),h(10,"div",8)(11,"label",9),p(12,"E-Mail Address"),m(),h(13,"div",3),M(14,"input",10),P(15,Sf,2,0,"span",11),m()(),h(16,"div",8)(17,"label",12),p(18,"User Name"),m(),h(19,"div",3),M(20,"input",13),P(21,kf,2,0,"span",11),m()(),h(22,"div",8)(23,"label",14),p(24,"Password"),m(),h(25,"div",3),M(26,"input",15),P(27,Ef,2,0,"span",11),m()(),h(28,"div",8),M(29,"label",16),h(30,"div",3)(31,"mat-form-field",17)(32,"mat-label"),p(33,"Department"),m(),h(34,"select",18),A("change",function(a){return o.changeDepartment(a)}),h(35,"option",19),p(36,"Department"),m(),P(37,Tf,2,2,"option",20),m()()()(),h(38,"span",21)(39,"button",22),p(40," Sign Up "),m()()()()()(),M(41,"div",2),m()()),t&2&&(b(9),x("formGroup",o.signupForm),b(5),x("formControlName","email"),b(),x("ngIf",!o.signupForm.get("email").valid&&o.signupForm.get("email").touched),b(5),x("formControlName","username"),b(),x("ngIf",!o.signupForm.get("username").valid&&o.signupForm.get("username").touched),b(5),x("formControlName","password"),b(),x("ngIf",!o.signupForm.get("password").valid&&o.signupForm.get("password").touched),b(10),x("ngForOf",o.Departments))},dependencies:[ht,re,qt,Ht,Ft,Go,Qo,ut,$o,pt,Ot,xi,Lt,Nt],styles:[".register-section[_ngcontent-%COMP%]{margin:100px}"]})}}return n})();var If=["*",[["mat-toolbar-row"]]],Df=["*","mat-toolbar-row"],Pf=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=ei({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),us=(()=>{class n{constructor(e,t,o){this._elementRef=e,this._platform=t,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(ul),S(wt))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,o,s){if(t&1&&Ue(s,Pf,5),t&2){let a;de(a=he())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(t,o){t&2&&(De(o.color?"mat-"+o.color:""),ae("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Be],ngContentSelectors:Df,decls:2,vars:0,template:function(t,o){t&1&&(dt(If),We(0),We(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var Sd=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[Te,Te]})}}return n})();function Rf(n,i){if(n&1){let e=ee();h(0,"div",11)(1,"button",12),M(2,"img",13),p(3),h(4,"mat-icon"),p(5,"arrow_drop_down"),m()(),h(6,"mat-menu",null,0)(8,"button",14),A("click",function(){G(e);let o=R();return Q(o.logout())}),h(9,"mat-icon"),p(10,"exit_to_app"),m(),h(11,"span"),p(12,"Logout"),m()()()()}if(n&2){let e=ni(7),t=R();b(),x("matMenuTriggerFor",e),b(2),j(" ",t.username," ")}}function Of(n,i){n&1&&(h(0,"div",15)(1,"a",16),p(2,"Generate Request"),m(),h(3,"a",17),p(4,"Request Login"),m(),h(5,"a",18),p(6,"Login"),m(),h(7,"a",19),p(8,"Sign up"),m()())}var ps=(()=>{class n{constructor(e,t){this.authService=e,this.router=t}ngOnInit(){this.authService.loggedIn.subscribe(e=>this.isLoggedIn=e),this.authService.username.subscribe(e=>this.username=e),this.isLoggedIn=this.authService.isLoggedIn(),this.username=this.authService.getUserName()}goToUserProfile(){this.router.navigateByUrl("/user-profile/"+this.username)}logout(){this.authService.logout(),this.isLoggedIn=!1,this.router.navigateByUrl("/login")}goHome(){if(!this.isLoggedIn){this.router.navigateByUrl("/login");return}let e=localStorage.getItem("role");e?e==="ROLE_ADMIN"?this.router.navigateByUrl("/admin/dashboard"):e==="ROLE_VICTIM"?this.router.navigateByUrl("/victim/dashboard"):e==="ROLE_DEPARTMENT_HEAD"||e==="ROLE_DISPATCHER"||e==="ROLE_RESCUE_TEAM_MEMBER"?this.router.navigateByUrl("/department/dashboard"):this.router.navigateByUrl("/home"):this.username?this.authService.getUser(this.username).subscribe(t=>{this.user=t;let o=t.role;o==="ROLE_ADMIN"?this.router.navigateByUrl("/admin/dashboard"):o==="ROLE_VICTIM"?this.router.navigateByUrl("/victim/dashboard"):o==="ROLE_DEPARTMENT_HEAD"||o==="ROLE_DISPATCHER"||o==="ROLE_RESCUE_TEAM_MEMBER"?this.router.navigateByUrl("/department/dashboard"):this.router.navigateByUrl("/home")},t=>{console.error("Error getting user info:",t),this.router.navigateByUrl("/login")}):this.router.navigateByUrl("/login")}static{this.\u0275fac=function(t){return new(t||n)(S(Xe),S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-header"]],decls:13,vars:2,consts:[["menu","matMenu"],["color","primary",1,"navbar"],[1,"flex-grow-1"],["aria-label","Home",1,"logo",2,"cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"reddit-icon-svg"],["fill","#FF4500","cx","10","cy","10","r","10"],[1,"reddit-text"],[1,"spacer"],[1,"nav-buttons"],["class","user-menu",4,"ngIf"],["class","nav-links",4,"ngIf"],[1,"user-menu"],["mat-button","",1,"userdetails",3,"matMenuTriggerFor"],["src","https://www.redditstatic.com/avatars/avatar_default_08_D4E815.png",1,"account-icon"],["mat-menu-item","",3,"click"],[1,"nav-links"],["routerLink","/request","mat-button","",1,"nav-link"],["routerLink","/requestLogin","mat-button","",1,"nav-link"],["routerLink","/login","mat-button","",1,"nav-link"],["routerLink","/signup","mat-raised-button","","color","accent",1,"sign-up-btn"]],template:function(t,o){t&1&&(h(0,"header")(1,"mat-toolbar",1)(2,"div",2)(3,"a",3),A("click",function(){return o.goHome()}),It(),h(4,"svg",4)(5,"g"),M(6,"circle",5),m()(),cn(),h(7,"span",6),p(8," Disaster Management Application "),m()()(),M(9,"span",7),h(10,"div",8),P(11,Rf,13,2,"div",9)(12,Of,9,0,"div",10),m()()()),t&2&&(b(11),x("ngIf",o.isLoggedIn),b(),x("ngIf",!o.isLoggedIn))},dependencies:[re,yi,us,Ze,Si,$i,ms,Tl,gt],styles:["header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000}.navbar[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px;height:64px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.flex-grow-1[_ngcontent-%COMP%]{display:flex;align-items:center}.reddit-icon-svg[_ngcontent-%COMP%]{height:40px;width:40px;padding-right:8px}.reddit-text[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#fff;margin-left:8px}.logo[_ngcontent-%COMP%]{text-decoration:none;display:flex;align-items:center;color:#fff}.nav-buttons[_ngcontent-%COMP%], .nav-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.nav-link[_ngcontent-%COMP%]{color:#fff!important;text-decoration:none}.sign-up-btn[_ngcontent-%COMP%]{margin-left:8px}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center}.userdetails[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff!important;background:transparent;border:none;padding:8px 12px;border-radius:4px;transition:background-color .3s}.userdetails[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.account-icon[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px}[_nghost-%COMP%]{display:block;margin-bottom:64px}"]})}}return n})();var Ed=(()=>{class n{constructor(e){this.router=e,this.showFiller=!1}ngOnInit(){}goToRequest(){this.router.navigateByUrl("/requestEmp")}goToRescueTeam(){this.router.navigateByUrl("/rescueTeam")}goToUser(){this.router.navigateByUrl("/user")}goToDepartments(){this.router.navigateByUrl("/departments")}goToChatLobby(){this.router.navigateByUrl("/chatLobb")}static{this.\u0275fac=function(t){return new(t||n)(S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-sidebar"]],decls:18,vars:0,consts:[[1,"sidebar"],[2,"text-align","center","font-size","1em"],[2,"text-align","center"],[1,"btnCreateSubreddit",3,"click"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1),p(2," SideNavigation"),m(),h(3,"div",2)(4,"button",3),A("click",function(){return o.goToRequest()}),p(5,"Request"),m()(),h(6,"div",2)(7,"button",3),A("click",function(){return o.goToRescueTeam()}),p(8,"Rescue Team"),m()(),h(9,"div",2)(10,"button",3),A("click",function(){return o.goToUser()}),p(11,"Departments"),m()(),h(12,"div",2)(13,"button",3),A("click",function(){return o.goToDepartments()}),p(14,"Employees"),m()(),h(15,"div",2)(16,"button",3),A("click",function(){return o.goToChatLobby()}),p(17,"ChatLobby"),m()()())},styles:[".sidebar[_ngcontent-%COMP%]{width:312px;height:242px;--post-line-color: #ccc;border:1px solid #ccc;overflow:hidden;background-color:#fffc;color:#878a8c;position:relative;border-radius:4px;padding:5px;margin-top:50px;margin-bottom:10px;margin-right:5px}.btnCreatePost[_ngcontent-%COMP%], .btnCreateSubreddit[_ngcontent-%COMP%]{background-color:#0079d3;border-color:#0079d3;color:#f0f8ff;fill:#0079d3;border:1px solid;border-radius:4px;text-align:center;letter-spacing:1px;text-decoration:none;font-size:12px;font-weight:700;letter-spacing:.5px;line-height:24px;text-transform:uppercase;padding:3px 16px;opacity:1;width:288px;height:34px}.btnCreateSubreddit[_ngcontent-%COMP%]{margin-top:5px;color:#0079d3;background-color:transparent}.sidebar[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:20px;color:#1c1c1c}"]})}}return n})();var Td=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-toolbar"]],decls:19,vars:0,consts:[["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with heart icon",1,"example-icon","favorite-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon"],["color","primary"]],template:function(t,o){t&1&&(h(0,"p")(1,"mat-toolbar")(2,"button",0)(3,"mat-icon"),p(4,"menu"),m()(),h(5,"span"),p(6,"My App"),m(),M(7,"span",1),h(8,"button",2)(9,"mat-icon"),p(10,"favorite"),m()(),h(11,"button",3)(12,"mat-icon"),p(13,"share"),m()()()(),h(14,"p")(15,"mat-toolbar",4)(16,"button",0)(17,"mat-icon"),p(18,"menu"),m()()()())},dependencies:[us,Ze,wi],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return n})();function Ff(n,i){if(n&1&&(h(0,"mat-card",18)(1,"mat-card-header")(2,"div",7)(3,"mat-icon",8),p(4,"emergency"),m(),h(5,"div")(6,"mat-card-title"),p(7,"Your Emergency Request"),m(),h(8,"mat-card-subtitle"),p(9),m()()()(),h(10,"mat-card-content")(11,"div",19)(12,"div",20)(13,"mat-icon"),p(14,"place"),m(),h(15,"div")(16,"span",21),p(17,"Location"),m(),h(18,"span",22),p(19),m()()(),h(20,"div",20)(21,"mat-icon"),p(22,"access_time"),m(),h(23,"div")(24,"span",21),p(25,"Status"),m(),h(26,"span",23),p(27),m()()()()()()),n&2){let e=R();b(9),j("Request ID: #",(e.requestInfo==null?null:e.requestInfo.requestId)||"N/A",""),b(10),z(e.requestObject.location||"Not specified"),b(8),z(e.requestObject.status||"Pending")}}function Lf(n,i){n&1&&(h(0,"div",24)(1,"mat-icon"),p(2,"inbox"),m(),h(3,"p"),p(4,"No messages yet"),m(),h(5,"span"),p(6,"You'll receive updates here when the rescue team contacts you"),m()())}function Nf(n,i){n&1&&(h(0,"th",33),p(1,"From"),m())}function zf(n,i){if(n&1&&(h(0,"td",34)(1,"div",35)(2,"mat-icon"),p(3,"person"),m(),h(4,"span"),p(5),m()()()),n&2){let e=i.$implicit;b(5),z(e.sender||"Rescue Team")}}function Bf(n,i){n&1&&(h(0,"th",33),p(1,"Message"),m())}function jf(n,i){if(n&1&&(h(0,"td",34)(1,"span",36),p(2),m()()),n&2){let e=i.$implicit;b(2),z(e.content)}}function Vf(n,i){n&1&&(h(0,"th",33),p(1,"Time"),m())}function Hf(n,i){if(n&1&&(h(0,"td",34)(1,"span",37),p(2),Pt(3,"date"),m()()),n&2){let e=i.$implicit;b(2),z(Rt(3,1,e.timestamp,"short"))}}function qf(n,i){n&1&&M(0,"tr",38)}function Wf(n,i){n&1&&M(0,"tr",39)}function Uf(n,i){if(n&1&&(h(0,"table",25),ke(1,26),P(2,Nf,2,0,"th",27)(3,zf,6,1,"td",28),Ee(),ke(4,29),P(5,Bf,2,0,"th",27)(6,jf,3,1,"td",28),Ee(),ke(7,30),P(8,Vf,2,0,"th",27)(9,Hf,4,4,"td",28),Ee(),P(10,qf,1,0,"tr",31)(11,Wf,1,0,"tr",32),m()),n&2){let e=R();x("dataSource",e.allMessages),b(10),x("matHeaderRowDef",e.displayedColumns),b(),x("matRowDefColumns",e.displayedColumns)}}function $f(n,i){if(n&1&&(h(0,"div",42)(1,"div",43)(2,"mat-icon"),p(3,"badge"),m(),h(4,"div")(5,"span",44),p(6,"Team ID"),m(),h(7,"span",45),p(8),m()()(),h(9,"div",43)(10,"mat-icon"),p(11,"people"),m(),h(12,"div")(13,"span",44),p(14,"Members"),m(),h(15,"span",45),p(16),m()()(),h(17,"div",43)(18,"mat-icon"),p(19,"location_on"),m(),h(20,"div")(21,"span",44),p(22,"Current Location"),m(),h(23,"span",45),p(24),m()()()()),n&2){let e=i.$implicit;b(8),z(e.rescueTeamId),b(8),z(e.members||"N/A"),b(8),z(e.currentLocation||"Updating...")}}function Gf(n,i){if(n&1&&(h(0,"mat-card",40)(1,"mat-card-header")(2,"div",7)(3,"mat-icon",8),p(4,"groups"),m(),h(5,"mat-card-title"),p(6,"Assigned Rescue Team"),m()()(),h(7,"mat-card-content"),P(8,$f,25,3,"div",41),m()()),n&2){let e=R();b(8),x("ngForOf",e.rescueTeamObject)}}function Qf(n,i){n&1&&(h(0,"mat-card",40)(1,"mat-card-header")(2,"div",7)(3,"mat-icon",8),p(4,"info"),m(),h(5,"mat-card-title"),p(6,"Rescue Team Status"),m()()(),h(7,"mat-card-content")(8,"div",24)(9,"mat-icon"),p(10,"hourglass_empty"),m(),h(11,"p"),p(12,"Waiting for team assignment"),m(),h(13,"span"),p(14,"A rescue team will be assigned to your request shortly"),m()()()())}var Id=(()=>{class n{constructor(e,t,o,s,a,r,c){this.websocketService=e,this.dialog=t,this.http=o,this.requestService=s,this.rescueTeamService=a,this.localStorage=r,this.messageService=c,this.allMessages=[],this.displayedColumns=["sender","content","timestamp"],this.displayedColumns2=["requestId","members"],this.rescueTeamObject=[]}ngOnInit(){if(this.requestInfo=this.localStorage.retrieve("request"),!this.requestInfo){console.error("No request information found in storage");return}this.requestInfo.requestId&&this.requestService.getRequest(this.requestInfo.requestId).subscribe(e=>{this.requestObject=e},e=>{console.error("Error loading request:",e)}),this.requestInfo.resTeamObj&&this.rescueTeamService.getRescueTeam(this.requestInfo.resTeamObj).subscribe(e=>{this.rescueTeamObject=[e]},e=>{console.error("Error loading rescue team:",e),this.rescueTeamObject=[]}),this.requestInfo.requestId&&this.messageService.getMessageByRequestId(this.requestInfo.requestId).subscribe(e=>{console.log(e),this.allMessages=e||[]},e=>{console.error("Error loading messages:",e),this.allMessages=[]}),this.connect()}connect(){this.websocketService.connectToWebSocket(),console.log(this.websocketService.subscribeToTopicChat())}openChatLobby(){let e=new si;e.disableClose=!0,e.data=this.allMessages,e.autoFocus=!0,e.width="100%",e.height="600px",e.position={top:"100px",left:""},this.dialog.open(ns,e)}openAllMessages(){let e=new si;e.disableClose=!0,e.data=this.allMessages,e.autoFocus=!0,e.width="100%",e.position={top:"100px",left:""},this.dialog.open(es,e)}static{this.\u0275fac=function(t){return new(t||n)(S(ts),S(gn),S(mt),S(Mi),S(En),S(ft),S(is))}}static{this.\u0275cmp=V({type:n,selectors:[["app-request-landing"]],decls:42,vars:5,consts:[[1,"victim-dashboard"],[1,"page-header"],[1,"subtitle"],[1,"dashboard-content"],[1,"main-content"],["class","status-card",4,"ngIf"],[1,"messages-card"],[1,"card-header-content"],[1,"header-icon"],["mat-raised-button","","color","primary",3,"click"],["class","empty-state",4,"ngIf"],["mat-table","","class","messages-table",3,"dataSource",4,"ngIf"],[1,"sidebar-panel"],["class","team-card",4,"ngIf"],[1,"actions-card"],[1,"action-buttons"],["mat-raised-button","","color","primary",1,"action-btn",3,"click"],["mat-raised-button","",1,"action-btn",3,"click"],[1,"status-card"],[1,"status-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","status-badge"],[1,"empty-state"],["mat-table","",1,"messages-table",3,"dataSource"],["matColumnDef","sender"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","content"],["matColumnDef","timestamp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"sender-cell"],[1,"message-content"],[1,"timestamp"],["mat-header-row",""],["mat-row",""],[1,"team-card"],["class","team-info",4,"ngFor","ngForOf"],[1,"team-info"],[1,"team-detail"],[1,"detail-label"],[1,"detail-value"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1)(2,"h1"),p(3,"Emergency Request Status"),m(),h(4,"p",2),p(5,"Track your emergency request and communicate with rescue teams"),m()(),h(6,"div",3)(7,"div",4),P(8,Ff,28,3,"mat-card",5),h(9,"mat-card",6)(10,"mat-card-header")(11,"div",7)(12,"mat-icon",8),p(13,"forum"),m(),h(14,"mat-card-title"),p(15,"Messages from Rescue Team"),m()(),h(16,"button",9),A("click",function(){return o.openChatLobby()}),h(17,"mat-icon"),p(18,"chat"),m(),p(19," Open Chat "),m()(),h(20,"mat-card-content"),P(21,Lf,7,0,"div",10)(22,Uf,12,3,"table",11),m()()(),h(23,"div",12),P(24,Gf,9,1,"mat-card",13)(25,Qf,15,0,"mat-card",13),h(26,"mat-card",14)(27,"mat-card-header")(28,"mat-card-title"),p(29,"Quick Actions"),m()(),h(30,"mat-card-content")(31,"div",15)(32,"button",16),A("click",function(){return o.openChatLobby()}),h(33,"mat-icon"),p(34,"chat"),m(),h(35,"span"),p(36,"Chat with Team"),m()(),h(37,"button",17),A("click",function(){return o.openAllMessages()}),h(38,"mat-icon"),p(39,"forum"),m(),h(40,"span"),p(41,"View All Messages"),m()()()()()()()()),t&2&&(b(8),x("ngIf",o.requestObject),b(13),x("ngIf",o.allMessages.length===0),b(),x("ngIf",o.allMessages.length>0),b(2),x("ngIf",o.rescueTeamObject.length>0),b(),x("ngIf",o.rescueTeamObject.length===0))},dependencies:[ht,re,Bt,jt,Vt,Cl,mn,_n,vn,wn,yn,bn,Mn,xn,Cn,Sn,kn,Ze,gt,vi],styles:[".victim-dashboard[_ngcontent-%COMP%]{padding:24px;background:#f5f5f5;min-height:100vh}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:500;margin:0 0 8px;color:#1976d2}.subtitle[_ngcontent-%COMP%]{font-size:16px;color:#666;margin:0}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:24px}@media (max-width: 1024px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.main-content[_ngcontent-%COMP%], .sidebar-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;border-radius:12px}.card-header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.header-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:28px;width:28px;height:28px}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0;margin:-16px -16px 16px}mat-card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#fff}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin:0}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#ffffffe6;margin:4px 0 0}.status-card[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:16px}.info-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;padding:12px;background:#f5f5f5;border-radius:8px}.info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:4px}.info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#4caf50;color:#fff;border-radius:12px;font-size:14px;text-transform:uppercase}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ddd;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:0 0 8px;color:#666}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#999}.messages-table[_ngcontent-%COMP%]{width:100%;margin-top:16px}.messages-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:600;color:#333}.messages-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.sender-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.sender-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:20px;width:20px;height:20px}.message-content[_ngcontent-%COMP%]{display:block;max-width:400px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.timestamp[_ngcontent-%COMP%]{color:#666;font-size:13px}.team-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:8px}.team-detail[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;padding:12px;background:#f5f5f5;border-radius:8px}.team-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:2px}.team-detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1}.detail-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;font-weight:500}.detail-value[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.action-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:12px 16px;height:auto}.action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}mat-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;color:#667eea}mat-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;margin-right:4px}} .sidebar[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:20px;color:#1c1c1c}.ActiveRequest-card[_ngcontent-%COMP%]{width:100%;height:100%;margin:50px 50px 10px 0}"]})}}return n})();var Dd=(()=>{class n{constructor(e,t,o){this.localStorage=e,this.httpClient=t,this.router=o,this.requestForm=new At({fullName:new Ae(""),location:new Ae("")})}ngOnInit(){}fetchRequest(){let e=new Wc().append("fullName",this.requestForm.get("fullName").value).append("location",this.requestForm.get("location").value);console.log(this.requestForm.get("location").value),console.log(e),this.httpClient.get("http://localhost:8080/api/request/victimLogin/",{params:e}).subscribe(t=>{console.log(t),this.localStorage.store("request",t),t!=null?this.router.navigate(["requestLanding"]):this.router.navigate(["requestLogin"])})}static{this.\u0275fac=function(t){return new(t||n)(S(ft),S(mt),S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-request-login"]],decls:24,vars:3,consts:[[1,"login-section"],[1,"row","justify-content-center"],[1,"col-md-3"],[1,"col-md-6"],[1,"card"],[1,"card-header",2,"text-align","center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","row"],["for","victim_name",1,"col-md-4","col-form-label","text-md-right"],["type","text","id","victim_name","name","victim_name","required","","autofocus","",1,"form-control",3,"formControlName"],["for","location",1,"col-md-4","col-form-label","text-md-right"],["type","text","id","location","name","location","required","",1,"form-control",3,"formControlName"],[1,"col-md-6","offset-md-4"],["type","submit",1,"login"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1),M(2,"div",2),h(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4"),p(7,"Victim Login"),m()(),h(8,"div",6)(9,"form",7),A("ngSubmit",function(){return o.fetchRequest()}),h(10,"div",8)(11,"label",9),p(12,"Full Name"),m(),h(13,"div",3),M(14,"input",10),m()(),h(15,"div",8)(16,"label",11),p(17,"Location"),m(),h(18,"div",3),M(19,"input",12),m()(),h(20,"span",13)(21,"button",14),p(22," Login "),m()()()()()(),M(23,"div",2),m()()),t&2&&(b(9),x("formGroup",o.requestForm),b(5),x("formControlName","fullName"),b(5),x("formControlName","location"))},dependencies:[Ft,ut,pt,Ot,xi,Lt,Nt],styles:[".login-section[_ngcontent-%COMP%]{margin:100px}.login-failed[_ngcontent-%COMP%], .register-success[_ngcontent-%COMP%]{text-align:center;margin:10px auto auto;border:2px solid black;width:65%;background-color:red}.login-failed-text[_ngcontent-%COMP%], .register-success-text[_ngcontent-%COMP%]{text-align:center;margin-top:5px;font-weight:700;color:#f0f8ff}"]})}}return n})();var St=(()=>{class n{constructor(e,t,o){this.authService=e,this.router=t,this.localStorage=o}canActivate(e,t){if(!this.authService.isLoggedIn())return this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1;let o=e.data.roles;if(o&&o.length>0){let s=this.localStorage.retrieve("role");if(!s||!o.includes(s))return this.router.navigate(["/home"]),!1}return!0}static{this.\u0275fac=function(t){return new(t||n)(ge(Xe),ge(be),ge(ft))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kf=["determinateSpinner"];function Yf(n,i){if(n&1&&(It(),h(0,"svg",11),M(1,"circle",12),m()),n&2){let e=R();se("viewBox",e._viewBox()),b(),ze("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),se("r",e._circleRadius())}}var Xf=new Le("mat-progress-spinner-default-options",{providedIn:"root",factory:Zf});function Zf(){return{diameter:Pd}}var Pd=100,Jf=10,Rd=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,t,o){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=Pd,this._noopAnimations=t==="NoopAnimations"&&!!o&&!o._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",o&&(o.color&&(this.color=this._defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-Jf)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(t){return new(t||n)(S(Ne),S(ii,8),S(Xf))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,o){if(t&1&&ot(Kf,5),t&2){let s;de(s=he())&&(o._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,o){t&2&&(se("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",o.mode==="determinate"?o.value:null)("mode",o.mode),De("mat-"+o.color),ze("width",o.diameter,"px")("height",o.diameter,"px")("--mdc-circular-progress-size",o.diameter+"px")("--mdc-circular-progress-active-indicator-width",o.diameter+"px"),ae("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate",o.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",oi],diameter:[2,"diameter","diameter",oi],strokeWidth:[2,"strokeWidth","strokeWidth",oi]},exportAs:["matProgressSpinner"],standalone:!0,features:[xt,Be],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,o){if(t&1&&(P(0,Yf,2,8,"ng-template",null,0,Wo),h(2,"div",2,1),It(),h(4,"svg",3),M(5,"circle",4),m()(),cn(),h(6,"div",5)(7,"div",6)(8,"div",7),Ho(9,8),m(),h(10,"div",9),Ho(11,8),m(),h(12,"div",10),Ho(13,8),m()()()),t&2){let s=ni(1);b(4),se("viewBox",o._viewBox()),b(),ze("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),se("r",o._circleRadius()),b(4),x("ngTemplateOutlet",s),b(2),x("ngTemplateOutlet",s),b(2),x("ngTemplateOutlet",s)}},dependencies:[Hc],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return n})();var Od=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[dn,Te]})}}return n})();function tg(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("username")," ")}}function ig(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("email")," ")}}function ng(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("fullName")," ")}}function og(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("phoneNumber")," ")}}function sg(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("password")," ")}}function ag(n,i){if(n&1&&(h(0,"mat-error"),p(1),m()),n&2){let e=R();b(),j(" ",e.getErrorMessage("confirmPassword")," ")}}function rg(n,i){n&1&&M(0,"mat-spinner",29)}function cg(n,i){n&1&&(h(0,"span"),p(1,"Register"),m())}function lg(n,i){n&1&&(h(0,"span"),p(1,"Registering..."),m())}var Ad=(()=>{class n{constructor(e,t,o,s){this.fb=e,this.authService=t,this.router=o,this.toastr=s,this.isLoading=!1,this.hidePassword=!0}ngOnInit(){this.initializeForm()}initializeForm(){this.registrationForm=this.fb.group({username:["",[te.required,te.minLength(3),te.maxLength(50),te.pattern(/^[a-zA-Z0-9_-]+$/)]],email:["",[te.required,te.email]],password:["",[te.required,te.minLength(8),te.maxLength(100),te.pattern(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$/)]],confirmPassword:["",te.required],fullName:["",[te.required,te.minLength(2),te.maxLength(100)]],phoneNumber:["",[te.required,te.pattern(/^[+]?[0-9]{10,15}$/)]],address:["",te.maxLength(255)],city:["",te.maxLength(100)],state:["",te.maxLength(50)],postalCode:["",te.pattern(/^[0-9]{5,10}$/)],emergencyContactName:["",te.maxLength(100)],emergencyContactPhone:["",te.pattern(/^[+]?[0-9]{10,15}$/)]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){let t=e.get("password"),o=e.get("confirmPassword");t&&o&&t.value!==o.value?o.setErrors({passwordMismatch:!0}):o?.hasError("passwordMismatch")&&o.setErrors(null)}onSubmit(){if(this.registrationForm.valid){this.isLoading=!0;let e=le({},this.registrationForm.value);delete e.confirmPassword,this.authService.registerVictim(e).subscribe({next:t=>{this.toastr.success("Registration successful! Redirecting to dashboard...","Success"),localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),localStorage.setItem("username",t.username),localStorage.setItem("role",t.role),setTimeout(()=>{this.router.navigate(["/victim-dashboard"])},1500)},error:t=>{this.isLoading=!1,console.error("Registration error:",t),t.status===409?this.toastr.error("Username or email already exists","Registration Failed"):t.error&&t.error.message?this.toastr.error(t.error.message,"Registration Failed"):this.toastr.error("An error occurred during registration","Registration Failed")},complete:()=>{this.isLoading=!1}})}else this.markFormGroupTouched(this.registrationForm),this.toastr.warning("Please fill in all required fields correctly","Validation Error")}markFormGroupTouched(e){Object.keys(e.controls).forEach(t=>{let o=e.get(t);o?.markAsTouched(),o instanceof At&&this.markFormGroupTouched(o)})}hasError(e,t){let o=this.registrationForm.get(e);return!!(o&&o.hasError(t)&&o.touched)}getErrorMessage(e){let t=this.registrationForm.get(e);return t?.hasError("required")?`${this.getFieldLabel(e)} is required`:t?.hasError("email")?"Invalid email format":t?.hasError("minlength")?`Minimum length is ${t.errors?.minlength.requiredLength} characters`:t?.hasError("maxlength")?`Maximum length is ${t.errors?.maxlength.requiredLength} characters`:t?.hasError("pattern")?this.getPatternErrorMessage(e):t?.hasError("passwordMismatch")?"Passwords do not match":""}getFieldLabel(e){return{username:"Username",email:"Email",password:"Password",confirmPassword:"Confirm Password",fullName:"Full Name",phoneNumber:"Phone Number",address:"Address",city:"City",state:"State",postalCode:"Postal Code",emergencyContactName:"Emergency Contact Name",emergencyContactPhone:"Emergency Contact Phone"}[e]||e}getPatternErrorMessage(e){switch(e){case"username":return"Username can only contain letters, numbers, underscores, and hyphens";case"password":return"Password must contain at least one uppercase, one lowercase, one digit, and one special character";case"phoneNumber":case"emergencyContactPhone":return"Invalid phone number format (10-15 digits)";case"postalCode":return"Invalid postal code (5-10 digits)";default:return"Invalid format"}}static{this.\u0275fac=function(t){return new(t||n)(S(Ko),S(Xe),S(be),S(Wt))}}static{this.\u0275cmp=V({type:n,selectors:[["app-victim-registration"]],decls:115,vars:13,consts:[[1,"registration-container"],[1,"registration-card"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","john_doe","autocomplete","username"],["matPrefix",""],[4,"ngIf"],["matInput","","type","email","formControlName","email","placeholder","john@example.com","autocomplete","email"],["matInput","","formControlName","fullName","placeholder","John Doe","autocomplete","name"],["matInput","","formControlName","phoneNumber","placeholder","+1234567890","autocomplete","tel"],["matInput","","formControlName","password","autocomplete","new-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","type","password","formControlName","confirmPassword","autocomplete","new-password"],["matInput","","formControlName","address","placeholder","123 Main St","autocomplete","street-address"],[1,"form-row","two-columns"],["appearance","outline"],["matInput","","formControlName","city","placeholder","New York","autocomplete","address-level2"],["matInput","","formControlName","state","placeholder","NY","autocomplete","address-level1"],["appearance","outline",1,"half-width"],["matInput","","formControlName","postalCode","placeholder","10001","autocomplete","postal-code"],["matInput","","formControlName","emergencyContactName","placeholder","Jane Doe"],["matInput","","formControlName","emergencyContactPhone","placeholder","+1234567891"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["diameter","20","class","button-spinner",4,"ngIf"],[1,"login-link"],["routerLink","/login"],["diameter","20",1,"button-spinner"]],template:function(t,o){if(t&1&&(h(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),p(5,"\u{1F6A8} Victim Registration"),m(),h(6,"p",2),p(7,"Register to request emergency assistance"),m()()(),h(8,"mat-card-content")(9,"form",3),A("ngSubmit",function(){return o.onSubmit()}),h(10,"h2"),p(11,"Personal Information"),m(),h(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),p(15,"Username"),m(),M(16,"input",6),h(17,"mat-icon",7),p(18,"person"),m(),P(19,tg,2,1,"mat-error",8),m()(),h(20,"div",4)(21,"mat-form-field",5)(22,"mat-label"),p(23,"Email"),m(),M(24,"input",9),h(25,"mat-icon",7),p(26,"email"),m(),P(27,ig,2,1,"mat-error",8),m()(),h(28,"div",4)(29,"mat-form-field",5)(30,"mat-label"),p(31,"Full Name"),m(),M(32,"input",10),h(33,"mat-icon",7),p(34,"badge"),m(),P(35,ng,2,1,"mat-error",8),m()(),h(36,"div",4)(37,"mat-form-field",5)(38,"mat-label"),p(39,"Phone Number"),m(),M(40,"input",11),h(41,"mat-icon",7),p(42,"phone"),m(),P(43,og,2,1,"mat-error",8),m()(),h(44,"h2"),p(45,"Security"),m(),h(46,"div",4)(47,"mat-form-field",5)(48,"mat-label"),p(49,"Password"),m(),M(50,"input",12),h(51,"mat-icon",7),p(52,"lock"),m(),h(53,"button",13),A("click",function(){return o.hidePassword=!o.hidePassword}),h(54,"mat-icon"),p(55),m()(),h(56,"mat-hint"),p(57,"Min 8 chars, 1 uppercase, 1 lowercase, 1 digit, 1 special char"),m(),P(58,sg,2,1,"mat-error",8),m()(),h(59,"div",4)(60,"mat-form-field",5)(61,"mat-label"),p(62,"Confirm Password"),m(),M(63,"input",14),h(64,"mat-icon",7),p(65,"lock_outline"),m(),P(66,ag,2,1,"mat-error",8),m()(),h(67,"h2"),p(68,"Address (Optional)"),m(),h(69,"div",4)(70,"mat-form-field",5)(71,"mat-label"),p(72,"Street Address"),m(),M(73,"input",15),h(74,"mat-icon",7),p(75,"home"),m()()(),h(76,"div",16)(77,"mat-form-field",17)(78,"mat-label"),p(79,"City"),m(),M(80,"input",18),m(),h(81,"mat-form-field",17)(82,"mat-label"),p(83,"State"),m(),M(84,"input",19),m()(),h(85,"div",4)(86,"mat-form-field",20)(87,"mat-label"),p(88,"Postal Code"),m(),M(89,"input",21),m()(),h(90,"h2"),p(91,"Emergency Contact (Optional)"),m(),h(92,"div",4)(93,"mat-form-field",5)(94,"mat-label"),p(95,"Contact Name"),m(),M(96,"input",22),h(97,"mat-icon",7),p(98,"contact_phone"),m()()(),h(99,"div",4)(100,"mat-form-field",5)(101,"mat-label"),p(102,"Contact Phone"),m(),M(103,"input",23),h(104,"mat-icon",7),p(105,"phone_in_talk"),m()()(),h(106,"div",24)(107,"button",25),P(108,rg,1,0,"mat-spinner",26)(109,cg,2,0,"span",8)(110,lg,2,0,"span",8),m(),h(111,"div",27),p(112," Already have an account? "),h(113,"a",28),p(114,"Login here"),m()()()()()()()),t&2){let s,a,r,c,l,d;b(9),x("formGroup",o.registrationForm),b(10),x("ngIf",(s=o.registrationForm.get("username"))==null?null:s.invalid),b(8),x("ngIf",(a=o.registrationForm.get("email"))==null?null:a.invalid),b(8),x("ngIf",(r=o.registrationForm.get("fullName"))==null?null:r.invalid),b(8),x("ngIf",(c=o.registrationForm.get("phoneNumber"))==null?null:c.invalid),b(7),x("type",o.hidePassword?"password":"text"),b(5),z(o.hidePassword?"visibility_off":"visibility"),b(3),x("ngIf",(l=o.registrationForm.get("password"))==null?null:l.invalid),b(8),x("ngIf",(d=o.registrationForm.get("confirmPassword"))==null?null:d.invalid),b(41),x("disabled",o.isLoading),b(),x("ngIf",o.isLoading),b(),x("ngIf",!o.isLoading),b(),x("ngIf",o.isLoading)}},dependencies:[re,yi,Bt,jt,Vt,mn,qt,Ht,Ml,un,pn,fn,Ci,Ft,ut,pt,Ot,Lt,Nt,Ze,gt,wi,Rd],styles:[".registration-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.registration-card[_ngcontent-%COMP%]{max-width:600px;width:100%;box-shadow:0 10px 30px #0000004d;border-radius:16px}mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:24px;border-radius:16px 16px 0 0;margin:-16px -16px 24px}mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600}.subtitle[_ngcontent-%COMP%]{margin:8px 0 0;opacity:.9;font-size:14px}h2[_ngcontent-%COMP%]{color:#667eea;font-size:18px;margin-top:24px;margin-bottom:16px;font-weight:600;border-bottom:2px solid #667eea;padding-bottom:8px}.form-row[_ngcontent-%COMP%]{margin-bottom:16px}.form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{width:48%}mat-form-field[_ngcontent-%COMP%]{display:block}.form-actions[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.submit-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);position:relative}.button-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;vertical-align:middle}.login-link[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;color:#666}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 600px){.registration-container[_ngcontent-%COMP%]{padding:10px}.registration-card[_ngcontent-%COMP%]{margin:10px}.form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.half-width[_ngcontent-%COMP%]{width:100%}mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}mat-icon[_ngcontent-%COMP%]{color:#667eea}mat-error[_ngcontent-%COMP%]{font-size:12px}mat-hint[_ngcontent-%COMP%]{font-size:11px;color:#999}"]})}}return n})();function po(n){return n+.5|0}var ki=(n,i,e)=>Math.max(Math.min(n,e),i);function mo(n){return ki(po(n*2.55),0,255)}function Ei(n){return ki(po(n*255),0,255)}function ai(n){return ki(po(n/2.55)/100,0,1)}function Fd(n){return ki(po(n*100),0,100)}var bt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qa=[..."0123456789ABCDEF"],dg=n=>qa[n&15],hg=n=>qa[(n&240)>>4]+qa[n&15],fs=n=>(n&240)>>4===(n&15),mg=n=>fs(n.r)&&fs(n.g)&&fs(n.b)&&fs(n.a);function ug(n){var i=n.length,e;return n[0]==="#"&&(i===4||i===5?e={r:255&bt[n[1]]*17,g:255&bt[n[2]]*17,b:255&bt[n[3]]*17,a:i===5?bt[n[4]]*17:255}:(i===7||i===9)&&(e={r:bt[n[1]]<<4|bt[n[2]],g:bt[n[3]]<<4|bt[n[4]],b:bt[n[5]]<<4|bt[n[6]],a:i===9?bt[n[7]]<<4|bt[n[8]]:255})),e}var pg=(n,i)=>n<255?i(n):"";function fg(n){var i=mg(n)?dg:hg;return n?"#"+i(n.r)+i(n.g)+i(n.b)+pg(n.a,i):void 0}var gg=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Bd(n,i,e){let t=i*Math.min(e,1-e),o=(s,a=(s+n/30)%12)=>e-t*Math.max(Math.min(a-3,9-a,1),-1);return[o(0),o(8),o(4)]}function _g(n,i,e){let t=(o,s=(o+n/60)%6)=>e-e*i*Math.max(Math.min(s,4-s,1),0);return[t(5),t(3),t(1)]}function bg(n,i,e){let t=Bd(n,1,.5),o;for(i+e>1&&(o=1/(i+e),i*=o,e*=o),o=0;o<3;o++)t[o]*=1-i-e,t[o]+=i;return t}function vg(n,i,e,t,o){return n===o?(i-e)/t+(i<e?6:0):i===o?(e-n)/t+2:(n-i)/t+4}function Wa(n){let e=n.r/255,t=n.g/255,o=n.b/255,s=Math.max(e,t,o),a=Math.min(e,t,o),r=(s+a)/2,c,l,d;return s!==a&&(d=s-a,l=r>.5?d/(2-s-a):d/(s+a),c=vg(e,t,o,d,s),c=c*60+.5),[c|0,l||0,r]}function Ua(n,i,e,t){return(Array.isArray(i)?n(i[0],i[1],i[2]):n(i,e,t)).map(Ei)}function $a(n,i,e){return Ua(Bd,n,i,e)}function yg(n,i,e){return Ua(bg,n,i,e)}function xg(n,i,e){return Ua(_g,n,i,e)}function jd(n){return(n%360+360)%360}function Cg(n){let i=gg.exec(n),e=255,t;if(!i)return;i[5]!==t&&(e=i[6]?mo(+i[5]):Ei(+i[5]));let o=jd(+i[2]),s=+i[3]/100,a=+i[4]/100;return i[1]==="hwb"?t=yg(o,s,a):i[1]==="hsv"?t=xg(o,s,a):t=$a(o,s,a),{r:t[0],g:t[1],b:t[2],a:e}}function wg(n,i){var e=Wa(n);e[0]=jd(e[0]+i),e=$a(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Mg(n){if(!n)return;let i=Wa(n),e=i[0],t=Fd(i[1]),o=Fd(i[2]);return n.a<255?`hsla(${e}, ${t}%, ${o}%, ${ai(n.a)})`:`hsl(${e}, ${t}%, ${o}%)`}var Ld={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sg(){let n={},i=Object.keys(Nd),e=Object.keys(Ld),t,o,s,a,r;for(t=0;t<i.length;t++){for(a=r=i[t],o=0;o<e.length;o++)s=e[o],r=r.replace(s,Ld[s]);s=parseInt(Nd[a],16),n[r]=[s>>16&255,s>>8&255,s&255]}return n}var gs;function kg(n){gs||(gs=Sg(),gs.transparent=[0,0,0,0]);let i=gs[n.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:i.length===4?i[3]:255}}var Eg=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Tg(n){let i=Eg.exec(n),e=255,t,o,s;if(i){if(i[7]!==t){let a=+i[7];e=i[8]?mo(a):ki(a*255,0,255)}return t=+i[1],o=+i[3],s=+i[5],t=255&(i[2]?mo(t):ki(t,0,255)),o=255&(i[4]?mo(o):ki(o,0,255)),s=255&(i[6]?mo(s):ki(s,0,255)),{r:t,g:o,b:s,a:e}}}function Ig(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ai(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Ha=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Rn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Dg(n,i,e){let t=Rn(ai(n.r)),o=Rn(ai(n.g)),s=Rn(ai(n.b));return{r:Ei(Ha(t+e*(Rn(ai(i.r))-t))),g:Ei(Ha(o+e*(Rn(ai(i.g))-o))),b:Ei(Ha(s+e*(Rn(ai(i.b))-s))),a:n.a+e*(i.a-n.a)}}function _s(n,i,e){if(n){let t=Wa(n);t[i]=Math.max(0,Math.min(t[i]+t[i]*e,i===0?360:1)),t=$a(t),n.r=t[0],n.g=t[1],n.b=t[2]}}function Vd(n,i){return n&&Object.assign(i||{},n)}function zd(n){var i={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(i={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(i.a=Ei(n[3]))):(i=Vd(n,{r:0,g:0,b:0,a:1}),i.a=Ei(i.a)),i}function Pg(n){return n.charAt(0)==="r"?Tg(n):Cg(n)}var uo=class n{constructor(i){if(i instanceof n)return i;let e=typeof i,t;e==="object"?t=zd(i):e==="string"&&(t=ug(i)||kg(i)||Pg(i)),this._rgb=t,this._valid=!!t}get valid(){return this._valid}get rgb(){var i=Vd(this._rgb);return i&&(i.a=ai(i.a)),i}set rgb(i){this._rgb=zd(i)}rgbString(){return this._valid?Ig(this._rgb):void 0}hexString(){return this._valid?fg(this._rgb):void 0}hslString(){return this._valid?Mg(this._rgb):void 0}mix(i,e){if(i){let t=this.rgb,o=i.rgb,s,a=e===s?.5:e,r=2*a-1,c=t.a-o.a,l=((r*c===-1?r:(r+c)/(1+r*c))+1)/2;s=1-l,t.r=255&l*t.r+s*o.r+.5,t.g=255&l*t.g+s*o.g+.5,t.b=255&l*t.b+s*o.b+.5,t.a=a*t.a+(1-a)*o.a,this.rgb=t}return this}interpolate(i,e){return i&&(this._rgb=Dg(this._rgb,i._rgb,e)),this}clone(){return new n(this.rgb)}alpha(i){return this._rgb.a=Ei(i),this}clearer(i){let e=this._rgb;return e.a*=1-i,this}greyscale(){let i=this._rgb,e=po(i.r*.3+i.g*.59+i.b*.11);return i.r=i.g=i.b=e,this}opaquer(i){let e=this._rgb;return e.a*=1+i,this}negate(){let i=this._rgb;return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,this}lighten(i){return _s(this._rgb,2,i),this}darken(i){return _s(this._rgb,2,-i),this}saturate(i){return _s(this._rgb,1,i),this}desaturate(i){return _s(this._rgb,1,-i),this}rotate(i){return wg(this._rgb,i),this}};function Gt(){}var Zd=(()=>{let n=0;return()=>n++})();function Z(n){return n===null||typeof n>"u"}function me(n){if(Array.isArray&&Array.isArray(n))return!0;let i=Object.prototype.toString.call(n);return i.slice(0,7)==="[object"&&i.slice(-6)==="Array]"}function Y(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ve(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function et(n,i){return ve(n)?n:i}function $(n,i){return typeof n>"u"?i:n}var Jd=(n,i)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/i,Ya=(n,i)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*i:+n;function ce(n,i,e){if(n&&typeof n.call=="function")return n.apply(e,i)}function oe(n,i,e,t){let o,s,a;if(me(n))if(s=n.length,t)for(o=s-1;o>=0;o--)i.call(e,n[o],o);else for(o=0;o<s;o++)i.call(e,n[o],o);else if(Y(n))for(a=Object.keys(n),s=a.length,o=0;o<s;o++)i.call(e,n[a[o]],a[o])}function _o(n,i){let e,t,o,s;if(!n||!i||n.length!==i.length)return!1;for(e=0,t=n.length;e<t;++e)if(o=n[e],s=i[e],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function xs(n){if(me(n))return n.map(xs);if(Y(n)){let i=Object.create(null),e=Object.keys(n),t=e.length,o=0;for(;o<t;++o)i[e[o]]=xs(n[e[o]]);return i}return n}function eh(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Rg(n,i,e,t){if(!eh(n))return;let o=i[n],s=e[n];Y(o)&&Y(s)?An(o,s,t):i[n]=xs(s)}function An(n,i,e){let t=me(i)?i:[i],o=t.length;if(!Y(n))return n;e=e||{};let s=e.merger||Rg,a;for(let r=0;r<o;++r){if(a=t[r],!Y(a))continue;let c=Object.keys(a);for(let l=0,d=c.length;l<d;++l)s(c[l],n,a,e)}return n}function Ln(n,i){return An(n,i,{merger:Og})}function Og(n,i,e){if(!eh(n))return;let t=i[n],o=e[n];Y(t)&&Y(o)?Ln(t,o):Object.prototype.hasOwnProperty.call(i,n)||(i[n]=xs(o))}var Hd={"":n=>n,x:n=>n.x,y:n=>n.y};function Ag(n){let i=n.split("."),e=[],t="";for(let o of i)t+=o,t.endsWith("\\")?t=t.slice(0,-1)+".":(e.push(t),t="");return e}function Fg(n){let i=Ag(n);return e=>{for(let t of i){if(t==="")break;e=e&&e[t]}return e}}function li(n,i){return(Hd[i]||(Hd[i]=Fg(i)))(n)}function Ss(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Nn=n=>typeof n<"u",ri=n=>typeof n=="function",Xa=(n,i)=>{if(n.size!==i.size)return!1;for(let e of n)if(!i.has(e))return!1;return!0};function th(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var ue=Math.PI,pe=2*ue,Lg=pe+ue,Cs=Number.POSITIVE_INFINITY,Ng=ue/180,we=ue/2,Gi=ue/4,qd=ue*2/3,ci=Math.log10,kt=Math.sign;function zn(n,i,e){return Math.abs(n-i)<e}function Za(n){let i=Math.round(n);n=zn(n,i,n/1e3)?i:n;let e=Math.pow(10,Math.floor(ci(n))),t=n/e;return(t<=1?1:t<=2?2:t<=5?5:10)*e}function ih(n){let i=[],e=Math.sqrt(n),t;for(t=1;t<e;t++)n%t===0&&(i.push(t),i.push(n/t));return e===(e|0)&&i.push(e),i.sort((o,s)=>o-s).pop(),i}function Yi(n){return!isNaN(parseFloat(n))&&isFinite(n)}function nh(n,i){let e=Math.round(n);return e-i<=n&&e+i>=n}function Ja(n,i,e){let t,o,s;for(t=0,o=n.length;t<o;t++)s=n[t][e],isNaN(s)||(i.min=Math.min(i.min,s),i.max=Math.max(i.max,s))}function vt(n){return n*(ue/180)}function ks(n){return n*(180/ue)}function er(n){if(!ve(n))return;let i=1,e=0;for(;Math.round(n*i)/i!==n;)i*=10,e++;return e}function tr(n,i){let e=i.x-n.x,t=i.y-n.y,o=Math.sqrt(e*e+t*t),s=Math.atan2(t,e);return s<-.5*ue&&(s+=pe),{angle:s,distance:o}}function ws(n,i){return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))}function zg(n,i){return(n-i+Lg)%pe-ue}function Je(n){return(n%pe+pe)%pe}function Bn(n,i,e,t){let o=Je(n),s=Je(i),a=Je(e),r=Je(s-o),c=Je(a-o),l=Je(o-s),d=Je(o-a);return o===s||o===a||t&&s===a||r>c&&l<d}function Re(n,i,e){return Math.max(i,Math.min(e,n))}function oh(n){return Re(n,-32768,32767)}function Qt(n,i,e,t=1e-6){return n>=Math.min(i,e)-t&&n<=Math.max(i,e)+t}function Es(n,i,e){e=e||(a=>n[a]<i);let t=n.length-1,o=0,s;for(;t-o>1;)s=o+t>>1,e(s)?o=s:t=s;return{lo:o,hi:t}}var Ut=(n,i,e,t)=>Es(n,e,t?o=>{let s=n[o][i];return s<e||s===e&&n[o+1][i]===e}:o=>n[o][i]<e),sh=(n,i,e)=>Es(n,e,t=>n[t][i]>=e);function ah(n,i,e){let t=0,o=n.length;for(;t<o&&n[t]<i;)t++;for(;o>t&&n[o-1]>e;)o--;return t>0||o<n.length?n.slice(t,o):n}var rh=["push","pop","shift","splice","unshift"];function ch(n,i){if(n._chartjs){n._chartjs.listeners.push(i);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),rh.forEach(e=>{let t="_onData"+Ss(e),o=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let a=o.apply(this,s);return n._chartjs.listeners.forEach(r=>{typeof r[t]=="function"&&r[t](...s)}),a}})})}function ir(n,i){let e=n._chartjs;if(!e)return;let t=e.listeners,o=t.indexOf(i);o!==-1&&t.splice(o,1),!(t.length>0)&&(rh.forEach(s=>{delete n[s]}),delete n._chartjs)}function nr(n){let i=new Set(n);return i.size===n.length?n:Array.from(i)}var or=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function sr(n,i){let e=[],t=!1;return function(...o){e=o,t||(t=!0,or.call(window,()=>{t=!1,n.apply(i,e)}))}}function lh(n,i){let e;return function(...t){return i?(clearTimeout(e),e=setTimeout(n,i,t)):n.apply(this,t),i}}var Ts=n=>n==="start"?"left":n==="end"?"right":"center",je=(n,i,e)=>n==="start"?i:n==="end"?e:(i+e)/2,dh=(n,i,e,t)=>n===(t?"left":"right")?e:n==="center"?(i+e)/2:i;function ar(n,i,e){let t=i.length,o=0,s=t;if(n._sorted){let{iScale:a,_parsed:r}=n,c=a.axis,{min:l,max:d,minDefined:u,maxDefined:f}=a.getUserBounds();u&&(o=Re(Math.min(Ut(r,c,l).lo,e?t:Ut(i,c,a.getPixelForValue(l)).lo),0,t-1)),f?s=Re(Math.max(Ut(r,a.axis,d,!0).hi+1,e?0:Ut(i,c,a.getPixelForValue(d),!0).hi+1),o,t)-o:s=t-o}return{start:o,count:s}}function rr(n){let{xScale:i,yScale:e,_scaleRanges:t}=n,o={xmin:i.min,xmax:i.max,ymin:e.min,ymax:e.max};if(!t)return n._scaleRanges=o,!0;let s=t.xmin!==i.min||t.xmax!==i.max||t.ymin!==e.min||t.ymax!==e.max;return Object.assign(t,o),s}var bs=n=>n===0||n===1,Wd=(n,i,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-i)*pe/e)),Ud=(n,i,e)=>Math.pow(2,-10*n)*Math.sin((n-i)*pe/e)+1,On={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*we)+1,easeOutSine:n=>Math.sin(n*we),easeInOutSine:n=>-.5*(Math.cos(ue*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>bs(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bs(n)?n:Wd(n,.075,.3),easeOutElastic:n=>bs(n)?n:Ud(n,.075,.3),easeInOutElastic(n){return bs(n)?n:n<.5?.5*Wd(n*2,.1125,.45):.5+.5*Ud(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let i=1.70158;return(n/=.5)<1?.5*(n*n*(((i*=1.525)+1)*n-i)):.5*((n-=2)*n*(((i*=1.525)+1)*n+i)+2)},easeInBounce:n=>1-On.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?On.easeInBounce(n*2)*.5:On.easeOutBounce(n*2-1)*.5+.5};function cr(n){if(n&&typeof n=="object"){let i=n.toString();return i==="[object CanvasPattern]"||i==="[object CanvasGradient]"}return!1}function lr(n){return cr(n)?n:new uo(n)}function Ga(n){return cr(n)?n:new uo(n).saturate(.5).darken(.1).hexString()}var Bg=["x","y","borderWidth","radius","tension"],jg=["color","borderColor","backgroundColor"];function Vg(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"}),n.set("animations",{colors:{type:"color",properties:jg},numbers:{type:"number",properties:Bg}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}})}function Hg(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var $d=new Map;function qg(n,i){i=i||{};let e=n+JSON.stringify(i),t=$d.get(e);return t||(t=new Intl.NumberFormat(n,i),$d.set(e,t)),t}function jn(n,i,e){return qg(i,e).format(n)}var hh={values(n){return me(n)?n:""+n},numeric(n,i,e){if(n===0)return"0";let t=this.chart.options.locale,o,s=n;if(e.length>1){let l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(o="scientific"),s=Wg(n,e)}let a=ci(Math.abs(s)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:o,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(c,this.options.ticks.format),jn(n,t,c)},logarithmic(n,i,e){if(n===0)return"0";let t=e[i].significand||n/Math.pow(10,Math.floor(ci(n)));return[1,2,3,5,10,15].includes(t)||i>.8*e.length?hh.numeric.call(this,n,i,e):""}};function Wg(n,i){let e=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var bo={formatters:hh};function Ug(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,e)=>e.lineWidth,tickColor:(i,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"&&i!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"})}var Ii=Object.create(null),Is=Object.create(null);function fo(n,i){if(!i)return n;let e=i.split(".");for(let t=0,o=e.length;t<o;++t){let s=e[t];n=n[s]||(n[s]=Object.create(null))}return n}function Qa(n,i,e){return typeof i=="string"?An(fo(n,i),e):An(fo(n,""),i)}var Ka=class{constructor(i,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,o)=>Ga(o.backgroundColor),this.hoverBorderColor=(t,o)=>Ga(o.borderColor),this.hoverColor=(t,o)=>Ga(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(i),this.apply(e)}set(i,e){return Qa(this,i,e)}get(i){return fo(this,i)}describe(i,e){return Qa(Is,i,e)}override(i,e){return Qa(Ii,i,e)}route(i,e,t,o){let s=fo(this,i),a=fo(this,t),r="_"+e;Object.defineProperties(s,{[r]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let c=this[r],l=a[o];return Y(c)?Object.assign({},l,c):$(c,l)},set(c){this[r]=c}}})}apply(i){i.forEach(e=>e(this))}},ye=new Ka({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Vg,Hg,Ug]);function $g(n){return!n||Z(n.size)||Z(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function go(n,i,e,t,o){let s=i[o];return s||(s=i[o]=n.measureText(o).width,e.push(o)),s>t&&(t=s),t}function mh(n,i,e,t){t=t||{};let o=t.data=t.data||{},s=t.garbageCollect=t.garbageCollect||[];t.font!==i&&(o=t.data={},s=t.garbageCollect=[],t.font=i),n.save(),n.font=i;let a=0,r=e.length,c,l,d,u,f;for(c=0;c<r;c++)if(u=e[c],u!=null&&!me(u))a=go(n,o,s,a,u);else if(me(u))for(l=0,d=u.length;l<d;l++)f=u[l],f!=null&&!me(f)&&(a=go(n,o,s,a,f));n.restore();let g=s.length/2;if(g>e.length){for(c=0;c<g;c++)delete o[s[c]];s.splice(0,g)}return a}function Di(n,i,e){let t=n.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((i-o)*t)/t+o}function dr(n,i){i=i||n.getContext("2d"),i.save(),i.resetTransform(),i.clearRect(0,0,n.width,n.height),i.restore()}function Ds(n,i,e,t){hr(n,i,e,t,null)}function hr(n,i,e,t,o){let s,a,r,c,l,d,u,f,g=i.pointStyle,_=i.rotation,v=i.radius,y=(_||0)*Ng;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,t),n.rotate(y),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),g){default:o?n.ellipse(e,t,o/2,v,0,0,pe):n.arc(e,t,v,0,pe),n.closePath();break;case"triangle":d=o?o/2:v,n.moveTo(e+Math.sin(y)*d,t-Math.cos(y)*v),y+=qd,n.lineTo(e+Math.sin(y)*d,t-Math.cos(y)*v),y+=qd,n.lineTo(e+Math.sin(y)*d,t-Math.cos(y)*v),n.closePath();break;case"rectRounded":l=v*.516,c=v-l,a=Math.cos(y+Gi)*c,u=Math.cos(y+Gi)*(o?o/2-l:c),r=Math.sin(y+Gi)*c,f=Math.sin(y+Gi)*(o?o/2-l:c),n.arc(e-u,t-r,l,y-ue,y-we),n.arc(e+f,t-a,l,y-we,y),n.arc(e+u,t+r,l,y,y+we),n.arc(e-f,t+a,l,y+we,y+ue),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*v,d=o?o/2:c,n.rect(e-d,t-c,2*d,2*c);break}y+=Gi;case"rectRot":u=Math.cos(y)*(o?o/2:v),a=Math.cos(y)*v,r=Math.sin(y)*v,f=Math.sin(y)*(o?o/2:v),n.moveTo(e-u,t-r),n.lineTo(e+f,t-a),n.lineTo(e+u,t+r),n.lineTo(e-f,t+a),n.closePath();break;case"crossRot":y+=Gi;case"cross":u=Math.cos(y)*(o?o/2:v),a=Math.cos(y)*v,r=Math.sin(y)*v,f=Math.sin(y)*(o?o/2:v),n.moveTo(e-u,t-r),n.lineTo(e+u,t+r),n.moveTo(e+f,t-a),n.lineTo(e-f,t+a);break;case"star":u=Math.cos(y)*(o?o/2:v),a=Math.cos(y)*v,r=Math.sin(y)*v,f=Math.sin(y)*(o?o/2:v),n.moveTo(e-u,t-r),n.lineTo(e+u,t+r),n.moveTo(e+f,t-a),n.lineTo(e-f,t+a),y+=Gi,u=Math.cos(y)*(o?o/2:v),a=Math.cos(y)*v,r=Math.sin(y)*v,f=Math.sin(y)*(o?o/2:v),n.moveTo(e-u,t-r),n.lineTo(e+u,t+r),n.moveTo(e+f,t-a),n.lineTo(e-f,t+a);break;case"line":a=o?o/2:Math.cos(y)*v,r=Math.sin(y)*v,n.moveTo(e-a,t-r),n.lineTo(e+a,t+r);break;case"dash":n.moveTo(e,t),n.lineTo(e+Math.cos(y)*(o?o/2:v),t+Math.sin(y)*v);break;case!1:n.closePath();break}n.fill(),i.borderWidth>0&&n.stroke()}}function $t(n,i,e){return e=e||.5,!i||n&&n.x>i.left-e&&n.x<i.right+e&&n.y>i.top-e&&n.y<i.bottom+e}function vo(n,i){n.save(),n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()}function yo(n){n.restore()}function uh(n,i,e,t,o){if(!i)return n.lineTo(e.x,e.y);if(o==="middle"){let s=(i.x+e.x)/2;n.lineTo(s,i.y),n.lineTo(s,e.y)}else o==="after"!=!!t?n.lineTo(i.x,e.y):n.lineTo(e.x,i.y);n.lineTo(e.x,e.y)}function ph(n,i,e,t){if(!i)return n.lineTo(e.x,e.y);n.bezierCurveTo(t?i.cp1x:i.cp2x,t?i.cp1y:i.cp2y,t?e.cp2x:e.cp1x,t?e.cp2y:e.cp1y,e.x,e.y)}function Gg(n,i){i.translation&&n.translate(i.translation[0],i.translation[1]),Z(i.rotation)||n.rotate(i.rotation),i.color&&(n.fillStyle=i.color),i.textAlign&&(n.textAlign=i.textAlign),i.textBaseline&&(n.textBaseline=i.textBaseline)}function Qg(n,i,e,t,o){if(o.strikethrough||o.underline){let s=n.measureText(t),a=i-s.actualBoundingBoxLeft,r=i+s.actualBoundingBoxRight,c=e-s.actualBoundingBoxAscent,l=e+s.actualBoundingBoxDescent,d=o.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=o.decorationWidth||2,n.moveTo(a,d),n.lineTo(r,d),n.stroke()}}function Kg(n,i){let e=n.fillStyle;n.fillStyle=i.color,n.fillRect(i.left,i.top,i.width,i.height),n.fillStyle=e}function Pi(n,i,e,t,o,s={}){let a=me(i)?i:[i],r=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=o.string,Gg(n,s),c=0;c<a.length;++c)l=a[c],s.backdrop&&Kg(n,s.backdrop),r&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Z(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,e,t,s.maxWidth)),n.fillText(l,e,t,s.maxWidth),Qg(n,e,t,l,s),t+=Number(o.lineHeight);n.restore()}function Vn(n,i){let{x:e,y:t,w:o,h:s,radius:a}=i;n.arc(e+a.topLeft,t+a.topLeft,a.topLeft,1.5*ue,ue,!0),n.lineTo(e,t+s-a.bottomLeft),n.arc(e+a.bottomLeft,t+s-a.bottomLeft,a.bottomLeft,ue,we,!0),n.lineTo(e+o-a.bottomRight,t+s),n.arc(e+o-a.bottomRight,t+s-a.bottomRight,a.bottomRight,we,0,!0),n.lineTo(e+o,t+a.topRight),n.arc(e+o-a.topRight,t+a.topRight,a.topRight,0,-we,!0),n.lineTo(e+a.topLeft,t)}var Yg=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xg=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zg(n,i){let e=(""+n).match(Yg);if(!e||e[1]==="normal")return i*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return i*n}var Jg=n=>+n||0;function Ps(n,i){let e={},t=Y(i),o=t?Object.keys(i):i,s=Y(n)?t?a=>$(n[a],n[i[a]]):a=>n[a]:()=>n;for(let a of o)e[a]=Jg(s(a));return e}function mr(n){return Ps(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ri(n){return Ps(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ve(n){let i=mr(n);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Ie(n,i){n=n||{},i=i||ye.font;let e=$(n.size,i.size);typeof e=="string"&&(e=parseInt(e,10));let t=$(n.style,i.style);t&&!(""+t).match(Xg)&&(console.warn('Invalid font style specified: "'+t+'"'),t=void 0);let o={family:$(n.family,i.family),lineHeight:Zg($(n.lineHeight,i.lineHeight),e),size:e,style:t,weight:$(n.weight,i.weight),string:""};return o.string=$g(o),o}function Hn(n,i,e,t){let o=!0,s,a,r;for(s=0,a=n.length;s<a;++s)if(r=n[s],r!==void 0&&(i!==void 0&&typeof r=="function"&&(r=r(i),o=!1),e!==void 0&&me(r)&&(r=r[e%r.length],o=!1),r!==void 0))return t&&!o&&(t.cacheable=!1),r}function fh(n,i,e){let{min:t,max:o}=n,s=Ya(i,(o-t)/2),a=(r,c)=>e&&r===0?0:r+c;return{min:a(t,-Math.abs(s)),max:a(o,s)}}function di(n,i){return Object.assign(Object.create(n),i)}function Rs(n,i=[""],e,t,o=()=>n[0]){let s=e||n;typeof t>"u"&&(t=bh("_fallback",n));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:t,_getTarget:o,override:r=>Rs([r,...n],i,s,t)};return new Proxy(a,{deleteProperty(r,c){return delete r[c],delete r._keys,delete n[0][c],!0},get(r,c){return gh(r,c,()=>r0(c,i,n,r))},getOwnPropertyDescriptor(r,c){return Reflect.getOwnPropertyDescriptor(r._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(r,c){return Qd(r).includes(c)},ownKeys(r){return Qd(r)},set(r,c,l){let d=r._storage||(r._storage=o());return r[c]=d[c]=l,delete r._keys,!0}})}function Ki(n,i,e,t){let o={_cacheable:!1,_proxy:n,_context:i,_subProxy:e,_stack:new Set,_descriptors:ur(n,t),setContext:s=>Ki(n,s,e,t),override:s=>Ki(n.override(s),i,e,t)};return new Proxy(o,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,r){return gh(s,a,()=>t0(s,a,r))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,r){return n[a]=r,delete s[a],!0}})}function ur(n,i={scriptable:!0,indexable:!0}){let{_scriptable:e=i.scriptable,_indexable:t=i.indexable,_allKeys:o=i.allKeys}=n;return{allKeys:o,scriptable:e,indexable:t,isScriptable:ri(e)?e:()=>e,isIndexable:ri(t)?t:()=>t}}var e0=(n,i)=>n?n+Ss(i):i,pr=(n,i)=>Y(i)&&n!=="adapters"&&(Object.getPrototypeOf(i)===null||i.constructor===Object);function gh(n,i,e){if(Object.prototype.hasOwnProperty.call(n,i))return n[i];let t=e();return n[i]=t,t}function t0(n,i,e){let{_proxy:t,_context:o,_subProxy:s,_descriptors:a}=n,r=t[i];return ri(r)&&a.isScriptable(i)&&(r=i0(i,r,n,e)),me(r)&&r.length&&(r=n0(i,r,n,a.isIndexable)),pr(i,r)&&(r=Ki(r,o,s&&s[i],a)),r}function i0(n,i,e,t){let{_proxy:o,_context:s,_subProxy:a,_stack:r}=e;if(r.has(n))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+n);r.add(n);let c=i(s,a||t);return r.delete(n),pr(n,c)&&(c=fr(o._scopes,o,n,c)),c}function n0(n,i,e,t){let{_proxy:o,_context:s,_subProxy:a,_descriptors:r}=e;if(typeof s.index<"u"&&t(n))return i[s.index%i.length];if(Y(i[0])){let c=i,l=o._scopes.filter(d=>d!==c);i=[];for(let d of c){let u=fr(l,o,n,d);i.push(Ki(u,s,a&&a[n],r))}}return i}function _h(n,i,e){return ri(n)?n(i,e):n}var o0=(n,i)=>n===!0?i:typeof n=="string"?li(i,n):void 0;function s0(n,i,e,t,o){for(let s of i){let a=o0(e,s);if(a){n.add(a);let r=_h(a._fallback,e,o);if(typeof r<"u"&&r!==e&&r!==t)return r}else if(a===!1&&typeof t<"u"&&e!==t)return null}return!1}function fr(n,i,e,t){let o=i._rootScopes,s=_h(i._fallback,e,t),a=[...n,...o],r=new Set;r.add(t);let c=Gd(r,a,e,s||e,t);return c===null||typeof s<"u"&&s!==e&&(c=Gd(r,a,s,c,t),c===null)?!1:Rs(Array.from(r),[""],o,s,()=>a0(i,e,t))}function Gd(n,i,e,t,o){for(;e;)e=s0(n,i,e,t,o);return e}function a0(n,i,e){let t=n._getTarget();i in t||(t[i]={});let o=t[i];return me(o)&&Y(e)?e:o||{}}function r0(n,i,e,t){let o;for(let s of i)if(o=bh(e0(s,n),e),typeof o<"u")return pr(n,o)?fr(e,t,n,o):o}function bh(n,i){for(let e of i){if(!e)continue;let t=e[n];if(typeof t<"u")return t}}function Qd(n){let i=n._keys;return i||(i=n._keys=c0(n._scopes)),i}function c0(n){let i=new Set;for(let e of n)for(let t of Object.keys(e).filter(o=>!o.startsWith("_")))i.add(t);return Array.from(i)}function gr(n,i,e,t){let{iScale:o}=n,{key:s="r"}=this._parsing,a=new Array(t),r,c,l,d;for(r=0,c=t;r<c;++r)l=r+e,d=i[l],a[r]={r:o.parse(li(d,s),l)};return a}var l0=Number.EPSILON||1e-14,Fn=(n,i)=>i<n.length&&!n[i].skip&&n[i],vh=n=>n==="x"?"y":"x";function d0(n,i,e,t){let o=n.skip?i:n,s=i,a=e.skip?i:e,r=ws(s,o),c=ws(a,s),l=r/(r+c),d=c/(r+c);l=isNaN(l)?0:l,d=isNaN(d)?0:d;let u=t*l,f=t*d;return{previous:{x:s.x-u*(a.x-o.x),y:s.y-u*(a.y-o.y)},next:{x:s.x+f*(a.x-o.x),y:s.y+f*(a.y-o.y)}}}function h0(n,i,e){let t=n.length,o,s,a,r,c,l=Fn(n,0);for(let d=0;d<t-1;++d)if(c=l,l=Fn(n,d+1),!(!c||!l)){if(zn(i[d],0,l0)){e[d]=e[d+1]=0;continue}o=e[d]/i[d],s=e[d+1]/i[d],r=Math.pow(o,2)+Math.pow(s,2),!(r<=9)&&(a=3/Math.sqrt(r),e[d]=o*a*i[d],e[d+1]=s*a*i[d])}}function m0(n,i,e="x"){let t=vh(e),o=n.length,s,a,r,c=Fn(n,0);for(let l=0;l<o;++l){if(a=r,r=c,c=Fn(n,l+1),!r)continue;let d=r[e],u=r[t];a&&(s=(d-a[e])/3,r[`cp1${e}`]=d-s,r[`cp1${t}`]=u-s*i[l]),c&&(s=(c[e]-d)/3,r[`cp2${e}`]=d+s,r[`cp2${t}`]=u+s*i[l])}}function u0(n,i="x"){let e=vh(i),t=n.length,o=Array(t).fill(0),s=Array(t),a,r,c,l=Fn(n,0);for(a=0;a<t;++a)if(r=c,c=l,l=Fn(n,a+1),!!c){if(l){let d=l[i]-c[i];o[a]=d!==0?(l[e]-c[e])/d:0}s[a]=r?l?kt(o[a-1])!==kt(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}h0(n,o,s),m0(n,s,i)}function vs(n,i,e){return Math.max(Math.min(n,e),i)}function p0(n,i){let e,t,o,s,a,r=$t(n[0],i);for(e=0,t=n.length;e<t;++e)a=s,s=r,r=e<t-1&&$t(n[e+1],i),s&&(o=n[e],a&&(o.cp1x=vs(o.cp1x,i.left,i.right),o.cp1y=vs(o.cp1y,i.top,i.bottom)),r&&(o.cp2x=vs(o.cp2x,i.left,i.right),o.cp2y=vs(o.cp2y,i.top,i.bottom)))}function yh(n,i,e,t,o){let s,a,r,c;if(i.spanGaps&&(n=n.filter(l=>!l.skip)),i.cubicInterpolationMode==="monotone")u0(n,o);else{let l=t?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)r=n[s],c=d0(l,r,n[Math.min(s+1,a-(t?0:1))%a],i.tension),r.cp1x=c.previous.x,r.cp1y=c.previous.y,r.cp2x=c.next.x,r.cp2y=c.next.y,l=r}i.capBezierPoints&&p0(n,e)}function Os(){return typeof window<"u"&&typeof document<"u"}function As(n){let i=n.parentNode;return i&&i.toString()==="[object ShadowRoot]"&&(i=i.host),i}function Ms(n,i,e){let t;return typeof n=="string"?(t=parseInt(n,10),n.indexOf("%")!==-1&&(t=t/100*i.parentNode[e])):t=n,t}var Fs=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function f0(n,i){return Fs(n).getPropertyValue(i)}var g0=["top","right","bottom","left"];function Qi(n,i,e){let t={};e=e?"-"+e:"";for(let o=0;o<4;o++){let s=g0[o];t[s]=parseFloat(n[i+"-"+s+e])||0}return t.width=t.left+t.right,t.height=t.top+t.bottom,t}var _0=(n,i,e)=>(n>0||i>0)&&(!e||!e.shadowRoot);function b0(n,i){let e=n.touches,t=e&&e.length?e[0]:n,{offsetX:o,offsetY:s}=t,a=!1,r,c;if(_0(o,s,n.target))r=o,c=s;else{let l=i.getBoundingClientRect();r=t.clientX-l.left,c=t.clientY-l.top,a=!0}return{x:r,y:c,box:a}}function Oi(n,i){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:t}=i,o=Fs(e),s=o.boxSizing==="border-box",a=Qi(o,"padding"),r=Qi(o,"border","width"),{x:c,y:l,box:d}=b0(n,e),u=a.left+(d&&r.left),f=a.top+(d&&r.top),{width:g,height:_}=i;return s&&(g-=a.width+r.width,_-=a.height+r.height),{x:Math.round((c-u)/g*e.width/t),y:Math.round((l-f)/_*e.height/t)}}function v0(n,i,e){let t,o;if(i===void 0||e===void 0){let s=As(n);if(!s)i=n.clientWidth,e=n.clientHeight;else{let a=s.getBoundingClientRect(),r=Fs(s),c=Qi(r,"border","width"),l=Qi(r,"padding");i=a.width-l.width-c.width,e=a.height-l.height-c.height,t=Ms(r.maxWidth,s,"clientWidth"),o=Ms(r.maxHeight,s,"clientHeight")}}return{width:i,height:e,maxWidth:t||Cs,maxHeight:o||Cs}}var ys=n=>Math.round(n*10)/10;function xh(n,i,e,t){let o=Fs(n),s=Qi(o,"margin"),a=Ms(o.maxWidth,n,"clientWidth")||Cs,r=Ms(o.maxHeight,n,"clientHeight")||Cs,c=v0(n,i,e),{width:l,height:d}=c;if(o.boxSizing==="content-box"){let f=Qi(o,"border","width"),g=Qi(o,"padding");l-=g.width+f.width,d-=g.height+f.height}return l=Math.max(0,l-s.width),d=Math.max(0,t?l/t:d-s.height),l=ys(Math.min(l,a,c.maxWidth)),d=ys(Math.min(d,r,c.maxHeight)),l&&!d&&(d=ys(l/2)),(i!==void 0||e!==void 0)&&t&&c.height&&d>c.height&&(d=c.height,l=ys(Math.floor(d*t))),{width:l,height:d}}function _r(n,i,e){let t=i||1,o=Math.floor(n.height*t),s=Math.floor(n.width*t);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==t||a.height!==o||a.width!==s?(n.currentDevicePixelRatio=t,a.height=o,a.width=s,n.ctx.setTransform(t,0,0,t,0,0),!0):!1}var Ch=function(){let n=!1;try{let i={get passive(){return n=!0,!1}};Os()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch{}return n}();function br(n,i){let e=f0(n,i),t=e&&e.match(/^(\d+)(\.\d+)?px$/);return t?+t[1]:void 0}function Ti(n,i,e,t){return{x:n.x+e*(i.x-n.x),y:n.y+e*(i.y-n.y)}}function wh(n,i,e,t){return{x:n.x+e*(i.x-n.x),y:t==="middle"?e<.5?n.y:i.y:t==="after"?e<1?n.y:i.y:e>0?i.y:n.y}}function Mh(n,i,e,t){let o={x:n.cp2x,y:n.cp2y},s={x:i.cp1x,y:i.cp1y},a=Ti(n,o,e),r=Ti(o,s,e),c=Ti(s,i,e),l=Ti(a,r,e),d=Ti(r,c,e);return Ti(l,d,e)}var y0=function(n,i){return{x(e){return n+n+i-e},setWidth(e){i=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,t){return e-t},leftForLtr(e,t){return e-t}}},x0=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,i){return n+i},leftForLtr(n,i){return n}}};function Xi(n,i,e){return n?y0(i,e):x0()}function vr(n,i){let e,t;(i==="ltr"||i==="rtl")&&(e=n.canvas.style,t=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",i,"important"),n.prevTextDirection=t)}function yr(n,i){i!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",i[0],i[1]))}function Sh(n){return n==="angle"?{between:Bn,compare:zg,normalize:Je}:{between:Qt,compare:(i,e)=>i-e,normalize:i=>i}}function Kd({start:n,end:i,count:e,loop:t,style:o}){return{start:n%e,end:i%e,loop:t&&(i-n+1)%e===0,style:o}}function C0(n,i,e){let{property:t,start:o,end:s}=e,{between:a,normalize:r}=Sh(t),c=i.length,{start:l,end:d,loop:u}=n,f,g;if(u){for(l+=c,d+=c,f=0,g=c;f<g&&a(r(i[l%c][t]),o,s);++f)l--,d--;l%=c,d%=c}return d<l&&(d+=c),{start:l,end:d,loop:u,style:n.style}}function xr(n,i,e){if(!e)return[n];let{property:t,start:o,end:s}=e,a=i.length,{compare:r,between:c,normalize:l}=Sh(t),{start:d,end:u,loop:f,style:g}=C0(n,i,e),_=[],v=!1,y=null,w,C,E,T=()=>c(o,E,w)&&r(o,E)!==0,k=()=>r(s,w)===0||c(s,E,w),I=()=>v||T(),F=()=>!v||k();for(let D=d,N=d;D<=u;++D)C=i[D%a],!C.skip&&(w=l(C[t]),w!==E&&(v=c(w,o,s),y===null&&I()&&(y=r(w,o)===0?D:N),y!==null&&F()&&(_.push(Kd({start:y,end:D,loop:f,count:a,style:g})),y=null),N=D,E=w));return y!==null&&_.push(Kd({start:y,end:u,loop:f,count:a,style:g})),_}function Cr(n,i){let e=[],t=n.segments;for(let o=0;o<t.length;o++){let s=xr(t[o],n.points,i);s.length&&e.push(...s)}return e}function w0(n,i,e,t){let o=0,s=i-1;if(e&&!t)for(;o<i&&!n[o].skip;)o++;for(;o<i&&n[o].skip;)o++;for(o%=i,e&&(s+=o);s>o&&n[s%i].skip;)s--;return s%=i,{start:o,end:s}}function M0(n,i,e,t){let o=n.length,s=[],a=i,r=n[i],c;for(c=i+1;c<=e;++c){let l=n[c%o];l.skip||l.stop?r.skip||(t=!1,s.push({start:i%o,end:(c-1)%o,loop:t}),i=a=l.stop?c:null):(a=c,r.skip&&(i=c)),r=l}return a!==null&&s.push({start:i%o,end:a%o,loop:t}),s}function kh(n,i){let e=n.points,t=n.options.spanGaps,o=e.length;if(!o)return[];let s=!!n._loop,{start:a,end:r}=w0(e,o,s,t);if(t===!0)return Yd(n,[{start:a,end:r,loop:s}],e,i);let c=r<a?r+o:r,l=!!n._fullLoop&&a===0&&r===o-1;return Yd(n,M0(e,a,c,l),e,i)}function Yd(n,i,e,t){return!t||!t.setContext||!e?i:S0(n,i,e,t)}function S0(n,i,e,t){let o=n._chart.getContext(),s=Xd(n.options),{_datasetIndex:a,options:{spanGaps:r}}=n,c=e.length,l=[],d=s,u=i[0].start,f=u;function g(_,v,y,w){let C=r?-1:1;if(_!==v){for(_+=c;e[_%c].skip;)_-=C;for(;e[v%c].skip;)v+=C;_%c!==v%c&&(l.push({start:_%c,end:v%c,loop:y,style:w}),d=w,u=v%c)}}for(let _ of i){u=r?u:_.start;let v=e[u%c],y;for(f=u+1;f<=_.end;f++){let w=e[f%c];y=Xd(t.setContext(di(o,{type:"segment",p0:v,p1:w,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),k0(y,d)&&g(u,f-1,_.loop,d),v=w,d=y}u<f-1&&g(u,f-1,_.loop,d)}return l}function Xd(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function k0(n,i){if(!i)return!1;let e=[],t=function(o,s){return cr(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,t)!==JSON.stringify(i,t)}var Rr=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,e,t,o){let s=e.listeners[o],a=e.duration;s.forEach(r=>r({chart:i,initial:e.initial,numSteps:a,currentStep:Math.min(t-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=or.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let e=0;this._charts.forEach((t,o)=>{if(!t.running||!t.items.length)return;let s=t.items,a=s.length-1,r=!1,c;for(;a>=0;--a)c=s[a],c._active?(c._total>t.duration&&(t.duration=c._total),c.tick(i),r=!0):(s[a]=s[s.length-1],s.pop());r&&(o.draw(),this._notify(o,t,i,"progress")),s.length||(t.running=!1,this._notify(o,t,i,"complete"),t.initial=!1),e+=s.length}),this._lastDate=i,e===0&&(this._running=!1)}_getAnims(i){let e=this._charts,t=e.get(i);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(i,t)),t}listen(i,e,t){this._getAnims(i).listeners[e].push(t)}add(i,e){!e||!e.length||this._getAnims(i).items.push(...e)}has(i){return this._getAnims(i).items.length>0}start(i){let e=this._charts.get(i);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,o)=>Math.max(t,o._duration),0),this._refresh())}running(i){if(!this._running)return!1;let e=this._charts.get(i);return!(!e||!e.running||!e.items.length)}stop(i){let e=this._charts.get(i);if(!e||!e.items.length)return;let t=e.items,o=t.length-1;for(;o>=0;--o)t[o].cancel();e.items=[],this._notify(i,e,Date.now(),"complete")}remove(i){return this._charts.delete(i)}},hi=new Rr,Eh="transparent",E0={boolean(n,i,e){return e>.5?i:n},color(n,i,e){let t=lr(n||Eh),o=t.valid&&lr(i||Eh);return o&&o.valid?o.mix(t,e).hexString():i},number(n,i,e){return n+(i-n)*e}},Or=class{constructor(i,e,t,o){let s=e[t];o=Hn([i.to,o,s,i.from]);let a=Hn([i.from,s,o]);this._active=!0,this._fn=i.fn||E0[i.type||typeof a],this._easing=On[i.easing]||On.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=e,this._prop=t,this._from=a,this._to=o,this._promises=void 0}active(){return this._active}update(i,e,t){if(this._active){this._notify(!1);let o=this._target[this._prop],s=t-this._start,a=this._duration-s;this._start=t,this._duration=Math.floor(Math.max(a,i.duration)),this._total+=s,this._loop=!!i.loop,this._to=Hn([i.to,e,o,i.from]),this._from=Hn([i.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){let e=i-this._start,t=this._duration,o=this._prop,s=this._from,a=this._loop,r=this._to,c;if(this._active=s!==r&&(a||e<t),!this._active){this._target[o]=r,this._notify(!0);return}if(e<0){this._target[o]=s;return}c=e/t%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[o]=this._fn(s,r,c)}wait(){let i=this._promises||(this._promises=[]);return new Promise((e,t)=>{i.push({res:e,rej:t})})}_notify(i){let e=i?"res":"rej",t=this._promises||[];for(let o=0;o<t.length;o++)t[o][e]()}},Us=class{constructor(i,e){this._chart=i,this._properties=new Map,this.configure(e)}configure(i){if(!Y(i))return;let e=Object.keys(ye.animation),t=this._properties;Object.getOwnPropertyNames(i).forEach(o=>{let s=i[o];if(!Y(s))return;let a={};for(let r of e)a[r]=s[r];(me(s.properties)&&s.properties||[o]).forEach(r=>{(r===o||!t.has(r))&&t.set(r,a)})})}_animateOptions(i,e){let t=e.options,o=I0(i,t);if(!o)return[];let s=this._createAnimations(o,t);return t.$shared&&T0(i.options.$animations,t).then(()=>{i.options=t},()=>{}),s}_createAnimations(i,e){let t=this._properties,o=[],s=i.$animations||(i.$animations={}),a=Object.keys(e),r=Date.now(),c;for(c=a.length-1;c>=0;--c){let l=a[c];if(l.charAt(0)==="$")continue;if(l==="options"){o.push(...this._animateOptions(i,e));continue}let d=e[l],u=s[l],f=t.get(l);if(u)if(f&&u.active()){u.update(f,d,r);continue}else u.cancel();if(!f||!f.duration){i[l]=d;continue}s[l]=u=new Or(f,i,l,d),o.push(u)}return o}update(i,e){if(this._properties.size===0){Object.assign(i,e);return}let t=this._createAnimations(i,e);if(t.length)return hi.add(this._chart,t),!0}};function T0(n,i){let e=[],t=Object.keys(i);for(let o=0;o<t.length;o++){let s=n[t[o]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function I0(n,i){if(!i)return;let e=n.options;if(!e){n.options=i;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Th(n,i){let e=n&&n.options||{},t=e.reverse,o=e.min===void 0?i:0,s=e.max===void 0?i:0;return{start:t?s:o,end:t?o:s}}function D0(n,i,e){if(e===!1)return!1;let t=Th(n,e),o=Th(i,e);return{top:o.end,right:t.end,bottom:o.start,left:t.start}}function P0(n){let i,e,t,o;return Y(n)?(i=n.top,e=n.right,t=n.bottom,o=n.left):i=e=t=o=n,{top:i,right:e,bottom:t,left:o,disabled:n===!1}}function Tm(n,i){let e=[],t=n._getSortedDatasetMetas(i),o,s;for(o=0,s=t.length;o<s;++o)e.push(t[o].index);return e}function Ih(n,i,e,t={}){let o=n.keys,s=t.mode==="single",a,r,c,l;if(i!==null){for(a=0,r=o.length;a<r;++a){if(c=+o[a],c===e){if(t.all)continue;break}l=n.values[c],ve(l)&&(s||i===0||kt(i)===kt(l))&&(i+=l)}return i}}function R0(n){let i=Object.keys(n),e=new Array(i.length),t,o,s;for(t=0,o=i.length;t<o;++t)s=i[t],e[t]={x:s,y:n[s]};return e}function Dh(n,i){let e=n&&n.options.stacked;return e||e===void 0&&i.stack!==void 0}function O0(n,i,e){return`${n.id}.${i.id}.${e.stack||e.type}`}function A0(n){let{min:i,max:e,minDefined:t,maxDefined:o}=n.getUserBounds();return{min:t?i:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function F0(n,i,e){let t=n[i]||(n[i]={});return t[e]||(t[e]={})}function Ph(n,i,e,t){for(let o of i.getMatchingVisibleMetas(t).reverse()){let s=n[o.index];if(e&&s>0||!e&&s<0)return o.index}return null}function Rh(n,i){let{chart:e,_cachedMeta:t}=n,o=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:r}=t,c=s.axis,l=a.axis,d=O0(s,a,t),u=i.length,f;for(let g=0;g<u;++g){let _=i[g],{[c]:v,[l]:y}=_,w=_._stacks||(_._stacks={});f=w[l]=F0(o,d,v),f[r]=y,f._top=Ph(f,a,!0,t.type),f._bottom=Ph(f,a,!1,t.type);let C=f._visualValues||(f._visualValues={});C[r]=y}}function wr(n,i){let e=n.scales;return Object.keys(e).filter(t=>e[t].axis===i).shift()}function L0(n,i){return di(n,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}function N0(n,i,e){return di(n,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:e,index:i,mode:"default",type:"data"})}function xo(n,i){let e=n.controller.index,t=n.vScale&&n.vScale.axis;if(t){i=i||n._parsed;for(let o of i){let s=o._stacks;if(!s||s[t]===void 0||s[t][e]===void 0)return;delete s[t][e],s[t]._visualValues!==void 0&&s[t]._visualValues[e]!==void 0&&delete s[t]._visualValues[e]}}}var Mr=n=>n==="reset"||n==="none",Oh=(n,i)=>i?n:Object.assign({},n),z0=(n,i,e)=>n&&!i.hidden&&i._stacked&&{keys:Tm(e,!0),values:null},Fi=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Dh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xo(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,o=this.getDataset(),s=(f,g,_,v)=>f==="x"?g:f==="r"?v:_,a=t.xAxisID=$(o.xAxisID,wr(e,"x")),r=t.yAxisID=$(o.yAxisID,wr(e,"y")),c=t.rAxisID=$(o.rAxisID,wr(e,"r")),l=t.indexAxis,d=t.iAxisID=s(l,a,r,c),u=t.vAxisID=s(l,r,a,c);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&ir(this._data,this),e._stacked&&xo(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),o=this._data;if(Y(t))this._data=R0(t);else if(o!==t){if(o){ir(o,this);let s=this._cachedMeta;xo(s),s._parsed=[]}t&&Object.isExtensible(t)&&ch(t,this),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,o=this.getDataset(),s=!1;this._dataCheck();let a=t._stacked;t._stacked=Dh(t.vScale,t),t.stack!==o.stack&&(s=!0,xo(t),t.stack=o.stack),this._resyncElements(e),(s||a!==t._stacked)&&Rh(this,t._parsed)}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),o=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let{_cachedMeta:o,_data:s}=this,{iScale:a,_stacked:r}=o,c=a.axis,l=e===0&&t===s.length?!0:o._sorted,d=e>0&&o._parsed[e-1],u,f,g;if(this._parsing===!1)o._parsed=s,o._sorted=!0,g=s;else{me(s[e])?g=this.parseArrayData(o,s,e,t):Y(s[e])?g=this.parseObjectData(o,s,e,t):g=this.parsePrimitiveData(o,s,e,t);let _=()=>f[c]===null||d&&f[c]<d[c];for(u=0;u<t;++u)o._parsed[u+e]=f=g[u],l&&(_()&&(l=!1),d=f);o._sorted=l}r&&Rh(this,g)}parsePrimitiveData(e,t,o,s){let{iScale:a,vScale:r}=e,c=a.axis,l=r.axis,d=a.getLabels(),u=a===r,f=new Array(s),g,_,v;for(g=0,_=s;g<_;++g)v=g+o,f[g]={[c]:u||a.parse(d[v],v),[l]:r.parse(t[v],v)};return f}parseArrayData(e,t,o,s){let{xScale:a,yScale:r}=e,c=new Array(s),l,d,u,f;for(l=0,d=s;l<d;++l)u=l+o,f=t[u],c[l]={x:a.parse(f[0],u),y:r.parse(f[1],u)};return c}parseObjectData(e,t,o,s){let{xScale:a,yScale:r}=e,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(s),u,f,g,_;for(u=0,f=s;u<f;++u)g=u+o,_=t[g],d[u]={x:a.parse(li(_,c),g),y:r.parse(li(_,l),g)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,o){let s=this.chart,a=this._cachedMeta,r=t[e.axis],c={keys:Tm(s,!0),values:t._stacks[e.axis]._visualValues};return Ih(c,r,a.index,{mode:o})}updateRangeFromParsed(e,t,o,s){let a=o[t.axis],r=a===null?NaN:a,c=s&&o._stacks[t.axis];s&&c&&(s.values=c,r=Ih(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){let o=this._cachedMeta,s=o._parsed,a=o._sorted&&e===o.iScale,r=s.length,c=this._getOtherScale(e),l=z0(t,o,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=A0(c),g,_;function v(){_=s[g];let y=_[c.axis];return!ve(_[e.axis])||u>y||f<y}for(g=0;g<r&&!(!v()&&(this.updateRangeFromParsed(d,e,_,l),a));++g);if(a){for(g=r-1;g>=0;--g)if(!v()){this.updateRangeFromParsed(d,e,_,l);break}}return d}getAllParsedValues(e){let t=this._cachedMeta._parsed,o=[],s,a,r;for(s=0,a=t.length;s<a;++s)r=t[s][e.axis],ve(r)&&o.push(r);return o}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,o=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:o?""+o.getLabelForValue(a[o.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){let t=this._cachedMeta;this.update(e||"default"),t._clip=P0($(this.options.clip,D0(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,t=this.chart,o=this._cachedMeta,s=o.data||[],a=t.chartArea,r=[],c=this._drawStart||0,l=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop,u;for(o.dataset&&o.dataset.draw(e,a,c,l),u=c;u<c+l;++u){let f=s[u];f.hidden||(f.active&&d?r.push(f):f.draw(e,a))}for(u=0;u<r.length;++u)r[u].draw(e,a)}getStyle(e,t){let o=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(e||0,o)}getContext(e,t,o){let s=this.getDataset(),a;if(e>=0&&e<this._cachedMeta.data.length){let r=this._cachedMeta.data[e];a=r.$context||(r.$context=N0(this.getContext(),e,r)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=L0(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=o,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",o){let s=t==="active",a=this._cachedDataOpts,r=e+"-"+t,c=a[r],l=this.enableOptionSharing&&Nn(o);if(c)return Oh(c,l);let d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],g=d.getOptionScopes(this.getDataset(),u),_=Object.keys(ye.elements[e]),v=()=>this.getContext(o,s,t),y=d.resolveNamedOptions(g,_,v,f);return y.$shared&&(y.$shared=l,a[r]=Object.freeze(Oh(y,l))),y}_resolveAnimations(e,t,o){let s=this.chart,a=this._cachedDataOpts,r=`animation-${t}`,c=a[r];if(c)return c;let l;if(s.options.animation!==!1){let u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,t),g=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(g,this.getContext(e,o,t))}let d=new Us(s,l&&l.animations);return l&&l._cacheable&&(a[r]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Mr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let o=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(o),r=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,o),{sharedOptions:a,includeOptions:r}}updateElement(e,t,o,s){Mr(s)?Object.assign(e,o):this._resolveAnimations(t,s).update(e,o)}updateSharedOptions(e,t,o){e&&!Mr(t)&&this._resolveAnimations(void 0,t).update(e,o)}_setStyle(e,t,o,s){e.active=s;let a=this.getStyle(t,s);this._resolveAnimations(t,o,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,o){this._setStyle(e,o,"active",!1)}setHoverStyle(e,t,o){this._setStyle(e,o,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,o=this._cachedMeta.data;for(let[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];let s=o.length,a=t.length,r=Math.min(a,s);r&&this.parse(0,r),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,o=!0){let s=this._cachedMeta,a=s.data,r=e+t,c,l=d=>{for(d.length+=t,c=d.length-1;c>=r;c--)d[c]=d[c-t]};for(l(a),c=e;c<r;++c)a[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),o&&this.updateElements(a,e,t,"reset")}updateElements(e,t,o,s){}_removeElements(e,t){let o=this._cachedMeta;if(this._parsing){let s=o._parsed.splice(e,t);o._stacked&&xo(o,s)}o.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,o,s]=e;this[t](o,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let o=arguments.length-2;o&&this._sync(["_insertElements",e,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function B0(n,i){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(i),t=[];for(let o=0,s=e.length;o<s;o++)t=t.concat(e[o].controller.getAllParsedValues(n));n._cache.$bar=nr(t.sort((o,s)=>o-s))}return n._cache.$bar}function j0(n){let i=n.iScale,e=B0(i,n.type),t=i._length,o,s,a,r,c=()=>{a===32767||a===-32768||(Nn(r)&&(t=Math.min(t,Math.abs(a-r)||t)),r=a)};for(o=0,s=e.length;o<s;++o)a=i.getPixelForValue(e[o]),c();for(r=void 0,o=0,s=i.ticks.length;o<s;++o)a=i.getPixelForTick(o),c();return t}function V0(n,i,e,t){let o=e.barThickness,s,a;return Z(o)?(s=i.min*e.categoryPercentage,a=e.barPercentage):(s=o*t,a=1),{chunk:s/t,ratio:a,start:i.pixels[n]-s/2}}function H0(n,i,e,t){let o=i.pixels,s=o[n],a=n>0?o[n-1]:null,r=n<o.length-1?o[n+1]:null,c=e.categoryPercentage;a===null&&(a=s-(r===null?i.end-i.start:r-s)),r===null&&(r=s+s-a);let l=s-(s-Math.min(a,r))/2*c;return{chunk:Math.abs(r-a)/2*c/t,ratio:e.barPercentage,start:l}}function q0(n,i,e,t){let o=e.parse(n[0],t),s=e.parse(n[1],t),a=Math.min(o,s),r=Math.max(o,s),c=a,l=r;Math.abs(a)>Math.abs(r)&&(c=r,l=a),i[e.axis]=l,i._custom={barStart:c,barEnd:l,start:o,end:s,min:a,max:r}}function Im(n,i,e,t){return me(n)?q0(n,i,e,t):i[e.axis]=e.parse(n,t),i}function Ah(n,i,e,t){let o=n.iScale,s=n.vScale,a=o.getLabels(),r=o===s,c=[],l,d,u,f;for(l=e,d=e+t;l<d;++l)f=i[l],u={},u[o.axis]=r||o.parse(a[l],l),c.push(Im(f,u,s,l));return c}function Sr(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function W0(n,i,e){return n!==0?kt(n):(i.isHorizontal()?1:-1)*(i.min>=e?1:-1)}function U0(n){let i,e,t,o,s;return n.horizontal?(i=n.base>n.x,e="left",t="right"):(i=n.base<n.y,e="bottom",t="top"),i?(o="end",s="start"):(o="start",s="end"),{start:e,end:t,reverse:i,top:o,bottom:s}}function $0(n,i,e,t){let o=i.borderSkipped,s={};if(!o){n.borderSkipped=s;return}if(o===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:a,end:r,reverse:c,top:l,bottom:d}=U0(n);o==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===t?o=l:(e._bottom||0)===t?o=d:(s[Fh(d,a,r,c)]=!0,o=l)),s[Fh(o,a,r,c)]=!0,n.borderSkipped=s}function Fh(n,i,e,t){return t?(n=G0(n,i,e),n=Lh(n,e,i)):n=Lh(n,i,e),n}function G0(n,i,e){return n===i?e:n===e?i:n}function Lh(n,i,e){return n==="start"?i:n==="end"?e:n}function Q0(n,{inflateAmount:i},e){n.inflateAmount=i==="auto"?e===1?.33:0:i}var K0=(()=>{class n extends Fi{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,o,s){return Ah(e,t,o,s)}parseArrayData(e,t,o,s){return Ah(e,t,o,s)}parseObjectData(e,t,o,s){let{iScale:a,vScale:r}=e,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=a.axis==="x"?c:l,u=r.axis==="x"?c:l,f=[],g,_,v,y;for(g=o,_=o+s;g<_;++g)y=t[g],v={},v[a.axis]=a.parse(li(y,d),g),f.push(Im(li(y,u),v,r,g));return f}updateRangeFromParsed(e,t,o,s){super.updateRangeFromParsed(e,t,o,s);let a=o._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let t=this._cachedMeta,{iScale:o,vScale:s}=t,a=this.getParsed(e),r=a._custom,c=Sr(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+o.getLabelForValue(a[o.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,o,s){let a=s==="reset",{index:r,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),d=c.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,s);for(let _=t;_<t+o;_++){let v=this.getParsed(_),y=a||Z(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(_),w=this._calculateBarIndexPixels(_,u),C=(v._stacks||{})[c.axis],E={horizontal:d,base:y.base,enableBorderRadius:!C||Sr(v._custom)||r===C._top||r===C._bottom,x:d?y.head:w.center,y:d?w.center:y.head,height:d?w.size:Math.abs(y.size),width:d?Math.abs(y.size):w.size};g&&(E.options=f||this.resolveDataElementOptions(_,e[_].active?"active":s));let T=E.options||e[_].options;$0(E,T,C,r),Q0(E,T,u.ratio),this.updateElement(e[_],_,E,s)}}_getStacks(e,t){let{iScale:o}=this._cachedMeta,s=o.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),a=o.options.stacked,r=[],c=l=>{let d=l.controller.getParsed(t),u=d&&d[l.vScale.axis];if(Z(u)||isNaN(u))return!0};for(let l of s)if(!(t!==void 0&&c(l))&&((a===!1||r.indexOf(l.stack)===-1||a===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,o){let s=this._getStacks(e,o),a=t!==void 0?s.indexOf(t):-1;return a===-1?s.length-1:a}_getRuler(){let e=this.options,t=this._cachedMeta,o=t.iScale,s=[],a,r;for(a=0,r=t.data.length;a<r;++a)s.push(o.getPixelForValue(this.getParsed(a)[o.axis],a));let c=e.barThickness;return{min:c||j0(t),pixels:s,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:t,_stacked:o,index:s},options:{base:a,minBarLength:r}}=this,c=a||0,l=this.getParsed(e),d=l._custom,u=Sr(d),f=l[t.axis],g=0,_=o?this.applyStack(t,l,o):f,v,y;_!==f&&(g=_-f,_=f),u&&(f=d.barStart,_=d.barEnd-d.barStart,f!==0&&kt(f)!==kt(d.barEnd)&&(g=0),g+=f);let w=!Z(a)&&!u?a:g,C=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?v=t.getPixelForValue(g+_):v=C,y=v-C,Math.abs(y)<r){y=W0(y,t,c)*r,f===c&&(C-=y/2);let E=t.getPixelForDecimal(0),T=t.getPixelForDecimal(1),k=Math.min(E,T),I=Math.max(E,T);C=Math.max(Math.min(C,I),k),v=C+y,o&&!u&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(v)-t.getValueForPixel(C))}if(C===t.getPixelForValue(c)){let E=kt(y)*t.getLineWidthForValue(c)/2;C+=E,y-=E}return{size:y,base:C,head:v,center:v+y/2}}_calculateBarIndexPixels(e,t){let o=t.scale,s=this.options,a=s.skipNull,r=$(s.maxBarThickness,1/0),c,l;if(t.grouped){let d=a?this._getStackCount(e):t.stackCount,u=s.barThickness==="flex"?H0(e,t,s,d):V0(e,t,s,d),f=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);c=u.start+u.chunk*f+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else c=o.getPixelForValue(this.getParsed(e)[o.axis],e),l=Math.min(r,t.min*t.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let e=this._cachedMeta,t=e.vScale,o=e.data,s=o.length,a=0;for(;a<s;++a)this.getParsed(a)[t.axis]!==null&&o[a].draw(this._ctx)}}return n})(),Y0=(()=>{class n extends Fi{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,o,s){let a=super.parsePrimitiveData(e,t,o,s);for(let r=0;r<a.length;r++)a[r]._custom=this.resolveDataElementOptions(r+o).radius;return a}parseArrayData(e,t,o,s){let a=super.parseArrayData(e,t,o,s);for(let r=0;r<a.length;r++){let c=t[o+r];a[r]._custom=$(c[2],this.resolveDataElementOptions(r+o).radius)}return a}parseObjectData(e,t,o,s){let a=super.parseObjectData(e,t,o,s);for(let r=0;r<a.length;r++){let c=t[o+r];a[r]._custom=$(c&&c.r&&+c.r,this.resolveDataElementOptions(r+o).radius)}return a}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let o=e.length-1;o>=0;--o)t=Math.max(t,e[o].size(this.resolveDataElementOptions(o))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,o=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),c=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y),d=r._custom;return{label:o[e]||"",value:"("+c+", "+l+(d?", "+d:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,o,s){let a=s==="reset",{iScale:r,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(t,s),u=r.axis,f=c.axis;for(let g=t;g<t+o;g++){let _=e[g],v=!a&&this.getParsed(g),y={},w=y[u]=a?r.getPixelForDecimal(.5):r.getPixelForValue(v[u]),C=y[f]=a?c.getBasePixel():c.getPixelForValue(v[f]);y.skip=isNaN(w)||isNaN(C),d&&(y.options=l||this.resolveDataElementOptions(g,_.active?"active":s),a&&(y.options.radius=0)),this.updateElement(_,g,y,s)}}resolveDataElementOptions(e,t){let o=this.getParsed(e),s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let a=s.radius;return t!=="active"&&(s.radius=0),s.radius+=$(o&&o._custom,a),s}}return n})();function X0(n,i,e){let t=1,o=1,s=0,a=0;if(i<pe){let r=n,c=r+i,l=Math.cos(r),d=Math.sin(r),u=Math.cos(c),f=Math.sin(c),g=(E,T,k)=>Bn(E,r,c,!0)?1:Math.max(T,T*e,k,k*e),_=(E,T,k)=>Bn(E,r,c,!0)?-1:Math.min(T,T*e,k,k*e),v=g(0,l,u),y=g(we,d,f),w=_(ue,l,u),C=_(ue+we,d,f);t=(v-w)/2,o=(y-C)/2,s=-(v+w)/2,a=-(y+C)/2}return{ratioX:t,ratioY:o,offsetX:s,offsetY:a}}var Jr=(()=>{class n extends Fi{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:o,color:s}}=e.legend.options;return t.labels.map((a,r)=>{let l=e.getDatasetMeta(0).controller.getStyle(r);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:o,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,o){o.chart.toggleDataVisibility(t.index),o.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){let o=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=o;else{let a=l=>+o[l];if(Y(o[e])){let{key:l="value"}=this._parsing;a=d=>+li(o[d],l)}let r,c;for(r=e,c=e+t;r<c;++r)s._parsed[r]=a(r)}}_getRotation(){return vt(this.options.rotation-90)}_getCircumference(){return vt(this.options.circumference)}_getRotationExtents(){let e=pe,t=-pe;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)&&this.chart.getDatasetMeta(o).type===this._type){let s=this.chart.getDatasetMeta(o).controller,a=s._getRotation(),r=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}update(e){let t=this.chart,{chartArea:o}=t,s=this._cachedMeta,a=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(o.width,o.height)-r)/2,0),l=Math.min(Jd(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:g,ratioY:_,offsetX:v,offsetY:y}=X0(f,u,l),w=(o.width-r)/g,C=(o.height-r)/_,E=Math.max(Math.min(w,C)/2,0),T=Ya(this.options.radius,E),k=Math.max(T*l,0),I=(T-k)/this._getVisibleDatasetWeightTotal();this.offsetX=v*T,this.offsetY=y*T,s.total=this.calculateTotal(),this.outerRadius=T-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){let o=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&o.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/pe)}updateElements(e,t,o,s){let a=s==="reset",r=this.chart,c=r.chartArea,d=r.options.animation,u=(c.left+c.right)/2,f=(c.top+c.bottom)/2,g=a&&d.animateScale,_=g?0:this.innerRadius,v=g?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(t,s),C=this._getRotation(),E;for(E=0;E<t;++E)C+=this._circumference(E,a);for(E=t;E<t+o;++E){let T=this._circumference(E,a),k=e[E],I={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+T,circumference:T,outerRadius:v,innerRadius:_};w&&(I.options=y||this.resolveDataElementOptions(E,k.active?"active":s)),C+=T,this.updateElement(k,E,I,s)}}calculateTotal(){let e=this._cachedMeta,t=e.data,o=0,s;for(s=0;s<t.length;s++){let a=e._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(o+=Math.abs(a))}return o}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?pe*(Math.abs(e)/t):0}getLabelAndValue(e){let t=this._cachedMeta,o=this.chart,s=o.data.labels||[],a=jn(t._parsed[e],o.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t=0,o=this.chart,s,a,r,c,l;if(!e){for(s=0,a=o.data.datasets.length;s<a;++s)if(o.isDatasetVisible(s)){r=o.getDatasetMeta(s),e=r.data,c=r.controller;break}}if(!e)return 0;for(s=0,a=e.length;s<a;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let o=0,s=e.length;o<s;++o){let a=this.resolveDataElementOptions(o);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let o=0;o<e;++o)this.chart.isDatasetVisible(o)&&(t+=this._getRingWeight(o));return t}_getRingWeight(e){return Math.max($(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),Z0=(()=>{class n extends Fi{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:o,data:s=[],_dataset:a}=t,r=this.chart._animationsDisabled,{start:c,count:l}=ar(t,s,r);this._drawStart=c,this._drawCount=l,rr(t)&&(c=0,l=s.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=s;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!r,options:d},e),this.updateElements(s,c,l,e)}updateElements(e,t,o,s){let a=s==="reset",{iScale:r,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(t,s),g=r.axis,_=c.axis,{spanGaps:v,segment:y}=this.options,w=Yi(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||a||s==="none",E=t+o,T=e.length,k=t>0&&this.getParsed(t-1);for(let I=0;I<T;++I){let F=e[I],D=C?F:{};if(I<t||I>=E){D.skip=!0;continue}let N=this.getParsed(I),q=Z(N[_]),W=D[g]=r.getPixelForValue(N[g],I),U=D[_]=a||q?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,N,l):N[_],I);D.skip=isNaN(W)||isNaN(U)||q,D.stop=I>0&&Math.abs(N[g]-k[g])>w,y&&(D.parsed=N,D.raw=d.data[I]),f&&(D.options=u||this.resolveDataElementOptions(I,F.active?"active":s)),C||this.updateElement(F,I,D,s),k=N}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,o=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return o;let a=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(o,a,r)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),Dm=(()=>{class n extends Fi{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:o,color:s}}=e.legend.options;return t.labels.map((a,r)=>{let l=e.getDatasetMeta(0).controller.getStyle(r);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:o,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,o){o.chart.toggleDataVisibility(t.index),o.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let t=this._cachedMeta,o=this.chart,s=o.data.labels||[],a=jn(t._parsed[e].r,o.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,t,o,s){return gr.bind(this)(e,t,o,s)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((o,s)=>{let a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,o=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(s/2,0),r=Math.max(o.cutoutPercentage?a/100*o.cutoutPercentage:1,0),c=(a-r)/e.getVisibleDatasetCount();this.outerRadius=a-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,t,o,s){let a=s==="reset",r=this.chart,l=r.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,f=d.yCenter,g=d.getIndexAngle(0)-.5*ue,_=g,v,y=360/this.countVisibleElements();for(v=0;v<t;++v)_+=this._computeAngle(v,s,y);for(v=t;v<t+o;v++){let w=e[v],C=_,E=_+this._computeAngle(v,s,y),T=r.getDataVisibility(v)?d.getDistanceFromCenterForValue(this.getParsed(v).r):0;_=E,a&&(l.animateScale&&(T=0),l.animateRotate&&(C=E=g));let k={x:u,y:f,innerRadius:0,outerRadius:T,startAngle:C,endAngle:E,options:this.resolveDataElementOptions(v,w.active?"active":s)};this.updateElement(w,v,k,s)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((o,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,o){return this.chart.getDataVisibility(e)?vt(this.resolveDataElementOptions(e,t).angle||o):0}}return n})(),J0=(()=>{class n extends Jr{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),e_=(()=>{class n extends Fi{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let t=this._cachedMeta.vScale,o=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(o[t.axis])}}parseObjectData(e,t,o,s){return gr.bind(this)(e,t,o,s)}update(e){let t=this._cachedMeta,o=t.dataset,s=t.data||[],a=t.iScale.getLabels();if(o.points=s,e!=="resize"){let r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);let c={_loop:!0,_fullLoop:a.length===s.length,options:r};this.updateElement(o,void 0,c,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,o,s){let a=this._cachedMeta.rScale,r=s==="reset";for(let c=t;c<t+o;c++){let l=e[c],d=this.resolveDataElementOptions(c,l.active?"active":s),u=a.getPointPositionForValue(c,this.getParsed(c).r),f=r?a.xCenter:u.x,g=r?a.yCenter:u.y,_={x:f,y:g,angle:u.angle,skip:isNaN(f)||isNaN(g),options:d};this.updateElement(l,c,_,s)}}}return n})(),t_=(()=>{class n extends Fi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let t=this._cachedMeta,o=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),c=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y);return{label:o[e]||"",value:"("+c+", "+l+")"}}update(e){let t=this._cachedMeta,{data:o=[]}=t,s=this.chart._animationsDisabled,{start:a,count:r}=ar(t,o,s);if(this._drawStart=a,this._drawCount=r,rr(t)&&(a=0,r=o.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=t;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=o;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(o,a,r,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,o,s){let a=s==="reset",{iScale:r,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(t,s),f=this.getSharedOptions(u),g=this.includeOptions(s,f),_=r.axis,v=c.axis,{spanGaps:y,segment:w}=this.options,C=Yi(y)?y:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||a||s==="none",T=t>0&&this.getParsed(t-1);for(let k=t;k<t+o;++k){let I=e[k],F=this.getParsed(k),D=E?I:{},N=Z(F[v]),q=D[_]=r.getPixelForValue(F[_],k),W=D[v]=a||N?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,F,l):F[v],k);D.skip=isNaN(q)||isNaN(W)||N,D.stop=k>0&&Math.abs(F[_]-T[_])>C,w&&(D.parsed=F,D.raw=d.data[k]),g&&(D.options=f||this.resolveDataElementOptions(k,I.active?"active":s)),E||this.updateElement(I,k,D,s),T=F}this.updateSharedOptions(f,s,u)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let c=0;for(let l=t.length-1;l>=0;--l)c=Math.max(c,t[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let o=e.dataset,s=o.options&&o.options.borderWidth||0;if(!t.length)return s;let a=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,a,r)/2}}return n})(),i_=Object.freeze({__proto__:null,BarController:K0,BubbleController:Y0,DoughnutController:Jr,LineController:Z0,PieController:J0,PolarAreaController:Dm,RadarController:e_,ScatterController:t_});function Zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ar=class n{static override(i){Object.assign(n.prototype,i)}options;constructor(i){this.options=i||{}}init(){}formats(){return Zi()}parse(){return Zi()}format(){return Zi()}add(){return Zi()}diff(){return Zi()}startOf(){return Zi()}endOf(){return Zi()}},n_={_date:Ar};function o_(n,i,e,t){let{controller:o,data:s,_sorted:a}=n,r=o._cachedMeta.iScale;if(r&&i===r.axis&&i!=="r"&&a&&s.length){let c=r._reversePixels?sh:Ut;if(t){if(o._sharedOptions){let l=s[0],d=typeof l.getRange=="function"&&l.getRange(i);if(d){let u=c(s,i,e-d),f=c(s,i,e+d);return{lo:u.lo,hi:f.hi}}}}else return c(s,i,e)}return{lo:0,hi:s.length-1}}function Po(n,i,e,t,o){let s=n.getSortedVisibleDatasetMetas(),a=e[i];for(let r=0,c=s.length;r<c;++r){let{index:l,data:d}=s[r],{lo:u,hi:f}=o_(s[r],i,a,o);for(let g=u;g<=f;++g){let _=d[g];_.skip||t(_,l,g)}}}function s_(n){let i=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(t,o){let s=i?Math.abs(t.x-o.x):0,a=e?Math.abs(t.y-o.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function kr(n,i,e,t,o){let s=[];return!o&&!n.isPointInArea(i)||Po(n,e,i,function(r,c,l){!o&&!$t(r,n.chartArea,0)||r.inRange(i.x,i.y,t)&&s.push({element:r,datasetIndex:c,index:l})},!0),s}function a_(n,i,e,t){let o=[];function s(a,r,c){let{startAngle:l,endAngle:d}=a.getProps(["startAngle","endAngle"],t),{angle:u}=tr(a,{x:i.x,y:i.y});Bn(u,l,d)&&o.push({element:a,datasetIndex:r,index:c})}return Po(n,e,i,s),o}function r_(n,i,e,t,o,s){let a=[],r=s_(e),c=Number.POSITIVE_INFINITY;function l(d,u,f){let g=d.inRange(i.x,i.y,o);if(t&&!g)return;let _=d.getCenterPoint(o);if(!(!!s||n.isPointInArea(_))&&!g)return;let y=r(i,_);y<c?(a=[{element:d,datasetIndex:u,index:f}],c=y):y===c&&a.push({element:d,datasetIndex:u,index:f})}return Po(n,e,i,l),a}function Er(n,i,e,t,o,s){return!s&&!n.isPointInArea(i)?[]:e==="r"&&!t?a_(n,i,e,o):r_(n,i,e,t,o,s)}function Nh(n,i,e,t,o){let s=[],a=e==="x"?"inXRange":"inYRange",r=!1;return Po(n,e,i,(c,l,d)=>{c[a](i[e],o)&&(s.push({element:c,datasetIndex:l,index:d}),r=r||c.inRange(i.x,i.y,o))}),t&&!r?[]:s}var c_={evaluateInteractionItems:Po,modes:{index(n,i,e,t){let o=Oi(i,n),s=e.axis||"x",a=e.includeInvisible||!1,r=e.intersect?kr(n,o,s,t,a):Er(n,o,s,!1,t,a),c=[];return r.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let d=r[0].index,u=l.data[d];u&&!u.skip&&c.push({element:u,datasetIndex:l.index,index:d})}),c):[]},dataset(n,i,e,t){let o=Oi(i,n),s=e.axis||"xy",a=e.includeInvisible||!1,r=e.intersect?kr(n,o,s,t,a):Er(n,o,s,!1,t,a);if(r.length>0){let c=r[0].datasetIndex,l=n.getDatasetMeta(c).data;r=[];for(let d=0;d<l.length;++d)r.push({element:l[d],datasetIndex:c,index:d})}return r},point(n,i,e,t){let o=Oi(i,n),s=e.axis||"xy",a=e.includeInvisible||!1;return kr(n,o,s,t,a)},nearest(n,i,e,t){let o=Oi(i,n),s=e.axis||"xy",a=e.includeInvisible||!1;return Er(n,o,s,e.intersect,t,a)},x(n,i,e,t){let o=Oi(i,n);return Nh(n,o,"x",e.intersect,t)},y(n,i,e,t){let o=Oi(i,n);return Nh(n,o,"y",e.intersect,t)}}},Pm=["left","top","right","bottom"];function Co(n,i){return n.filter(e=>e.pos===i)}function zh(n,i){return n.filter(e=>Pm.indexOf(e.pos)===-1&&e.box.axis===i)}function wo(n,i){return n.sort((e,t)=>{let o=i?t:e,s=i?e:t;return o.weight===s.weight?o.index-s.index:o.weight-s.weight})}function l_(n){let i=[],e,t,o,s,a,r;for(e=0,t=(n||[]).length;e<t;++e)o=n[e],{position:s,options:{stack:a,stackWeight:r=1}}=o,i.push({index:e,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&s+a,stackWeight:r});return i}function d_(n){let i={};for(let e of n){let{stack:t,pos:o,stackWeight:s}=e;if(!t||!Pm.includes(o))continue;let a=i[t]||(i[t]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return i}function h_(n,i){let e=d_(n),{vBoxMaxWidth:t,hBoxMaxHeight:o}=i,s,a,r;for(s=0,a=n.length;s<a;++s){r=n[s];let{fullSize:c}=r.box,l=e[r.stack],d=l&&r.stackWeight/l.weight;r.horizontal?(r.width=d?d*t:c&&i.availableWidth,r.height=o):(r.width=t,r.height=d?d*o:c&&i.availableHeight)}return e}function m_(n){let i=l_(n),e=wo(i.filter(l=>l.box.fullSize),!0),t=wo(Co(i,"left"),!0),o=wo(Co(i,"right")),s=wo(Co(i,"top"),!0),a=wo(Co(i,"bottom")),r=zh(i,"x"),c=zh(i,"y");return{fullSize:e,leftAndTop:t.concat(s),rightAndBottom:o.concat(c).concat(a).concat(r),chartArea:Co(i,"chartArea"),vertical:t.concat(o).concat(c),horizontal:s.concat(a).concat(r)}}function Bh(n,i,e,t){return Math.max(n[e],i[e])+Math.max(n[t],i[t])}function Rm(n,i){n.top=Math.max(n.top,i.top),n.left=Math.max(n.left,i.left),n.bottom=Math.max(n.bottom,i.bottom),n.right=Math.max(n.right,i.right)}function u_(n,i,e,t){let{pos:o,box:s}=e,a=n.maxPadding;if(!Y(o)){e.size&&(n[o]-=e.size);let u=t[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?s.height:s.width),e.size=u.size/u.count,n[o]+=e.size}s.getPadding&&Rm(a,s.getPadding());let r=Math.max(0,i.outerWidth-Bh(a,n,"left","right")),c=Math.max(0,i.outerHeight-Bh(a,n,"top","bottom")),l=r!==n.w,d=c!==n.h;return n.w=r,n.h=c,e.horizontal?{same:l,other:d}:{same:d,other:l}}function p_(n){let i=n.maxPadding;function e(t){let o=Math.max(i[t]-n[t],0);return n[t]+=o,o}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function f_(n,i){let e=i.maxPadding;function t(o){let s={left:0,top:0,right:0,bottom:0};return o.forEach(a=>{s[a]=Math.max(i[a],e[a])}),s}return t(n?["left","right"]:["top","bottom"])}function ko(n,i,e,t){let o=[],s,a,r,c,l,d;for(s=0,a=n.length,l=0;s<a;++s){r=n[s],c=r.box,c.update(r.width||i.w,r.height||i.h,f_(r.horizontal,i));let{same:u,other:f}=u_(i,e,r,t);l|=u&&o.length,d=d||f,c.fullSize||o.push(r)}return l&&ko(o,i,e,t)||d}function Ls(n,i,e,t,o){n.top=e,n.left=i,n.right=i+t,n.bottom=e+o,n.width=t,n.height=o}function jh(n,i,e,t){let o=e.padding,{x:s,y:a}=i;for(let r of n){let c=r.box,l=t[r.stack]||{count:1,placed:0,weight:1},d=r.stackWeight/l.weight||1;if(r.horizontal){let u=i.w*d,f=l.size||c.height;Nn(l.start)&&(a=l.start),c.fullSize?Ls(c,o.left,a,e.outerWidth-o.right-o.left,f):Ls(c,i.left+l.placed,a,u,f),l.start=a,l.placed+=u,a=c.bottom}else{let u=i.h*d,f=l.size||c.width;Nn(l.start)&&(s=l.start),c.fullSize?Ls(c,s,o.top,f,e.outerHeight-o.bottom-o.top):Ls(c,s,i.top+l.placed,f,u),l.start=s,l.placed+=u,s=c.right}}i.x=s,i.y=a}var Ge={addBox(n,i){n.boxes||(n.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(e){i.draw(e)}}]},n.boxes.push(i)},removeBox(n,i){let e=n.boxes?n.boxes.indexOf(i):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,i,e){i.fullSize=e.fullSize,i.position=e.position,i.weight=e.weight},update(n,i,e,t){if(!n)return;let o=Ve(n.options.layout.padding),s=Math.max(i-o.width,0),a=Math.max(e-o.height,0),r=m_(n.boxes),c=r.vertical,l=r.horizontal;oe(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let d=c.reduce((v,y)=>y.box.options&&y.box.options.display===!1?v:v+1,0)||1,u=Object.freeze({outerWidth:i,outerHeight:e,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},o);Rm(f,Ve(t));let g=Object.assign({maxPadding:f,w:s,h:a,x:o.left,y:o.top},o),_=h_(c.concat(l),u);ko(r.fullSize,g,u,_),ko(c,g,u,_),ko(l,g,u,_)&&ko(c,g,u,_),p_(g),jh(r.leftAndTop,g,u,_),g.x+=g.w,g.y+=g.h,jh(r.rightAndBottom,g,u,_),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},oe(r.chartArea,v=>{let y=v.box;Object.assign(y,n.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},$s=class{acquireContext(i,e){}releaseContext(i){return!1}addEventListener(i,e,t){}removeEventListener(i,e,t){}getDevicePixelRatio(){return 1}getMaximumSize(i,e,t,o){return e=Math.max(0,e||i.width),t=t||i.height,{width:e,height:Math.max(0,o?Math.floor(e/o):t)}}isAttached(i){return!0}updateConfig(i){}},Fr=class extends $s{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}},qs="$chartjs",g_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vh=n=>n===null||n==="";function __(n,i){let e=n.style,t=n.getAttribute("height"),o=n.getAttribute("width");if(n[qs]={initial:{height:t,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Vh(o)){let s=br(n,"width");s!==void 0&&(n.width=s)}if(Vh(t))if(n.style.height==="")n.height=n.width/(i||2);else{let s=br(n,"height");s!==void 0&&(n.height=s)}return n}var Om=Ch?{passive:!0}:!1;function b_(n,i,e){n.addEventListener(i,e,Om)}function v_(n,i,e){n.canvas.removeEventListener(i,e,Om)}function y_(n,i){let e=g_[n.type]||n.type,{x:t,y:o}=Oi(n,i);return{type:e,chart:i,native:n,x:t!==void 0?t:null,y:o!==void 0?o:null}}function Gs(n,i){for(let e of n)if(e===i||e.contains(i))return!0}function x_(n,i,e){let t=n.canvas,o=new MutationObserver(s=>{let a=!1;for(let r of s)a=a||Gs(r.addedNodes,t),a=a&&!Gs(r.removedNodes,t);a&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function C_(n,i,e){let t=n.canvas,o=new MutationObserver(s=>{let a=!1;for(let r of s)a=a||Gs(r.removedNodes,t),a=a&&!Gs(r.addedNodes,t);a&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}var To=new Map,Hh=0;function Am(){let n=window.devicePixelRatio;n!==Hh&&(Hh=n,To.forEach((i,e)=>{e.currentDevicePixelRatio!==n&&i()}))}function w_(n,i){To.size||window.addEventListener("resize",Am),To.set(n,i)}function M_(n){To.delete(n),To.size||window.removeEventListener("resize",Am)}function S_(n,i,e){let t=n.canvas,o=t&&As(t);if(!o)return;let s=sr((r,c)=>{let l=o.clientWidth;e(r,c),l<o.clientWidth&&e()},window),a=new ResizeObserver(r=>{let c=r[0],l=c.contentRect.width,d=c.contentRect.height;l===0&&d===0||s(l,d)});return a.observe(o),w_(n,s),a}function Tr(n,i,e){e&&e.disconnect(),i==="resize"&&M_(n)}function k_(n,i,e){let t=n.canvas,o=sr(s=>{n.ctx!==null&&e(y_(s,n))},n);return b_(t,i,o),o}var Lr=class extends $s{acquireContext(i,e){let t=i&&i.getContext&&i.getContext("2d");return t&&t.canvas===i?(__(i,e),t):null}releaseContext(i){let e=i.canvas;if(!e[qs])return!1;let t=e[qs].initial;["height","width"].forEach(s=>{let a=t[s];Z(a)?e.removeAttribute(s):e.setAttribute(s,a)});let o=t.style||{};return Object.keys(o).forEach(s=>{e.style[s]=o[s]}),e.width=e.width,delete e[qs],!0}addEventListener(i,e,t){this.removeEventListener(i,e);let o=i.$proxies||(i.$proxies={}),a={attach:x_,detach:C_,resize:S_}[e]||k_;o[e]=a(i,e,t)}removeEventListener(i,e){let t=i.$proxies||(i.$proxies={}),o=t[e];if(!o)return;({attach:Tr,detach:Tr,resize:Tr}[e]||v_)(i,e,o),t[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,e,t,o){return xh(i,e,t,o)}isAttached(i){let e=As(i);return!!(e&&e.isConnected)}};function E_(n){return!Os()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Fr:Lr}var Et=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(i){let{x:e,y:t}=this.getProps(["x","y"],i);return{x:e,y:t}}hasValue(){return Yi(this.x)&&Yi(this.y)}getProps(i,e){let t=this.$animations;if(!e||!t)return this;let o={};return i.forEach(s=>{o[s]=t[s]&&t[s].active()?t[s]._to:this[s]}),o}};function T_(n,i){let e=n.options.ticks,t=I_(n),o=Math.min(e.maxTicksLimit||t,t),s=e.major.enabled?P_(i):[],a=s.length,r=s[0],c=s[a-1],l=[];if(a>o)return R_(i,l,s,a/o),l;let d=D_(s,i,o);if(a>0){let u,f,g=a>1?Math.round((c-r)/(a-1)):null;for(Ns(i,l,d,Z(g)?0:r-g,r),u=0,f=a-1;u<f;u++)Ns(i,l,d,s[u],s[u+1]);return Ns(i,l,d,c,Z(g)?i.length:c+g),l}return Ns(i,l,d),l}function I_(n){let i=n.options.offset,e=n._tickSize(),t=n._length/e+(i?0:1),o=n._maxLength/e;return Math.floor(Math.min(t,o))}function D_(n,i,e){let t=O_(n),o=i.length/e;if(!t)return Math.max(o,1);let s=ih(t);for(let a=0,r=s.length-1;a<r;a++){let c=s[a];if(c>o)return c}return Math.max(o,1)}function P_(n){let i=[],e,t;for(e=0,t=n.length;e<t;e++)n[e].major&&i.push(e);return i}function R_(n,i,e,t){let o=0,s=e[0],a;for(t=Math.ceil(t),a=0;a<n.length;a++)a===s&&(i.push(n[a]),o++,s=e[o*t])}function Ns(n,i,e,t,o){let s=$(t,0),a=Math.min($(o,n.length),n.length),r=0,c,l,d;for(e=Math.ceil(e),o&&(c=o-t,e=c/Math.floor(c/e)),d=s;d<0;)r++,d=Math.round(s+r*e);for(l=Math.max(s,0);l<a;l++)l===d&&(i.push(n[l]),r++,d=Math.round(s+r*e))}function O_(n){let i=n.length,e,t;if(i<2)return!1;for(t=n[0],e=1;e<i;++e)if(n[e]-n[e-1]!==t)return!1;return t}var A_=n=>n==="left"?"right":n==="right"?"left":n,qh=(n,i,e)=>i==="top"||i==="left"?n[i]+e:n[i]-e,Wh=(n,i)=>Math.min(i||n,n);function Uh(n,i){let e=[],t=n.length/i,o=n.length,s=0;for(;s<o;s+=t)e.push(n[Math.floor(s)]);return e}function F_(n,i,e){let t=n.ticks.length,o=Math.min(i,t-1),s=n._startPixel,a=n._endPixel,r=1e-6,c=n.getPixelForTick(o),l;if(!(e&&(t===1?l=Math.max(c-s,a-c):i===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(o-1))/2,c+=o<i?l:-l,c<s-r||c>a+r)))return c}function L_(n,i){oe(n,e=>{let t=e.gc,o=t.length/2,s;if(o>i){for(s=0;s<o;++s)delete e.data[t[s]];t.splice(0,o)}})}function Mo(n){return n.drawTicks?n.tickLength:0}function $h(n,i){if(!n.display)return 0;let e=Ie(n.font,i),t=Ve(n.padding);return(me(n.text)?n.text.length:1)*e.lineHeight+t.height}function N_(n,i){return di(n,{scale:i,type:"scale"})}function z_(n,i,e){return di(n,{tick:e,index:i,type:"tick"})}function B_(n,i,e){let t=Ts(n);return(e&&i!=="right"||!e&&i==="right")&&(t=A_(t)),t}function j_(n,i,e,t){let{top:o,left:s,bottom:a,right:r,chart:c}=n,{chartArea:l,scales:d}=c,u=0,f,g,_,v=a-o,y=r-s;if(n.isHorizontal()){if(g=je(t,s,r),Y(e)){let w=Object.keys(e)[0],C=e[w];_=d[w].getPixelForValue(C)+v-i}else e==="center"?_=(l.bottom+l.top)/2+v-i:_=qh(n,e,i);f=r-s}else{if(Y(e)){let w=Object.keys(e)[0],C=e[w];g=d[w].getPixelForValue(C)-y+i}else e==="center"?g=(l.left+l.right)/2-y+i:g=qh(n,e,i);_=je(t,a,o),u=e==="left"?-we:we}return{titleX:g,titleY:_,maxWidth:f,rotation:u}}var en=class n extends Et{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,e){return i}getUserBounds(){let{_userMin:i,_userMax:e,_suggestedMin:t,_suggestedMax:o}=this;return i=et(i,Number.POSITIVE_INFINITY),e=et(e,Number.NEGATIVE_INFINITY),t=et(t,Number.POSITIVE_INFINITY),o=et(o,Number.NEGATIVE_INFINITY),{min:et(i,t),max:et(e,o),minDefined:ve(i),maxDefined:ve(e)}}getMinMax(i){let{min:e,max:t,minDefined:o,maxDefined:s}=this.getUserBounds(),a;if(o&&s)return{min:e,max:t};let r=this.getMatchingVisibleMetas();for(let c=0,l=r.length;c<l;++c)a=r[c].controller.getMinMax(this,i),o||(e=Math.min(e,a.min)),s||(t=Math.max(t,a.max));return e=s&&e>t?t:e,t=o&&e>t?e:t,{min:et(e,et(t,e)),max:et(t,et(e,t))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(i,e,t){let{beginAtZero:o,grace:s,ticks:a}=this.options,r=a.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=e,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fh(this,s,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=r<this.ticks.length;this._convertTicksToLabels(c?Uh(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=T_(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let i=this.options.reverse,e,t;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),ce(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){let e=this.options.ticks,t,o,s;for(t=0,o=i.length;t<o;t++)s=i[t],s.label=ce(e.callback,[s.value,t,i],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let i=this.options,e=i.ticks,t=Wh(this.ticks.length,i.ticks.maxTicksLimit),o=e.minRotation||0,s=e.maxRotation,a=o,r,c,l;if(!this._isVisible()||!e.display||o>=s||t<=1||!this.isHorizontal()){this.labelRotation=o;return}let d=this._getLabelSizes(),u=d.widest.width,f=d.highest.height,g=Re(this.chart.width-u,0,this.maxWidth);r=i.offset?this.maxWidth/t:g/(t-1),u+6>r&&(r=g/(t-(i.offset?.5:1)),c=this.maxHeight-Mo(i.grid)-e.padding-$h(i.title,this.chart.options.font),l=Math.sqrt(u*u+f*f),a=ks(Math.min(Math.asin(Re((d.highest.height+6)/r,-1,1)),Math.asin(Re(c/l,-1,1))-Math.asin(Re(f/l,-1,1)))),a=Math.max(o,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){let i={width:0,height:0},{chart:e,options:{ticks:t,title:o,grid:s}}=this,a=this._isVisible(),r=this.isHorizontal();if(a){let c=$h(o,e.options.font);if(r?(i.width=this.maxWidth,i.height=Mo(s)+c):(i.height=this.maxHeight,i.width=Mo(s)+c),t.display&&this.ticks.length){let{first:l,last:d,widest:u,highest:f}=this._getLabelSizes(),g=t.padding*2,_=vt(this.labelRotation),v=Math.cos(_),y=Math.sin(_);if(r){let w=t.mirror?0:y*u.width+v*f.height;i.height=Math.min(this.maxHeight,i.height+w+g)}else{let w=t.mirror?0:v*u.width+y*f.height;i.width=Math.min(this.maxWidth,i.width+w+g)}this._calculatePadding(l,d,y,v)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,e,t,o){let{ticks:{align:s,padding:a},position:r}=this.options,c=this.labelRotation!==0,l=r!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),f=0,g=0;c?l?(f=o*i.width,g=t*e.height):(f=t*i.height,g=o*e.width):s==="start"?g=e.width:s==="end"?f=i.width:s!=="inner"&&(f=i.width/2,g=e.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-u+a)*this.width/(this.width-u),0)}else{let d=e.height/2,u=i.height/2;s==="start"?(d=0,u=i.height):s==="end"&&(d=e.height,u=0),this.paddingTop=d+a,this.paddingBottom=u+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){let{axis:i,position:e}=this.options;return e==="top"||e==="bottom"||i==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){this.beforeTickToLabelConversion(),this.generateTickLabels(i);let e,t;for(e=0,t=i.length;e<t;e++)Z(i[e].label)&&(i.splice(e,1),t--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){let e=this.options.ticks.sampleSize,t=this.ticks;e<t.length&&(t=Uh(t,e)),this._labelSizes=i=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,e,t){let{ctx:o,_longestTextCache:s}=this,a=[],r=[],c=Math.floor(e/Wh(e,t)),l=0,d=0,u,f,g,_,v,y,w,C,E,T,k;for(u=0;u<e;u+=c){if(_=i[u].label,v=this._resolveTickFontOptions(u),o.font=y=v.string,w=s[y]=s[y]||{data:{},gc:[]},C=v.lineHeight,E=T=0,!Z(_)&&!me(_))E=go(o,w.data,w.gc,E,_),T=C;else if(me(_))for(f=0,g=_.length;f<g;++f)k=_[f],!Z(k)&&!me(k)&&(E=go(o,w.data,w.gc,E,k),T+=C);a.push(E),r.push(T),l=Math.max(E,l),d=Math.max(T,d)}L_(s,e);let I=a.indexOf(l),F=r.indexOf(d),D=N=>({width:a[N]||0,height:r[N]||0});return{first:D(0),last:D(e-1),widest:D(I),highest:D(F),widths:a,heights:r}}getLabelForValue(i){return i}getPixelForValue(i,e){return NaN}getValueForPixel(i){}getPixelForTick(i){let e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);let e=this._startPixel+i*this._length;return oh(this._alignToPixels?Di(this.chart,e,0):e)}getDecimalForPixel(i){let e=(i-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:i,max:e}=this;return i<0&&e<0?e:i>0&&e>0?i:0}getContext(i){let e=this.ticks||[];if(i>=0&&i<e.length){let t=e[i];return t.$context||(t.$context=z_(this.getContext(),i,t))}return this.$context||(this.$context=N_(this.chart.getContext(),this))}_tickSize(){let i=this.options.ticks,e=vt(this.labelRotation),t=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=i.autoSkipPadding||0,r=s?s.widest.width+a:0,c=s?s.highest.height+a:0;return this.isHorizontal()?c*t>r*o?r/t:c/o:c*o<r*t?c/t:r/o}_isVisible(){let i=this.options.display;return i!=="auto"?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){let e=this.axis,t=this.chart,o=this.options,{grid:s,position:a,border:r}=o,c=s.offset,l=this.isHorizontal(),u=this.ticks.length+(c?1:0),f=Mo(s),g=[],_=r.setContext(this.getContext()),v=_.display?_.width:0,y=v/2,w=function(O){return Di(t,O,v)},C,E,T,k,I,F,D,N,q,W,U,Me;if(a==="top")C=w(this.bottom),F=this.bottom-f,N=C-y,W=w(i.top)+y,Me=i.bottom;else if(a==="bottom")C=w(this.top),W=i.top,Me=w(i.bottom)-y,F=C+y,N=this.top+f;else if(a==="left")C=w(this.right),I=this.right-f,D=C-y,q=w(i.left)+y,U=i.right;else if(a==="right")C=w(this.left),q=i.left,U=w(i.right)-y,I=C+y,D=this.left+f;else if(e==="x"){if(a==="center")C=w((i.top+i.bottom)/2+.5);else if(Y(a)){let O=Object.keys(a)[0],L=a[O];C=w(this.chart.scales[O].getPixelForValue(L))}W=i.top,Me=i.bottom,F=C+y,N=F+f}else if(e==="y"){if(a==="center")C=w((i.left+i.right)/2);else if(Y(a)){let O=Object.keys(a)[0],L=a[O];C=w(this.chart.scales[O].getPixelForValue(L))}I=C-y,D=I-f,q=i.left,U=i.right}let He=$(o.ticks.maxTicksLimit,u),ie=Math.max(1,Math.ceil(u/He));for(E=0;E<u;E+=ie){let O=this.getContext(E),L=s.setContext(O),B=r.setContext(O),H=L.lineWidth,fe=L.color,Qe=B.dash||[],Se=B.dashOffset,Ye=L.tickWidth,ne=L.tickColor,pi=L.tickBorderDash||[],Zt=L.tickBorderDashOffset;T=F_(this,E,c),T!==void 0&&(k=Di(t,T,H),l?I=D=q=U=k:F=N=W=Me=k,g.push({tx1:I,ty1:F,tx2:D,ty2:N,x1:q,y1:W,x2:U,y2:Me,width:H,color:fe,borderDash:Qe,borderDashOffset:Se,tickWidth:Ye,tickColor:ne,tickBorderDash:pi,tickBorderDashOffset:Zt}))}return this._ticksLength=u,this._borderValue=C,g}_computeLabelItems(i){let e=this.axis,t=this.options,{position:o,ticks:s}=t,a=this.isHorizontal(),r=this.ticks,{align:c,crossAlign:l,padding:d,mirror:u}=s,f=Mo(t.grid),g=f+d,_=u?-d:g,v=-vt(this.labelRotation),y=[],w,C,E,T,k,I,F,D,N,q,W,U,Me="middle";if(o==="top")I=this.bottom-_,F=this._getXAxisLabelAlignment();else if(o==="bottom")I=this.top+_,F=this._getXAxisLabelAlignment();else if(o==="left"){let ie=this._getYAxisLabelAlignment(f);F=ie.textAlign,k=ie.x}else if(o==="right"){let ie=this._getYAxisLabelAlignment(f);F=ie.textAlign,k=ie.x}else if(e==="x"){if(o==="center")I=(i.top+i.bottom)/2+g;else if(Y(o)){let ie=Object.keys(o)[0],O=o[ie];I=this.chart.scales[ie].getPixelForValue(O)+g}F=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")k=(i.left+i.right)/2-g;else if(Y(o)){let ie=Object.keys(o)[0],O=o[ie];k=this.chart.scales[ie].getPixelForValue(O)}F=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(c==="start"?Me="top":c==="end"&&(Me="bottom"));let He=this._getLabelSizes();for(w=0,C=r.length;w<C;++w){E=r[w],T=E.label;let ie=s.setContext(this.getContext(w));D=this.getPixelForTick(w)+s.labelOffset,N=this._resolveTickFontOptions(w),q=N.lineHeight,W=me(T)?T.length:1;let O=W/2,L=ie.color,B=ie.textStrokeColor,H=ie.textStrokeWidth,fe=F;a?(k=D,F==="inner"&&(w===C-1?fe=this.options.reverse?"left":"right":w===0?fe=this.options.reverse?"right":"left":fe="center"),o==="top"?l==="near"||v!==0?U=-W*q+q/2:l==="center"?U=-He.highest.height/2-O*q+q:U=-He.highest.height+q/2:l==="near"||v!==0?U=q/2:l==="center"?U=He.highest.height/2-O*q:U=He.highest.height-W*q,u&&(U*=-1),v!==0&&!ie.showLabelBackdrop&&(k+=q/2*Math.sin(v))):(I=D,U=(1-W)*q/2);let Qe;if(ie.showLabelBackdrop){let Se=Ve(ie.backdropPadding),Ye=He.heights[w],ne=He.widths[w],pi=U-Se.top,Zt=0-Se.left;switch(Me){case"middle":pi-=Ye/2;break;case"bottom":pi-=Ye;break}switch(F){case"center":Zt-=ne/2;break;case"right":Zt-=ne;break;case"inner":w===C-1?Zt-=ne:w>0&&(Zt-=ne/2);break}Qe={left:Zt,top:pi,width:ne+Se.width,height:Ye+Se.height,color:ie.backdropColor}}y.push({label:T,font:N,textOffset:U,options:{rotation:v,color:L,strokeColor:B,strokeWidth:H,textAlign:fe,textBaseline:Me,translation:[k,I],backdrop:Qe}})}return y}_getXAxisLabelAlignment(){let{position:i,ticks:e}=this.options;if(-vt(this.labelRotation))return i==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(i){let{position:e,ticks:{crossAlign:t,mirror:o,padding:s}}=this.options,a=this._getLabelSizes(),r=i+s,c=a.widest.width,l,d;return e==="left"?o?(d=this.right+s,t==="near"?l="left":t==="center"?(l="center",d+=c/2):(l="right",d+=c)):(d=this.right-r,t==="near"?l="right":t==="center"?(l="center",d-=c/2):(l="left",d=this.left)):e==="right"?o?(d=this.left+s,t==="near"?l="right":t==="center"?(l="center",d-=c/2):(l="left",d-=c)):(d=this.left+r,t==="near"?l="left":t==="center"?(l="center",d+=c/2):(l="right",d=this.right)):l="right",{textAlign:l,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let i=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:i.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:i.width}}drawBackground(){let{ctx:i,options:{backgroundColor:e},left:t,top:o,width:s,height:a}=this;e&&(i.save(),i.fillStyle=e,i.fillRect(t,o,s,a),i.restore())}getLineWidthForValue(i){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let o=this.ticks.findIndex(s=>s.value===i);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(i){let e=this.options.grid,t=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i)),s,a,r=(c,l,d)=>{!d.width||!d.color||(t.save(),t.lineWidth=d.width,t.strokeStyle=d.color,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset,t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(l.x,l.y),t.stroke(),t.restore())};if(e.display)for(s=0,a=o.length;s<a;++s){let c=o[s];e.drawOnChartArea&&r({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&r({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:i,ctx:e,options:{border:t,grid:o}}=this,s=t.setContext(this.getContext()),a=t.display?s.width:0;if(!a)return;let r=o.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,d,u,f;this.isHorizontal()?(l=Di(i,this.left,a)-a/2,d=Di(i,this.right,r)+r/2,u=f=c):(u=Di(i,this.top,a)-a/2,f=Di(i,this.bottom,r)+r/2,l=d=c),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(l,u),e.lineTo(d,f),e.stroke(),e.restore()}drawLabels(i){if(!this.options.ticks.display)return;let t=this.ctx,o=this._computeLabelArea();o&&vo(t,o);let s=this.getLabelItems(i);for(let a of s){let r=a.options,c=a.font,l=a.label,d=a.textOffset;Pi(t,l,0,d,c,r)}o&&yo(t)}drawTitle(){let{ctx:i,options:{position:e,title:t,reverse:o}}=this;if(!t.display)return;let s=Ie(t.font),a=Ve(t.padding),r=t.align,c=s.lineHeight/2;e==="bottom"||e==="center"||Y(e)?(c+=a.bottom,me(t.text)&&(c+=s.lineHeight*(t.text.length-1))):c+=a.top;let{titleX:l,titleY:d,maxWidth:u,rotation:f}=j_(this,c,e,r);Pi(i,t.text,0,0,s,{color:t.color,maxWidth:u,rotation:f,textAlign:B_(r,e,o),textBaseline:"middle",translation:[l,d]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){let i=this.options,e=i.ticks&&i.ticks.z||0,t=$(i.grid&&i.grid.z,-1),o=$(i.border&&i.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:t,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(i){let e=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",o=[],s,a;for(s=0,a=e.length;s<a;++s){let r=e[s];r[t]===this.id&&(!i||r.type===i)&&o.push(r)}return o}_resolveTickFontOptions(i){let e=this.options.ticks.setContext(this.getContext(i));return Ie(e.font)}_maxDigits(){let i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}},Wn=class{constructor(i,e,t){this.type=i,this.scope=e,this.override=t,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){let e=Object.getPrototypeOf(i),t;q_(e)&&(t=this.register(e));let o=this.items,s=i.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+i);return s in o||(o[s]=i,V_(i,a,t),this.override&&ye.override(i.id,i.overrides)),a}get(i){return this.items[i]}unregister(i){let e=this.items,t=i.id,o=this.scope;t in e&&delete e[t],o&&t in ye[o]&&(delete ye[o][t],this.override&&delete Ii[t])}};function V_(n,i,e){let t=An(Object.create(null),[e?ye.get(e):{},ye.get(i),n.defaults]);ye.set(i,t),n.defaultRoutes&&H_(i,n.defaultRoutes),n.descriptors&&ye.describe(i,n.descriptors)}function H_(n,i){Object.keys(i).forEach(e=>{let t=e.split("."),o=t.pop(),s=[n].concat(t).join("."),a=i[e].split("."),r=a.pop(),c=a.join(".");ye.route(s,o,c,r)})}function q_(n){return"id"in n&&"defaults"in n}var Nr=class{constructor(){this.controllers=new Wn(Fi,"datasets",!0),this.elements=new Wn(Et,"elements"),this.plugins=new Wn(Object,"plugins"),this.scales=new Wn(en,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,e,t){[...e].forEach(o=>{let s=t||this._getRegistryForType(o);t||s.isForType(o)||s===this.plugins&&o.id?this._exec(i,s,o):oe(o,a=>{let r=t||this._getRegistryForType(a);this._exec(i,r,a)})})}_exec(i,e,t){let o=Ss(i);ce(t["before"+o],[],t),e[i](t),ce(t["after"+o],[],t)}_getRegistryForType(i){for(let e=0;e<this._typedRegistries.length;e++){let t=this._typedRegistries[e];if(t.isForType(i))return t}return this.plugins}_get(i,e,t){let o=e.get(i);if(o===void 0)throw new Error('"'+i+'" is not a registered '+t+".");return o}},Yt=new Nr,zr=class{constructor(){this._init=[]}notify(i,e,t,o){e==="beforeInit"&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install"));let s=o?this._descriptors(i).filter(o):this._descriptors(i),a=this._notify(s,i,e,t);return e==="afterDestroy"&&(this._notify(s,i,"stop"),this._notify(this._init,i,"uninstall")),a}_notify(i,e,t,o){o=o||{};for(let s of i){let a=s.plugin,r=a[t],c=[e,o,s.options];if(ce(r,c,a)===!1&&o.cancelable)return!1}return!0}invalidate(){Z(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),e}_createDescriptors(i,e){let t=i&&i.config,o=$(t.options&&t.options.plugins,{}),s=W_(t);return o===!1&&!e?[]:$_(i,s,o,e)}_notifyStateChanges(i){let e=this._oldCache||[],t=this._cache,o=(s,a)=>s.filter(r=>!a.some(c=>r.plugin.id===c.plugin.id));this._notify(o(e,t),i,"stop"),this._notify(o(t,e),i,"start")}};function W_(n){let i={},e=[],t=Object.keys(Yt.plugins.items);for(let s=0;s<t.length;s++)e.push(Yt.getPlugin(t[s]));let o=n.plugins||[];for(let s=0;s<o.length;s++){let a=o[s];e.indexOf(a)===-1&&(e.push(a),i[a.id]=!0)}return{plugins:e,localIds:i}}function U_(n,i){return!i&&n===!1?null:n===!0?{}:n}function $_(n,{plugins:i,localIds:e},t,o){let s=[],a=n.getContext();for(let r of i){let c=r.id,l=U_(t[c],o);l!==null&&s.push({plugin:r,options:G_(n.config,{plugin:r,local:e[c]},l,a)})}return s}function G_(n,{plugin:i,local:e},t,o){let s=n.pluginScopeKeys(i),a=n.getOptionScopes(t,s);return e&&i.defaults&&a.push(i.defaults),n.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Br(n,i){let e=ye.datasets[n]||{};return((i.datasets||{})[n]||{}).indexAxis||i.indexAxis||e.indexAxis||"x"}function Q_(n,i){let e=n;return n==="_index_"?e=i:n==="_value_"&&(e=i==="x"?"y":"x"),e}function K_(n,i){return n===i?"_index_":"_value_"}function Gh(n){if(n==="x"||n==="y"||n==="r")return n}function Y_(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function jr(n,...i){if(Gh(n))return n;for(let e of i){let t=e.axis||Y_(e.position)||n.length>1&&Gh(n[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Qh(n,i,e){if(e[i+"AxisID"]===n)return{axis:i}}function X_(n,i){if(i.data&&i.data.datasets){let e=i.data.datasets.filter(t=>t.xAxisID===n||t.yAxisID===n);if(e.length)return Qh(n,"x",e[0])||Qh(n,"y",e[0])}return{}}function Z_(n,i){let e=Ii[n.type]||{scales:{}},t=i.scales||{},o=Br(n.type,i),s=Object.create(null);return Object.keys(t).forEach(a=>{let r=t[a];if(!Y(r))return console.error(`Invalid scale configuration for scale: ${a}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let c=jr(a,r,X_(a,n),ye.scales[r.type]),l=K_(c,o),d=e.scales||{};s[a]=Ln(Object.create(null),[{axis:c},r,d[c],d[l]])}),n.data.datasets.forEach(a=>{let r=a.type||n.type,c=a.indexAxis||Br(r,i),d=(Ii[r]||{}).scales||{};Object.keys(d).forEach(u=>{let f=Q_(u,c),g=a[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Ln(s[g],[{axis:f},t[g],d[u]])})}),Object.keys(s).forEach(a=>{let r=s[a];Ln(r,[ye.scales[r.type],ye.scale])}),s}function Fm(n){let i=n.options||(n.options={});i.plugins=$(i.plugins,{}),i.scales=Z_(n,i)}function Lm(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function J_(n){return n=n||{},n.data=Lm(n.data),Fm(n),n}var Kh=new Map,Nm=new Set;function zs(n,i){let e=Kh.get(n);return e||(e=i(),Kh.set(n,e),Nm.add(e)),e}var So=(n,i,e)=>{let t=li(i,e);t!==void 0&&n.add(t)},Vr=class{constructor(i){this._config=J_(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=Lm(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){let i=this._config;this.clearCache(),Fm(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return zs(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,e){return zs(`${i}.transition.${e}`,()=>[[`datasets.${i}.transitions.${e}`,`transitions.${e}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,e){return zs(`${i}-${e}`,()=>[[`datasets.${i}.elements.${e}`,`datasets.${i}`,`elements.${e}`,""]])}pluginScopeKeys(i){let e=i.id,t=this.type;return zs(`${t}-plugin-${e}`,()=>[[`plugins.${e}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,e){let t=this._scopeCache,o=t.get(i);return(!o||e)&&(o=new Map,t.set(i,o)),o}getOptionScopes(i,e,t){let{options:o,type:s}=this,a=this._cachedScopes(i,t),r=a.get(e);if(r)return r;let c=new Set;e.forEach(d=>{i&&(c.add(i),d.forEach(u=>So(c,i,u))),d.forEach(u=>So(c,o,u)),d.forEach(u=>So(c,Ii[s]||{},u)),d.forEach(u=>So(c,ye,u)),d.forEach(u=>So(c,Is,u))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),Nm.has(e)&&a.set(e,l),l}chartOptionScopes(){let{options:i,type:e}=this;return[i,Ii[e]||{},ye.datasets[e]||{},{type:e},ye,Is]}resolveNamedOptions(i,e,t,o=[""]){let s={$shared:!0},{resolver:a,subPrefixes:r}=Yh(this._resolverCache,i,o),c=a;if(tb(a,e)){s.$shared=!1,t=ri(t)?t():t;let l=this.createResolver(i,t,r);c=Ki(a,t,l)}for(let l of e)s[l]=c[l];return s}createResolver(i,e,t=[""],o){let{resolver:s}=Yh(this._resolverCache,i,t);return Y(e)?Ki(s,e,void 0,o):s}};function Yh(n,i,e){let t=n.get(i);t||(t=new Map,n.set(i,t));let o=e.join(),s=t.get(o);return s||(s={resolver:Rs(i,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},t.set(o,s)),s}var eb=n=>Y(n)&&Object.getOwnPropertyNames(n).some(i=>ri(n[i]));function tb(n,i){let{isScriptable:e,isIndexable:t}=ur(n);for(let o of i){let s=e(o),a=t(o),r=(a||s)&&n[o];if(s&&(ri(r)||eb(r))||a&&me(r))return!0}return!1}var ib="4.4.1",nb=["top","bottom","left","right","chartArea"];function Xh(n,i){return n==="top"||n==="bottom"||nb.indexOf(n)===-1&&i==="x"}function Zh(n,i){return function(e,t){return e[n]===t[n]?e[i]-t[i]:e[n]-t[n]}}function Jh(n){let i=n.chart,e=i.options.animation;i.notifyPlugins("afterRender"),ce(e&&e.onComplete,[n],i)}function ob(n){let i=n.chart,e=i.options.animation;ce(e&&e.onProgress,[n],i)}function zm(n){return Os()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Ws={},em=n=>{let i=zm(n);return Object.values(Ws).filter(e=>e.canvas===i).pop()};function sb(n,i,e){let t=Object.keys(n);for(let o of t){let s=+o;if(s>=i){let a=n[o];delete n[o],(e>0||s>i)&&(n[s+e]=a)}}}function ab(n,i,e,t){return!e||n.type==="mouseout"?null:t?i:n}function Bs(n,i,e){return n.options.clip?n[e]:i[e]}function rb(n,i){let{xScale:e,yScale:t}=n;return e&&t?{left:Bs(e,i,"left"),right:Bs(e,i,"right"),top:Bs(t,i,"top"),bottom:Bs(t,i,"bottom")}:i}var $n=(()=>{class n{static defaults=ye;static instances=Ws;static overrides=Ii;static registry=Yt;static version=ib;static getChart=em;static register(...e){Yt.add(...e),tm()}static unregister(...e){Yt.remove(...e),tm()}constructor(e,t){let o=this.config=new Vr(t),s=zm(e),a=em(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let r=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||E_(s)),this.platform.updateConfig(o);let c=this.platform.acquireContext(s,r.aspectRatio),l=c&&c.canvas,d=l&&l.height,u=l&&l.width;if(this.id=Zd(),this.ctx=c,this.canvas=l,this.width=u,this.height=d,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lh(f=>this.update(f),r.resizeDelay||0),this._dataChanges=[],Ws[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}hi.listen(this,"complete",Jh),hi.listen(this,"progress",ob),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:o,height:s,_aspectRatio:a}=this;return Z(e)?t&&a?a:s?o/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Yt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_r(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dr(this.canvas,this.ctx),this}stop(){return hi.stop(this),this}resize(e,t){hi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let o=this.options,s=this.canvas,a=o.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,a),c=o.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,_r(this,c,!0)&&(this.notifyPlugins("resize",{size:r}),ce(o.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};oe(t,(o,s)=>{o.id=s})}buildOrUpdateScales(){let e=this.options,t=e.scales,o=this.scales,s=Object.keys(o).reduce((r,c)=>(r[c]=!1,r),{}),a=[];t&&(a=a.concat(Object.keys(t).map(r=>{let c=t[r],l=jr(r,c),d=l==="r",u=l==="x";return{options:c,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),oe(a,r=>{let c=r.options,l=c.id,d=jr(l,c),u=$(c.type,r.dtype);(c.position===void 0||Xh(c.position,d)!==Xh(r.dposition))&&(c.position=r.dposition),s[l]=!0;let f=null;if(l in o&&o[l].type===u)f=o[l];else{let g=Yt.getScale(u);f=new g({id:l,type:u,ctx:this.ctx,chart:this}),o[f.id]=f}f.init(c,e)}),oe(s,(r,c)=>{r||delete o[c]}),oe(o,r=>{Ge.configure(this,r,r.options),Ge.addBox(this,r)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,o=e.length;if(e.sort((s,a)=>s.index-a.index),o>t){for(let s=t;s<o;++s)this._destroyDatasetMeta(s);e.splice(t,o-t)}this._sortedMetasets=e.slice(0).sort(Zh("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((o,s)=>{t.filter(a=>a===o._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,o,s;for(this._removeUnreferencedMetasets(),o=0,s=t.length;o<s;o++){let a=t[o],r=this.getDatasetMeta(o),c=a.type||this.config.type;if(r.type&&r.type!==c&&(this._destroyDatasetMeta(o),r=this.getDatasetMeta(o)),r.type=c,r.indexAxis=a.indexAxis||Br(c,this.options),r.order=a.order||0,r.index=o,r.label=""+a.label,r.visible=this.isDatasetVisible(o),r.controller)r.controller.updateIndex(o),r.controller.linkScales();else{let l=Yt.getController(c),{datasetElementType:d,dataElementType:u}=ye.datasets[c];Object.assign(l,{dataElementType:Yt.getElement(u),datasetElementType:d&&Yt.getElement(d)}),r.controller=new l(this,o),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){oe(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let o=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let d=0,u=this.data.datasets.length;d<u;d++){let{controller:f}=this.getDatasetMeta(d),g=!s&&a.indexOf(f)===-1;f.buildOrUpdateElements(g),r=Math.max(+f.getMaxOverflow(),r)}r=this._minPadding=o.layout.autoPadding?r:0,this._updateLayout(r),s||oe(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zh("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){oe(this.scales,e=>{Ge.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),o=new Set(e.events);(!Xa(t,o)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:o,start:s,count:a}of t){let r=o==="_removeElements"?-a:a;sb(e,s,r)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,o=a=>new Set(e.filter(r=>r[0]===a).map((r,c)=>c+","+r.splice(1).join(","))),s=o(0);for(let a=1;a<t;a++)if(!Xa(s,o(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ge.update(this,this.width,this.height,e);let t=this.chartArea,o=t.width<=0||t.height<=0;this._layers=[],oe(this.boxes,s=>{o&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,o=this.data.datasets.length;t<o;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,o=this.data.datasets.length;t<o;++t)this._updateDataset(t,ri(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let o=this.getDatasetMeta(e),s={meta:o,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(o.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hi.has(this)?this.attached&&!hi.running(this)&&hi.start(this):(this.draw(),Jh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:o,height:s}=this._resizeBeforeDraw;this._resize(o,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,o=[],s,a;for(s=0,a=t.length;s<a;++s){let r=t[s];(!e||r.visible)&&o.push(r)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,o=e._clip,s=!o.disabled,a=rb(e,this.chartArea),r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&vo(t,{left:o.left===!1?0:a.left-o.left,right:o.right===!1?this.width:a.right+o.right,top:o.top===!1?0:a.top-o.top,bottom:o.bottom===!1?this.height:a.bottom+o.bottom}),e.controller.draw(),s&&yo(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return $t(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,o,s){let a=c_.modes[t];return typeof a=="function"?a(this,e,o,s):[]}getDatasetMeta(e){let t=this.data.datasets[e],o=this._metasets,s=o.filter(a=>a&&a._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},o.push(s)),s}getContext(){return this.$context||(this.$context=di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let o=this.getDatasetMeta(e);return typeof o.hidden=="boolean"?!o.hidden:!t.hidden}setDatasetVisibility(e,t){let o=this.getDatasetMeta(e);o.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,o){let s=o?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,s);Nn(t)?(a.data[t].hidden=!o,this.update()):(this.setDatasetVisibility(e,o),r.update(a,{visible:o}),this.update(c=>c.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),hi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),dr(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ws[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,o=(a,r)=>{t.addEventListener(this,a,r),e[a]=r},s=(a,r,c)=>{a.offsetX=r,a.offsetY=c,this._eventHandler(a)};oe(this.options.events,a=>o(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,o=(l,d)=>{t.addEventListener(this,l,d),e[l]=d},s=(l,d)=>{e[l]&&(t.removeEventListener(this,l,d),delete e[l])},a=(l,d)=>{this.canvas&&this.resize(l,d)},r,c=()=>{s("attach",c),this.attached=!0,this.resize(),o("resize",a),o("detach",r)};r=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),o("attach",c)},t.isAttached(this.canvas)?c():r()}unbindEvents(){oe(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},oe(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,o){let s=o?"set":"remove",a,r,c,l;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=e.length;c<l;++c){r=e[c];let d=r&&this.getDatasetMeta(r.datasetIndex).controller;d&&d[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],o=e.map(({datasetIndex:a,index:r})=>{let c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[r],index:r}});!_o(o,t)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,t))}notifyPlugins(e,t,o){return this._plugins.notify(this,e,t,o)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,o){let s=this.options.hover,a=(l,d)=>l.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),r=a(t,e),c=o?e:a(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(e,t){let o={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",o,s)===!1)return;let a=this._handleEvent(e,t,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,s),(a||o.changed)&&this.render(),this}_handleEvent(e,t,o){let{_active:s=[],options:a}=this,r=t,c=this._getActiveElements(e,s,o,r),l=th(e),d=ab(e,this._lastEvent,o,l);o&&(this._lastEvent=null,ce(a.onHover,[e,c,this],this),l&&ce(a.onClick,[e,c,this],this));let u=!_o(c,s);return(u||t)&&(this._active=c,this._updateHoverStyles(c,s,t)),this._lastEvent=d,u}_getActiveElements(e,t,o,s){if(e.type==="mouseout")return[];if(!o)return t;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}}return n})();function tm(){return oe($n.instances,n=>n._plugins.invalidate())}function cb(n,i,e){let{startAngle:t,pixelMargin:o,x:s,y:a,outerRadius:r,innerRadius:c}=i,l=o/r;n.beginPath(),n.arc(s,a,r,t-l,e+l),c>o?(l=o/c,n.arc(s,a,c,e+l,t-l,!0)):n.arc(s,a,o,e+we,t-we),n.closePath(),n.clip()}function lb(n){return Ps(n,["outerStart","outerEnd","innerStart","innerEnd"])}function db(n,i,e,t){let o=lb(n.options.borderRadius),s=(e-i)/2,a=Math.min(s,t*i/2),r=c=>{let l=(e-Math.min(s,c))*t/2;return Re(c,0,Math.min(s,l))};return{outerStart:r(o.outerStart),outerEnd:r(o.outerEnd),innerStart:Re(o.innerStart,0,a),innerEnd:Re(o.innerEnd,0,a)}}function qn(n,i,e,t){return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}function Qs(n,i,e,t,o,s){let{x:a,y:r,startAngle:c,pixelMargin:l,innerRadius:d}=i,u=Math.max(i.outerRadius+t+e-l,0),f=d>0?d+t+e+l:0,g=0,_=o-c;if(t){let ie=d>0?d-t:0,O=u>0?u-t:0,L=(ie+O)/2,B=L!==0?_*L/(L+t):_;g=(_-B)/2}let v=Math.max(.001,_*u-e/ue)/u,y=(_-v)/2,w=c+y+g,C=o-y-g,{outerStart:E,outerEnd:T,innerStart:k,innerEnd:I}=db(i,f,u,C-w),F=u-E,D=u-T,N=w+E/F,q=C-T/D,W=f+k,U=f+I,Me=w+k/W,He=C-I/U;if(n.beginPath(),s){let ie=(N+q)/2;if(n.arc(a,r,u,N,ie),n.arc(a,r,u,ie,q),T>0){let H=qn(D,q,a,r);n.arc(H.x,H.y,T,q,C+we)}let O=qn(U,C,a,r);if(n.lineTo(O.x,O.y),I>0){let H=qn(U,He,a,r);n.arc(H.x,H.y,I,C+we,He+Math.PI)}let L=(C-I/f+(w+k/f))/2;if(n.arc(a,r,f,C-I/f,L,!0),n.arc(a,r,f,L,w+k/f,!0),k>0){let H=qn(W,Me,a,r);n.arc(H.x,H.y,k,Me+Math.PI,w-we)}let B=qn(F,w,a,r);if(n.lineTo(B.x,B.y),E>0){let H=qn(F,N,a,r);n.arc(H.x,H.y,E,w-we,N)}}else{n.moveTo(a,r);let ie=Math.cos(N)*u+a,O=Math.sin(N)*u+r;n.lineTo(ie,O);let L=Math.cos(q)*u+a,B=Math.sin(q)*u+r;n.lineTo(L,B)}n.closePath()}function hb(n,i,e,t,o){let{fullCircles:s,startAngle:a,circumference:r}=i,c=i.endAngle;if(s){Qs(n,i,e,t,c,o);for(let l=0;l<s;++l)n.fill();isNaN(r)||(c=a+(r%pe||pe))}return Qs(n,i,e,t,c,o),n.fill(),c}function mb(n,i,e,t,o){let{fullCircles:s,startAngle:a,circumference:r,options:c}=i,{borderWidth:l,borderJoinStyle:d,borderDash:u,borderDashOffset:f}=c,g=c.borderAlign==="inner";if(!l)return;n.setLineDash(u||[]),n.lineDashOffset=f,g?(n.lineWidth=l*2,n.lineJoin=d||"round"):(n.lineWidth=l,n.lineJoin=d||"bevel");let _=i.endAngle;if(s){Qs(n,i,e,t,_,o);for(let v=0;v<s;++v)n.stroke();isNaN(r)||(_=a+(r%pe||pe))}g&&cb(n,i,_),s||(Qs(n,i,e,t,_,o),n.stroke())}var Hr=class extends Et{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,t){let o=this.getProps(["x","y"],t),{angle:s,distance:a}=tr(o,{x:i,y:e}),{startAngle:r,endAngle:c,innerRadius:l,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),f=(this.options.spacing+this.options.borderWidth)/2,_=$(u,c-r)>=pe||Bn(s,r,c),v=Qt(a,l+f,d+f);return _&&v}getCenterPoint(i){let{x:e,y:t,startAngle:o,endAngle:s,innerRadius:a,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:c,spacing:l}=this.options,d=(o+s)/2,u=(a+r+l+c)/2;return{x:e+Math.cos(d)*u,y:t+Math.sin(d)*u}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){let{options:e,circumference:t}=this,o=(e.offset||0)/4,s=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=t>pe?Math.floor(t/pe):0,t===0||this.innerRadius<0||this.outerRadius<0)return;i.save();let r=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(r)*o,Math.sin(r)*o);let c=1-Math.sin(Math.min(ue,t||0)),l=o*c;i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,hb(i,this,l,s,a),mb(i,this,l,s,a),i.restore()}};function Bm(n,i,e=i){n.lineCap=$(e.borderCapStyle,i.borderCapStyle),n.setLineDash($(e.borderDash,i.borderDash)),n.lineDashOffset=$(e.borderDashOffset,i.borderDashOffset),n.lineJoin=$(e.borderJoinStyle,i.borderJoinStyle),n.lineWidth=$(e.borderWidth,i.borderWidth),n.strokeStyle=$(e.borderColor,i.borderColor)}function ub(n,i,e){n.lineTo(e.x,e.y)}function pb(n){return n.stepped?uh:n.tension||n.cubicInterpolationMode==="monotone"?ph:ub}function jm(n,i,e={}){let t=n.length,{start:o=0,end:s=t-1}=e,{start:a,end:r}=i,c=Math.max(o,a),l=Math.min(s,r),d=o<a&&s<a||o>r&&s>r;return{count:t,start:c,loop:i.loop,ilen:l<c&&!d?t+l-c:l-c}}function fb(n,i,e,t){let{points:o,options:s}=i,{count:a,start:r,loop:c,ilen:l}=jm(o,e,t),d=pb(s),{move:u=!0,reverse:f}=t||{},g,_,v;for(g=0;g<=l;++g)_=o[(r+(f?l-g:g))%a],!_.skip&&(u?(n.moveTo(_.x,_.y),u=!1):d(n,v,_,f,s.stepped),v=_);return c&&(_=o[(r+(f?l:0))%a],d(n,v,_,f,s.stepped)),!!c}function gb(n,i,e,t){let o=i.points,{count:s,start:a,ilen:r}=jm(o,e,t),{move:c=!0,reverse:l}=t||{},d=0,u=0,f,g,_,v,y,w,C=T=>(a+(l?r-T:T))%s,E=()=>{v!==y&&(n.lineTo(d,y),n.lineTo(d,v),n.lineTo(d,w))};for(c&&(g=o[C(0)],n.moveTo(g.x,g.y)),f=0;f<=r;++f){if(g=o[C(f)],g.skip)continue;let T=g.x,k=g.y,I=T|0;I===_?(k<v?v=k:k>y&&(y=k),d=(u*d+T)/++u):(E(),n.lineTo(T,k),_=I,u=0,v=y=k),w=k}E()}function qr(n){let i=n.options,e=i.borderDash&&i.borderDash.length;return!n._decimated&&!n._loop&&!i.tension&&i.cubicInterpolationMode!=="monotone"&&!i.stepped&&!e?gb:fb}function _b(n){return n.stepped?wh:n.tension||n.cubicInterpolationMode==="monotone"?Mh:Ti}function bb(n,i,e,t){let o=i._path;o||(o=i._path=new Path2D,i.path(o,e,t)&&o.closePath()),Bm(n,i.options),n.stroke(o)}function vb(n,i,e,t){let{segments:o,options:s}=i,a=qr(i);for(let r of o)Bm(n,s,r.style),n.beginPath(),a(n,i,r,{start:e,end:e+t-1})&&n.closePath(),n.stroke()}var yb=typeof Path2D=="function";function xb(n,i,e,t){yb&&!i.options.segment?bb(n,i,e,t):vb(n,i,e,t)}var Xs=(()=>{class n extends Et{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let o=this.options;if((o.tension||o.cubicInterpolationMode==="monotone")&&!o.stepped&&!this._pointsUpdated){let s=o.spanGaps?this._loop:this._fullLoop;yh(this._points,o,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kh(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,o=e.length;return o&&t[e[o-1].end]}interpolate(e,t){let o=this.options,s=e[t],a=this.points,r=Cr(this,{property:t,start:s,end:s});if(!r.length)return;let c=[],l=_b(o),d,u;for(d=0,u=r.length;d<u;++d){let{start:f,end:g}=r[d],_=a[f],v=a[g];if(_===v){c.push(_);continue}let y=Math.abs((s-_[t])/(v[t]-_[t])),w=l(_,v,y,o.stepped);w[t]=e[t],c.push(w)}return c.length===1?c[0]:c}pathSegment(e,t,o){return qr(this)(e,this,t,o)}path(e,t,o){let s=this.segments,a=qr(this),r=this._loop;t=t||0,o=o||this.points.length-t;for(let c of s)r&=a(e,this,c,{start:t,end:t+o-1});return!!r}draw(e,t,o,s){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),xb(e,this,o,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function im(n,i,e,t){let o=n.options,{[e]:s}=n.getProps([e],t);return Math.abs(i-s)<o.radius+o.hitRadius}var Cb=(()=>{class n extends Et{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,o){let s=this.options,{x:a,y:r}=this.getProps(["x","y"],o);return Math.pow(e-a,2)+Math.pow(t-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return im(this,e,"x",t)}inYRange(e,t){return im(this,e,"y",t)}getCenterPoint(e){let{x:t,y:o}=this.getProps(["x","y"],e);return{x:t,y:o}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);let o=t&&e.borderWidth||0;return(t+o)*2}draw(e,t){let o=this.options;this.skip||o.radius<.1||!$t(this,t,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,Ds(e,o,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function Vm(n,i){let{x:e,y:t,base:o,width:s,height:a}=n.getProps(["x","y","base","width","height"],i),r,c,l,d,u;return n.horizontal?(u=a/2,r=Math.min(e,o),c=Math.max(e,o),l=t-u,d=t+u):(u=s/2,r=e-u,c=e+u,l=Math.min(t,o),d=Math.max(t,o)),{left:r,top:l,right:c,bottom:d}}function Ai(n,i,e,t){return n?0:Re(i,e,t)}function wb(n,i,e){let t=n.options.borderWidth,o=n.borderSkipped,s=mr(t);return{t:Ai(o.top,s.top,0,e),r:Ai(o.right,s.right,0,i),b:Ai(o.bottom,s.bottom,0,e),l:Ai(o.left,s.left,0,i)}}function Mb(n,i,e){let{enableBorderRadius:t}=n.getProps(["enableBorderRadius"]),o=n.options.borderRadius,s=Ri(o),a=Math.min(i,e),r=n.borderSkipped,c=t||Y(o);return{topLeft:Ai(!c||r.top||r.left,s.topLeft,0,a),topRight:Ai(!c||r.top||r.right,s.topRight,0,a),bottomLeft:Ai(!c||r.bottom||r.left,s.bottomLeft,0,a),bottomRight:Ai(!c||r.bottom||r.right,s.bottomRight,0,a)}}function Sb(n){let i=Vm(n),e=i.right-i.left,t=i.bottom-i.top,o=wb(n,e/2,t/2),s=Mb(n,e/2,t/2);return{outer:{x:i.left,y:i.top,w:e,h:t,radius:s},inner:{x:i.left+o.l,y:i.top+o.t,w:e-o.l-o.r,h:t-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function Ir(n,i,e,t){let o=i===null,s=e===null,r=n&&!(o&&s)&&Vm(n,t);return r&&(o||Qt(i,r.left,r.right))&&(s||Qt(e,r.top,r.bottom))}function kb(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Eb(n,i){n.rect(i.x,i.y,i.w,i.h)}function Dr(n,i,e={}){let t=n.x!==e.x?-i:0,o=n.y!==e.y?-i:0,s=(n.x+n.w!==e.x+e.w?i:0)-t,a=(n.y+n.h!==e.y+e.h?i:0)-o;return{x:n.x+t,y:n.y+o,w:n.w+s,h:n.h+a,radius:n.radius}}var Wr=class extends Et{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){let{inflateAmount:e,options:{borderColor:t,backgroundColor:o}}=this,{inner:s,outer:a}=Sb(this),r=kb(a.radius)?Vn:Eb;i.save(),(a.w!==s.w||a.h!==s.h)&&(i.beginPath(),r(i,Dr(a,e,s)),i.clip(),r(i,Dr(s,-e,a)),i.fillStyle=t,i.fill("evenodd")),i.beginPath(),r(i,Dr(s,e)),i.fillStyle=o,i.fill(),i.restore()}inRange(i,e,t){return Ir(this,i,e,t)}inXRange(i,e){return Ir(this,i,null,e)}inYRange(i,e){return Ir(this,null,i,e)}getCenterPoint(i){let{x:e,y:t,base:o,horizontal:s}=this.getProps(["x","y","base","horizontal"],i);return{x:s?(e+o)/2:e,y:s?t:(t+o)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},Tb=Object.freeze({__proto__:null,ArcElement:Hr,BarElement:Wr,LineElement:Xs,PointElement:Cb}),Ur=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],nm=Ur.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Hm(n){return Ur[n%Ur.length]}function qm(n){return nm[n%nm.length]}function Ib(n,i){return n.borderColor=Hm(i),n.backgroundColor=qm(i),++i}function Db(n,i){return n.backgroundColor=n.data.map(()=>Hm(i++)),i}function Pb(n,i){return n.backgroundColor=n.data.map(()=>qm(i++)),i}function Rb(n){let i=0;return(e,t)=>{let o=n.getDatasetMeta(t).controller;o instanceof Jr?i=Db(e,i):o instanceof Dm?i=Pb(e,i):o&&(i=Ib(e,i))}}function om(n){let i;for(i in n)if(n[i].borderColor||n[i].backgroundColor)return!0;return!1}function Ob(n){return n&&(n.borderColor||n.backgroundColor)}var Ab={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,i,e){if(!e.enabled)return;let{data:{datasets:t},options:o}=n.config,{elements:s}=o;if(!e.forceOverride&&(om(t)||Ob(o)||s&&om(s)))return;let a=Rb(n);t.forEach(a)}};function Fb(n,i,e,t,o){let s=o.samples||t;if(s>=e)return n.slice(i,i+e);let a=[],r=(e-2)/(s-2),c=0,l=i+e-1,d=i,u,f,g,_,v;for(a[c++]=n[d],u=0;u<s-2;u++){let y=0,w=0,C,E=Math.floor((u+1)*r)+1+i,T=Math.min(Math.floor((u+2)*r)+1,e)+i,k=T-E;for(C=E;C<T;C++)y+=n[C].x,w+=n[C].y;y/=k,w/=k;let I=Math.floor(u*r)+1+i,F=Math.min(Math.floor((u+1)*r)+1,e)+i,{x:D,y:N}=n[d];for(g=_=-1,C=I;C<F;C++)_=.5*Math.abs((D-y)*(n[C].y-N)-(D-n[C].x)*(w-N)),_>g&&(g=_,f=n[C],v=C);a[c++]=f,d=v}return a[c++]=n[l],a}function Lb(n,i,e,t){let o=0,s=0,a,r,c,l,d,u,f,g,_,v,y=[],w=i+e-1,C=n[i].x,T=n[w].x-C;for(a=i;a<i+e;++a){r=n[a],c=(r.x-C)/T*t,l=r.y;let k=c|0;if(k===d)l<_?(_=l,u=a):l>v&&(v=l,f=a),o=(s*o+r.x)/++s;else{let I=a-1;if(!Z(u)&&!Z(f)){let F=Math.min(u,f),D=Math.max(u,f);F!==g&&F!==I&&y.push(lt(le({},n[F]),{x:o})),D!==g&&D!==I&&y.push(lt(le({},n[D]),{x:o}))}a>0&&I!==g&&y.push(n[I]),y.push(r),d=k,s=0,_=v=l,u=f=g=a}}return y}function Wm(n){if(n._decimated){let i=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function sm(n){n.data.datasets.forEach(i=>{Wm(i)})}function Nb(n,i){let e=i.length,t=0,o,{iScale:s}=n,{min:a,max:r,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(t=Re(Ut(i,s.axis,a).lo,0,e-1)),l?o=Re(Ut(i,s.axis,r).hi+1,t,e)-t:o=e-t,{start:t,count:o}}var zb={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,i,e)=>{if(!e.enabled){sm(n);return}let t=n.width;n.data.datasets.forEach((o,s)=>{let{_data:a,indexAxis:r}=o,c=n.getDatasetMeta(s),l=a||o.data;if(Hn([r,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let d=n.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:u,count:f}=Nb(c,l),g=e.threshold||4*t;if(f<=g){Wm(o);return}Z(a)&&(o._data=l,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let _;switch(e.algorithm){case"lttb":_=Fb(l,u,f,t,e);break;case"min-max":_=Lb(l,u,f,t);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}o._decimated=_})},destroy(n){sm(n)}};function Bb(n,i,e){let t=n.segments,o=n.points,s=i.points,a=[];for(let r of t){let{start:c,end:l}=r;l=ec(c,l,o);let d=$r(e,o[c],o[l],r.loop);if(!i.segments){a.push({source:r,target:d,start:o[c],end:o[l]});continue}let u=Cr(i,d);for(let f of u){let g=$r(e,s[f.start],s[f.end],f.loop),_=xr(r,o,g);for(let v of _)a.push({source:v,target:f,start:{[e]:am(d,g,"start",Math.max)},end:{[e]:am(d,g,"end",Math.min)}})}}return a}function $r(n,i,e,t){if(t)return;let o=i[n],s=e[n];return n==="angle"&&(o=Je(o),s=Je(s)),{property:n,start:o,end:s}}function jb(n,i){let{x:e=null,y:t=null}=n||{},o=i.points,s=[];return i.segments.forEach(({start:a,end:r})=>{r=ec(a,r,o);let c=o[a],l=o[r];t!==null?(s.push({x:c.x,y:t}),s.push({x:l.x,y:t})):e!==null&&(s.push({x:e,y:c.y}),s.push({x:e,y:l.y}))}),s}function ec(n,i,e){for(;i>n;i--){let t=e[i];if(!isNaN(t.x)&&!isNaN(t.y))break}return i}function am(n,i,e,t){return n&&i?t(n[e],i[e]):n?n[e]:i?i[e]:0}function Um(n,i){let e=[],t=!1;return me(n)?(t=!0,e=n):e=jb(n,i),e.length?new Xs({points:e,options:{tension:0},_loop:t,_fullLoop:t}):null}function rm(n){return n&&n.fill!==!1}function Vb(n,i,e){let o=n[i].fill,s=[i],a;if(!e)return o;for(;o!==!1&&s.indexOf(o)===-1;){if(!ve(o))return o;if(a=n[o],!a)return!1;if(a.visible)return o;s.push(o),o=a.fill}return!1}function Hb(n,i,e){let t=$b(n);if(Y(t))return isNaN(t.value)?!1:t;let o=parseFloat(t);return ve(o)&&Math.floor(o)===o?qb(t[0],i,o,e):["origin","start","end","stack","shape"].indexOf(t)>=0&&t}function qb(n,i,e,t){return(n==="-"||n==="+")&&(e=i+e),e===i||e<0||e>=t?!1:e}function Wb(n,i){let e=null;return n==="start"?e=i.bottom:n==="end"?e=i.top:Y(n)?e=i.getPixelForValue(n.value):i.getBasePixel&&(e=i.getBasePixel()),e}function Ub(n,i,e){let t;return n==="start"?t=e:n==="end"?t=i.options.reverse?i.min:i.max:Y(n)?t=n.value:t=i.getBaseValue(),t}function $b(n){let i=n.options,e=i.fill,t=$(e&&e.target,e);return t===void 0&&(t=!!i.backgroundColor),t===!1||t===null?!1:t===!0?"origin":t}function Gb(n){let{scale:i,index:e,line:t}=n,o=[],s=t.segments,a=t.points,r=Qb(i,e);r.push(Um({x:null,y:i.bottom},t));for(let c=0;c<s.length;c++){let l=s[c];for(let d=l.start;d<=l.end;d++)Kb(o,a[d],r)}return new Xs({points:o,options:{}})}function Qb(n,i){let e=[],t=n.getMatchingVisibleMetas("line");for(let o=0;o<t.length;o++){let s=t[o];if(s.index===i)break;s.hidden||e.unshift(s.dataset)}return e}function Kb(n,i,e){let t=[];for(let o=0;o<e.length;o++){let s=e[o],{first:a,last:r,point:c}=Yb(s,i,"x");if(!(!c||a&&r)){if(a)t.unshift(c);else if(n.push(c),!r)break}}n.push(...t)}function Yb(n,i,e){let t=n.interpolate(i,e);if(!t)return{};let o=t[e],s=n.segments,a=n.points,r=!1,c=!1;for(let l=0;l<s.length;l++){let d=s[l],u=a[d.start][e],f=a[d.end][e];if(Qt(o,u,f)){r=o===u,c=o===f;break}}return{first:r,last:c,point:t}}var Ks=class{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,e,t){let{x:o,y:s,radius:a}=this;return e=e||{start:0,end:pe},i.arc(o,s,a,e.end,e.start,!0),!t.bounds}interpolate(i){let{x:e,y:t,radius:o}=this,s=i.angle;return{x:e+Math.cos(s)*o,y:t+Math.sin(s)*o,angle:s}}};function Xb(n){let{chart:i,fill:e,line:t}=n;if(ve(e))return Zb(i,e);if(e==="stack")return Gb(n);if(e==="shape")return!0;let o=Jb(n);return o instanceof Ks?o:Um(o,t)}function Zb(n,i){let e=n.getDatasetMeta(i);return e&&n.isDatasetVisible(i)?e.dataset:null}function Jb(n){return(n.scale||{}).getPointPositionForValue?tv(n):ev(n)}function ev(n){let{scale:i={},fill:e}=n,t=Wb(e,i);if(ve(t)){let o=i.isHorizontal();return{x:o?t:null,y:o?null:t}}return null}function tv(n){let{scale:i,fill:e}=n,t=i.options,o=i.getLabels().length,s=t.reverse?i.max:i.min,a=Ub(e,i,s),r=[];if(t.grid.circular){let c=i.getPointPositionForValue(0,s);return new Ks({x:c.x,y:c.y,radius:i.getDistanceFromCenterForValue(a)})}for(let c=0;c<o;++c)r.push(i.getPointPositionForValue(c,a));return r}function Pr(n,i,e){let t=Xb(i),{line:o,scale:s,axis:a}=i,r=o.options,c=r.fill,l=r.backgroundColor,{above:d=l,below:u=l}=c||{};t&&o.points.length&&(vo(n,e),iv(n,{line:o,target:t,above:d,below:u,area:e,scale:s,axis:a}),yo(n))}function iv(n,i){let{line:e,target:t,above:o,below:s,area:a,scale:r}=i,c=e._loop?"angle":i.axis;n.save(),c==="x"&&s!==o&&(cm(n,t,a.top),lm(n,{line:e,target:t,color:o,scale:r,property:c}),n.restore(),n.save(),cm(n,t,a.bottom)),lm(n,{line:e,target:t,color:s,scale:r,property:c}),n.restore()}function cm(n,i,e){let{segments:t,points:o}=i,s=!0,a=!1;n.beginPath();for(let r of t){let{start:c,end:l}=r,d=o[c],u=o[ec(c,l,o)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,e),n.lineTo(d.x,d.y)),a=!!i.pathSegment(n,r,{move:a}),a?n.closePath():n.lineTo(u.x,e)}n.lineTo(i.first().x,e),n.closePath(),n.clip()}function lm(n,i){let{line:e,target:t,property:o,color:s,scale:a}=i,r=Bb(e,t,o);for(let{source:c,target:l,start:d,end:u}of r){let{style:{backgroundColor:f=s}={}}=c,g=t!==!0;n.save(),n.fillStyle=f,nv(n,a,g&&$r(o,d,u)),n.beginPath();let _=!!e.pathSegment(n,c),v;if(g){_?n.closePath():dm(n,t,u,o);let y=!!t.pathSegment(n,l,{move:_,reverse:!0});v=_&&y,v||dm(n,t,d,o)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function nv(n,i,e){let{top:t,bottom:o}=i.chart.chartArea,{property:s,start:a,end:r}=e||{};s==="x"&&(n.beginPath(),n.rect(a,t,r-a,o-t),n.clip())}function dm(n,i,e,t){let o=i.interpolate(e,t);o&&n.lineTo(o.x,o.y)}var ov={id:"filler",afterDatasetsUpdate(n,i,e){let t=(n.data.datasets||[]).length,o=[],s,a,r,c;for(a=0;a<t;++a)s=n.getDatasetMeta(a),r=s.dataset,c=null,r&&r.options&&r instanceof Xs&&(c={visible:n.isDatasetVisible(a),index:a,fill:Hb(r,a,t),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:r}),s.$filler=c,o.push(c);for(a=0;a<t;++a)c=o[a],!(!c||c.fill===!1)&&(c.fill=Vb(o,a,e.propagate))},beforeDraw(n,i,e){let t=e.drawTime==="beforeDraw",o=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=o.length-1;a>=0;--a){let r=o[a].$filler;r&&(r.line.updateControlPoints(s,r.axis),t&&r.fill&&Pr(n.ctx,r,s))}},beforeDatasetsDraw(n,i,e){if(e.drawTime!=="beforeDatasetsDraw")return;let t=n.getSortedVisibleDatasetMetas();for(let o=t.length-1;o>=0;--o){let s=t[o].$filler;rm(s)&&Pr(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,i,e){let t=i.meta.$filler;!rm(t)||e.drawTime!=="beforeDatasetDraw"||Pr(n.ctx,t,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},hm=(n,i)=>{let{boxHeight:e=i,boxWidth:t=i}=n;return n.usePointStyle&&(e=Math.min(e,i),t=n.pointStyleWidth||Math.min(t,i)),{boxWidth:t,boxHeight:e,itemHeight:Math.max(i,e)}},sv=(n,i)=>n!==null&&i!==null&&n.datasetIndex===i.datasetIndex&&n.index===i.index,Ys=class extends Et{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e,t){this.maxWidth=i,this.maxHeight=e,this._margins=t,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let i=this.options.labels||{},e=ce(i.generateLabels,[this.chart],this)||[];i.filter&&(e=e.filter(t=>i.filter(t,this.chart.data))),i.sort&&(e=e.sort((t,o)=>i.sort(t,o,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:i,ctx:e}=this;if(!i.display){this.width=this.height=0;return}let t=i.labels,o=Ie(t.font),s=o.size,a=this._computeTitleHeight(),{boxWidth:r,itemHeight:c}=hm(t,s),l,d;e.font=o.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(a,s,r,c)+10):(d=this.maxHeight,l=this._fitCols(a,o,r,c)+10),this.width=Math.min(l,i.maxWidth||this.maxWidth),this.height=Math.min(d,i.maxHeight||this.maxHeight)}_fitRows(i,e,t,o){let{ctx:s,maxWidth:a,options:{labels:{padding:r}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],d=o+r,u=i;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-d;return this.legendItems.forEach((_,v)=>{let y=t+e/2+s.measureText(_.text).width;(v===0||l[l.length-1]+y+2*r>a)&&(u+=d,l[l.length-(v>0?0:1)]=0,g+=d,f++),c[v]={left:0,top:g,row:f,width:y,height:o},l[l.length-1]+=y+r}),u}_fitCols(i,e,t,o){let{ctx:s,maxHeight:a,options:{labels:{padding:r}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],d=a-i,u=r,f=0,g=0,_=0,v=0;return this.legendItems.forEach((y,w)=>{let{itemWidth:C,itemHeight:E}=av(t,e,s,y,o);w>0&&g+E+2*r>d&&(u+=f+r,l.push({width:f,height:g}),_+=f+r,v++,f=g=0),c[w]={left:_,top:g,col:v,width:C,height:E},f=Math.max(f,C),g+=E+r}),u+=f,l.push({width:f,height:g}),u}adjustHitBoxes(){if(!this.options.display)return;let i=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:t,labels:{padding:o},rtl:s}}=this,a=Xi(s,this.left,this.width);if(this.isHorizontal()){let r=0,c=je(t,this.left+o,this.right-this.lineWidths[r]);for(let l of e)r!==l.row&&(r=l.row,c=je(t,this.left+o,this.right-this.lineWidths[r])),l.top+=this.top+i+o,l.left=a.leftForLtr(a.x(c),l.width),c+=l.width+o}else{let r=0,c=je(t,this.top+i+o,this.bottom-this.columnSizes[r].height);for(let l of e)l.col!==r&&(r=l.col,c=je(t,this.top+i+o,this.bottom-this.columnSizes[r].height)),l.top=c,l.left+=this.left+o,l.left=a.leftForLtr(a.x(l.left),l.width),c+=l.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let i=this.ctx;vo(i,this),this._draw(),yo(i)}}_draw(){let{options:i,columnSizes:e,lineWidths:t,ctx:o}=this,{align:s,labels:a}=i,r=ye.color,c=Xi(i.rtl,this.left,this.width),l=Ie(a.font),{padding:d}=a,u=l.size,f=u/2,g;this.drawTitle(),o.textAlign=c.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=l.string;let{boxWidth:_,boxHeight:v,itemHeight:y}=hm(a,u),w=function(I,F,D){if(isNaN(_)||_<=0||isNaN(v)||v<0)return;o.save();let N=$(D.lineWidth,1);if(o.fillStyle=$(D.fillStyle,r),o.lineCap=$(D.lineCap,"butt"),o.lineDashOffset=$(D.lineDashOffset,0),o.lineJoin=$(D.lineJoin,"miter"),o.lineWidth=N,o.strokeStyle=$(D.strokeStyle,r),o.setLineDash($(D.lineDash,[])),a.usePointStyle){let q={radius:v*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},W=c.xPlus(I,_/2),U=F+f;hr(o,q,W,U,a.pointStyleWidth&&_)}else{let q=F+Math.max((u-v)/2,0),W=c.leftForLtr(I,_),U=Ri(D.borderRadius);o.beginPath(),Object.values(U).some(Me=>Me!==0)?Vn(o,{x:W,y:q,w:_,h:v,radius:U}):o.rect(W,q,_,v),o.fill(),N!==0&&o.stroke()}o.restore()},C=function(I,F,D){Pi(o,D.text,I,F+y/2,l,{strikethrough:D.hidden,textAlign:c.textAlign(D.textAlign)})},E=this.isHorizontal(),T=this._computeTitleHeight();E?g={x:je(s,this.left+d,this.right-t[0]),y:this.top+d+T,line:0}:g={x:this.left+d,y:je(s,this.top+T+d,this.bottom-e[0].height),line:0},vr(this.ctx,i.textDirection);let k=y+d;this.legendItems.forEach((I,F)=>{o.strokeStyle=I.fontColor,o.fillStyle=I.fontColor;let D=o.measureText(I.text).width,N=c.textAlign(I.textAlign||(I.textAlign=a.textAlign)),q=_+f+D,W=g.x,U=g.y;c.setWidth(this.width),E?F>0&&W+q+d>this.right&&(U=g.y+=k,g.line++,W=g.x=je(s,this.left+d,this.right-t[g.line])):F>0&&U+k>this.bottom&&(W=g.x=W+e[g.line].width+d,g.line++,U=g.y=je(s,this.top+T+d,this.bottom-e[g.line].height));let Me=c.x(W);if(w(Me,U,I),W=dh(N,W+_+f,E?W+q:this.right,i.rtl),C(c.x(W),U,I),E)g.x+=q+d;else if(typeof I.text!="string"){let He=l.lineHeight;g.y+=$m(I,He)+d}else g.y+=k}),yr(this.ctx,i.textDirection)}drawTitle(){let i=this.options,e=i.title,t=Ie(e.font),o=Ve(e.padding);if(!e.display)return;let s=Xi(i.rtl,this.left,this.width),a=this.ctx,r=e.position,c=t.size/2,l=o.top+c,d,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+l,u=je(i.align,u,this.right-f);else{let _=this.columnSizes.reduce((v,y)=>Math.max(v,y.height),0);d=l+je(i.align,this.top,this.bottom-_-i.labels.padding-this._computeTitleHeight())}let g=je(r,u,u+f);a.textAlign=s.textAlign(Ts(r)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=t.string,Pi(a,e.text,g,d,t)}_computeTitleHeight(){let i=this.options.title,e=Ie(i.font),t=Ve(i.padding);return i.display?e.lineHeight+t.height:0}_getLegendItemAt(i,e){let t,o,s;if(Qt(i,this.left,this.right)&&Qt(e,this.top,this.bottom)){for(s=this.legendHitBoxes,t=0;t<s.length;++t)if(o=s[t],Qt(i,o.left,o.left+o.width)&&Qt(e,o.top,o.top+o.height))return this.legendItems[t]}return null}handleEvent(i){let e=this.options;if(!lv(i.type,e))return;let t=this._getLegendItemAt(i.x,i.y);if(i.type==="mousemove"||i.type==="mouseout"){let o=this._hoveredItem,s=sv(o,t);o&&!s&&ce(e.onLeave,[i,o,this],this),this._hoveredItem=t,t&&!s&&ce(e.onHover,[i,t,this],this)}else t&&ce(e.onClick,[i,t,this],this)}};function av(n,i,e,t,o){let s=rv(t,n,i,e),a=cv(o,t,i.lineHeight);return{itemWidth:s,itemHeight:a}}function rv(n,i,e,t){let o=n.text;return o&&typeof o!="string"&&(o=o.reduce((s,a)=>s.length>a.length?s:a)),i+e.size/2+t.measureText(o).width}function cv(n,i,e){let t=n;return typeof i.text!="string"&&(t=$m(i,e)),t}function $m(n,i){let e=n.text?n.text.length:0;return i*e}function lv(n,i){return!!((n==="mousemove"||n==="mouseout")&&(i.onHover||i.onLeave)||i.onClick&&(n==="click"||n==="mouseup"))}var dv={id:"legend",_element:Ys,start(n,i,e){let t=n.legend=new Ys({ctx:n.ctx,options:e,chart:n});Ge.configure(n,t,e),Ge.addBox(n,t)},stop(n){Ge.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,i,e){let t=n.legend;Ge.configure(n,t,e),t.options=e},afterUpdate(n){let i=n.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(n,i){i.replay||n.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,i,e){let t=i.datasetIndex,o=e.chart;o.isDatasetVisible(t)?(o.hide(t),i.hidden=!0):(o.show(t),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let i=n.data.datasets,{labels:{usePointStyle:e,pointStyle:t,textAlign:o,color:s,useBorderRadius:a,borderRadius:r}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(e?0:void 0),d=Ve(l.borderWidth);return{text:i[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:t||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:a&&(r||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Io=class extends Et{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e){let t=this.options;if(this.left=0,this.top=0,!t.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=i,this.height=this.bottom=e;let o=me(t.text)?t.text.length:1;this._padding=Ve(t.padding);let s=o*Ie(t.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let i=this.options.position;return i==="top"||i==="bottom"}_drawArgs(i){let{top:e,left:t,bottom:o,right:s,options:a}=this,r=a.align,c=0,l,d,u;return this.isHorizontal()?(d=je(r,t,s),u=e+i,l=s-t):(a.position==="left"?(d=t+i,u=je(r,o,e),c=ue*-.5):(d=s-i,u=je(r,e,o),c=ue*.5),l=o-e),{titleX:d,titleY:u,maxWidth:l,rotation:c}}draw(){let i=this.ctx,e=this.options;if(!e.display)return;let t=Ie(e.font),s=t.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:c,rotation:l}=this._drawArgs(s);Pi(i,e.text,0,0,t,{color:e.color,maxWidth:c,rotation:l,textAlign:Ts(e.align),textBaseline:"middle",translation:[a,r]})}};function hv(n,i){let e=new Io({ctx:n.ctx,options:i,chart:n});Ge.configure(n,e,i),Ge.addBox(n,e),n.titleBlock=e}var mv={id:"title",_element:Io,start(n,i,e){hv(n,e)},stop(n){let i=n.titleBlock;Ge.removeBox(n,i),delete n.titleBlock},beforeUpdate(n,i,e){let t=n.titleBlock;Ge.configure(n,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},js=new WeakMap,uv={id:"subtitle",start(n,i,e){let t=new Io({ctx:n.ctx,options:e,chart:n});Ge.configure(n,t,e),Ge.addBox(n,t),js.set(n,t)},stop(n){Ge.removeBox(n,js.get(n)),js.delete(n)},beforeUpdate(n,i,e){let t=js.get(n);Ge.configure(n,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Eo={average(n){if(!n.length)return!1;let i,e,t=0,o=0,s=0;for(i=0,e=n.length;i<e;++i){let a=n[i].element;if(a&&a.hasValue()){let r=a.tooltipPosition();t+=r.x,o+=r.y,++s}}return{x:t/s,y:o/s}},nearest(n,i){if(!n.length)return!1;let e=i.x,t=i.y,o=Number.POSITIVE_INFINITY,s,a,r;for(s=0,a=n.length;s<a;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),d=ws(i,l);d<o&&(o=d,r=c)}}if(r){let c=r.tooltipPosition();e=c.x,t=c.y}return{x:e,y:t}}};function Kt(n,i){return i&&(me(i)?Array.prototype.push.apply(n,i):n.push(i)),n}function mi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function pv(n,i){let{element:e,datasetIndex:t,index:o}=i,s=n.getDatasetMeta(t).controller,{label:a,value:r}=s.getLabelAndValue(o);return{chart:n,label:a,parsed:s.getParsed(o),raw:n.data.datasets[t].data[o],formattedValue:r,dataset:s.getDataset(),dataIndex:o,datasetIndex:t,element:e}}function mm(n,i){let e=n.chart.ctx,{body:t,footer:o,title:s}=n,{boxWidth:a,boxHeight:r}=i,c=Ie(i.bodyFont),l=Ie(i.titleFont),d=Ie(i.footerFont),u=s.length,f=o.length,g=t.length,_=Ve(i.padding),v=_.height,y=0,w=t.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,u&&(v+=u*l.lineHeight+(u-1)*i.titleSpacing+i.titleMarginBottom),w){let T=i.displayColors?Math.max(r,c.lineHeight):c.lineHeight;v+=g*T+(w-g)*c.lineHeight+(w-1)*i.bodySpacing}f&&(v+=i.footerMarginTop+f*d.lineHeight+(f-1)*i.footerSpacing);let C=0,E=function(T){y=Math.max(y,e.measureText(T).width+C)};return e.save(),e.font=l.string,oe(n.title,E),e.font=c.string,oe(n.beforeBody.concat(n.afterBody),E),C=i.displayColors?a+2+i.boxPadding:0,oe(t,T=>{oe(T.before,E),oe(T.lines,E),oe(T.after,E)}),C=0,e.font=d.string,oe(n.footer,E),e.restore(),y+=_.width,{width:y,height:v}}function fv(n,i){let{y:e,height:t}=i;return e<t/2?"top":e>n.height-t/2?"bottom":"center"}function gv(n,i,e,t){let{x:o,width:s}=t,a=e.caretSize+e.caretPadding;if(n==="left"&&o+s+a>i.width||n==="right"&&o-s-a<0)return!0}function _v(n,i,e,t){let{x:o,width:s}=e,{width:a,chartArea:{left:r,right:c}}=n,l="center";return t==="center"?l=o<=(r+c)/2?"left":"right":o<=s/2?l="left":o>=a-s/2&&(l="right"),gv(l,n,i,e)&&(l="center"),l}function um(n,i,e){let t=e.yAlign||i.yAlign||fv(n,e);return{xAlign:e.xAlign||i.xAlign||_v(n,i,e,t),yAlign:t}}function bv(n,i){let{x:e,width:t}=n;return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function vv(n,i,e){let{y:t,height:o}=n;return i==="top"?t+=e:i==="bottom"?t-=o+e:t-=o/2,t}function pm(n,i,e,t){let{caretSize:o,caretPadding:s,cornerRadius:a}=n,{xAlign:r,yAlign:c}=e,l=o+s,{topLeft:d,topRight:u,bottomLeft:f,bottomRight:g}=Ri(a),_=bv(i,r),v=vv(i,c,l);return c==="center"?r==="left"?_+=l:r==="right"&&(_-=l):r==="left"?_-=Math.max(d,f)+o:r==="right"&&(_+=Math.max(u,g)+o),{x:Re(_,0,t.width-i.width),y:Re(v,0,t.height-i.height)}}function Vs(n,i,e){let t=Ve(e.padding);return i==="center"?n.x+n.width/2:i==="right"?n.x+n.width-t.right:n.x+t.left}function fm(n){return Kt([],mi(n))}function yv(n,i,e){return di(n,{tooltip:i,tooltipItems:e,type:"tooltip"})}function gm(n,i){let e=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return e?n.override(e):n}var Gm={beforeTitle:Gt,title(n){if(n.length>0){let i=n[0],e=i.chart.data.labels,t=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return i.dataset.label||"";if(i.label)return i.label;if(t>0&&i.dataIndex<t)return e[i.dataIndex]}return""},afterTitle:Gt,beforeBody:Gt,beforeLabel:Gt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let i=n.dataset.label||"";i&&(i+=": ");let e=n.formattedValue;return Z(e)||(i+=e),i},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Gt,afterBody:Gt,beforeFooter:Gt,footer:Gt,afterFooter:Gt};function tt(n,i,e,t){let o=n[i].call(e,t);return typeof o>"u"?Gm[i].call(e,t):o}var _m=(()=>{class n extends Et{static positioners=Eo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,o=this.options.setContext(this.getContext()),s=o.enabled&&t.options.animation&&o.animations,a=new Us(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=yv(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){let{callbacks:o}=t,s=tt(o,"beforeTitle",this,e),a=tt(o,"title",this,e),r=tt(o,"afterTitle",this,e),c=[];return c=Kt(c,mi(s)),c=Kt(c,mi(a)),c=Kt(c,mi(r)),c}getBeforeBody(e,t){return fm(tt(t.callbacks,"beforeBody",this,e))}getBody(e,t){let{callbacks:o}=t,s=[];return oe(e,a=>{let r={before:[],lines:[],after:[]},c=gm(o,a);Kt(r.before,mi(tt(c,"beforeLabel",this,a))),Kt(r.lines,tt(c,"label",this,a)),Kt(r.after,mi(tt(c,"afterLabel",this,a))),s.push(r)}),s}getAfterBody(e,t){return fm(tt(t.callbacks,"afterBody",this,e))}getFooter(e,t){let{callbacks:o}=t,s=tt(o,"beforeFooter",this,e),a=tt(o,"footer",this,e),r=tt(o,"afterFooter",this,e),c=[];return c=Kt(c,mi(s)),c=Kt(c,mi(a)),c=Kt(c,mi(r)),c}_createItems(e){let t=this._active,o=this.chart.data,s=[],a=[],r=[],c=[],l,d;for(l=0,d=t.length;l<d;++l)c.push(pv(this.chart,t[l]));return e.filter&&(c=c.filter((u,f,g)=>e.filter(u,f,g,o))),e.itemSort&&(c=c.sort((u,f)=>e.itemSort(u,f,o))),oe(c,u=>{let f=gm(e.callbacks,u);s.push(tt(f,"labelColor",this,u)),a.push(tt(f,"labelPointStyle",this,u)),r.push(tt(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=r,this.dataPoints=c,c}update(e,t){let o=this.options.setContext(this.getContext()),s=this._active,a,r=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{let c=Eo[o.position].call(this,s,this._eventPosition);r=this._createItems(o),this.title=this.getTitle(r,o),this.beforeBody=this.getBeforeBody(r,o),this.body=this.getBody(r,o),this.afterBody=this.getAfterBody(r,o),this.footer=this.getFooter(r,o);let l=this._size=mm(this,o),d=Object.assign({},c,l),u=um(this.chart,o,d),f=pm(o,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=r,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&o.external&&o.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,o,s){let a=this.getCaretPosition(e,o,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,o){let{xAlign:s,yAlign:a}=this,{caretSize:r,cornerRadius:c}=o,{topLeft:l,topRight:d,bottomLeft:u,bottomRight:f}=Ri(c),{x:g,y:_}=e,{width:v,height:y}=t,w,C,E,T,k,I;return a==="center"?(k=_+y/2,s==="left"?(w=g,C=w-r,T=k+r,I=k-r):(w=g+v,C=w+r,T=k-r,I=k+r),E=w):(s==="left"?C=g+Math.max(l,u)+r:s==="right"?C=g+v-Math.max(d,f)-r:C=this.caretX,a==="top"?(T=_,k=T-r,w=C-r,E=C+r):(T=_+y,k=T+r,w=C+r,E=C-r),I=T),{x1:w,x2:C,x3:E,y1:T,y2:k,y3:I}}drawTitle(e,t,o){let s=this.title,a=s.length,r,c,l;if(a){let d=Xi(o.rtl,this.x,this.width);for(e.x=Vs(this,o.titleAlign,o),t.textAlign=d.textAlign(o.titleAlign),t.textBaseline="middle",r=Ie(o.titleFont),c=o.titleSpacing,t.fillStyle=o.titleColor,t.font=r.string,l=0;l<a;++l)t.fillText(s[l],d.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+c,l+1===a&&(e.y+=o.titleMarginBottom-c)}}_drawColorBox(e,t,o,s,a){let r=this.labelColors[o],c=this.labelPointStyles[o],{boxHeight:l,boxWidth:d}=a,u=Ie(a.bodyFont),f=Vs(this,"left",a),g=s.x(f),_=l<u.lineHeight?(u.lineHeight-l)/2:0,v=t.y+_;if(a.usePointStyle){let y={radius:Math.min(d,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},w=s.leftForLtr(g,d)+d/2,C=v+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Ds(e,y,w,C),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Ds(e,y,w,C)}else{e.lineWidth=Y(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;let y=s.leftForLtr(g,d),w=s.leftForLtr(s.xPlus(g,1),d-2),C=Ri(r.borderRadius);Object.values(C).some(E=>E!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Vn(e,{x:y,y:v,w:d,h:l,radius:C}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Vn(e,{x:w,y:v+1,w:d-2,h:l-2,radius:C}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(y,v,d,l),e.strokeRect(y,v,d,l),e.fillStyle=r.backgroundColor,e.fillRect(w,v+1,d-2,l-2))}e.fillStyle=this.labelTextColors[o]}drawBody(e,t,o){let{body:s}=this,{bodySpacing:a,bodyAlign:r,displayColors:c,boxHeight:l,boxWidth:d,boxPadding:u}=o,f=Ie(o.bodyFont),g=f.lineHeight,_=0,v=Xi(o.rtl,this.x,this.width),y=function(N){t.fillText(N,v.x(e.x+_),e.y+g/2),e.y+=g+a},w=v.textAlign(r),C,E,T,k,I,F,D;for(t.textAlign=r,t.textBaseline="middle",t.font=f.string,e.x=Vs(this,w,o),t.fillStyle=o.bodyColor,oe(this.beforeBody,y),_=c&&w!=="right"?r==="center"?d/2+u:d+2+u:0,k=0,F=s.length;k<F;++k){for(C=s[k],E=this.labelTextColors[k],t.fillStyle=E,oe(C.before,y),T=C.lines,c&&T.length&&(this._drawColorBox(t,e,k,v,o),g=Math.max(f.lineHeight,l)),I=0,D=T.length;I<D;++I)y(T[I]),g=f.lineHeight;oe(C.after,y)}_=0,g=f.lineHeight,oe(this.afterBody,y),e.y-=a}drawFooter(e,t,o){let s=this.footer,a=s.length,r,c;if(a){let l=Xi(o.rtl,this.x,this.width);for(e.x=Vs(this,o.footerAlign,o),e.y+=o.footerMarginTop,t.textAlign=l.textAlign(o.footerAlign),t.textBaseline="middle",r=Ie(o.footerFont),t.fillStyle=o.footerColor,t.font=r.string,c=0;c<a;++c)t.fillText(s[c],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+o.footerSpacing}}drawBackground(e,t,o,s){let{xAlign:a,yAlign:r}=this,{x:c,y:l}=e,{width:d,height:u}=o,{topLeft:f,topRight:g,bottomLeft:_,bottomRight:v}=Ri(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(c+f,l),r==="top"&&this.drawCaret(e,t,o,s),t.lineTo(c+d-g,l),t.quadraticCurveTo(c+d,l,c+d,l+g),r==="center"&&a==="right"&&this.drawCaret(e,t,o,s),t.lineTo(c+d,l+u-v),t.quadraticCurveTo(c+d,l+u,c+d-v,l+u),r==="bottom"&&this.drawCaret(e,t,o,s),t.lineTo(c+_,l+u),t.quadraticCurveTo(c,l+u,c,l+u-_),r==="center"&&a==="left"&&this.drawCaret(e,t,o,s),t.lineTo(c,l+f),t.quadraticCurveTo(c,l,c+f,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,o=this.$animations,s=o&&o.x,a=o&&o.y;if(s||a){let r=Eo[e.position].call(this,this._active,this._eventPosition);if(!r)return;let c=this._size=mm(this,e),l=Object.assign({},r,this._size),d=um(t,e,l),u=pm(e,l,d,t);(s._to!==u.x||a._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),o=this.opacity;if(!o)return;this._updateAnimationTarget(t);let s={width:this.width,height:this.height},a={x:this.x,y:this.y};o=Math.abs(o)<.001?0:o;let r=Ve(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=o,this.drawBackground(a,e,s,t),vr(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),yr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let o=this._active,s=e.map(({datasetIndex:c,index:l})=>{let d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[l],index:l}}),a=!_o(o,s),r=this._positionChanged(s,t);(a||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,o=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,o),c=this._positionChanged(r,e),l=t||!_o(r,a)||c;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,o,s){let a=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let r=this.chart.getElementsAtEventForMode(e,a.mode,a,o);return a.reverse&&r.reverse(),r}_positionChanged(e,t){let{caretX:o,caretY:s,options:a}=this,r=Eo[a.position].call(this,e,t);return r!==!1&&(o!==r.x||s!==r.y)}}return n})(),xv={id:"tooltip",_element:_m,positioners:Eo,afterInit(n,i,e){e&&(n.tooltip=new _m({chart:n,options:e}))},beforeUpdate(n,i,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,i,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let i=n.tooltip;if(i&&i._willRender()){let e={tooltip:i};if(n.notifyPlugins("beforeTooltipDraw",lt(le({},e),{cancelable:!0}))===!1)return;i.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,i){if(n.tooltip){let e=i.replay;n.tooltip.handleEvent(i.event,e,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,i)=>i.bodyFont.size,boxWidth:(n,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Gm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Cv=Object.freeze({__proto__:null,Colors:Ab,Decimation:zb,Filler:ov,Legend:dv,SubTitle:uv,Title:mv,Tooltip:xv}),wv=(n,i,e,t)=>(typeof i=="string"?(e=n.push(i)-1,t.unshift({index:e,label:i})):isNaN(i)&&(e=null),e);function Mv(n,i,e,t){let o=n.indexOf(i);if(o===-1)return wv(n,i,e,t);let s=n.lastIndexOf(i);return o!==s?e:o}var Sv=(n,i)=>n===null?null:Re(Math.round(n),0,i);function bm(n){let i=this.getLabels();return n>=0&&n<i.length?i[n]:n}var kv=(()=>{class n extends en{static id="category";static defaults={ticks:{callback:bm}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let o=this.getLabels();for(let{index:s,label:a}of t)o[s]===a&&o.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Z(e))return null;let o=this.getLabels();return t=isFinite(t)&&o[t]===e?t:Mv(o,e,$(t,e),this._addedLabels),Sv(t,o.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:o,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(o=0),t||(s=this.getLabels().length-1)),this.min=o,this.max=s}buildTicks(){let e=this.min,t=this.max,o=this.options.offset,s=[],a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let r=e;r<=t;r++)s.push({value:r});return s}getLabelForValue(e){return bm.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Ev(n,i){let e=[],{bounds:o,step:s,min:a,max:r,precision:c,count:l,maxTicks:d,maxDigits:u,includeBounds:f}=n,g=s||1,_=d-1,{min:v,max:y}=i,w=!Z(a),C=!Z(r),E=!Z(l),T=(y-v)/(u+1),k=Za((y-v)/_/g)*g,I,F,D,N;if(k<1e-14&&!w&&!C)return[{value:v},{value:y}];N=Math.ceil(y/k)-Math.floor(v/k),N>_&&(k=Za(N*k/_/g)*g),Z(c)||(I=Math.pow(10,c),k=Math.ceil(k*I)/I),o==="ticks"?(F=Math.floor(v/k)*k,D=Math.ceil(y/k)*k):(F=v,D=y),w&&C&&s&&nh((r-a)/s,k/1e3)?(N=Math.round(Math.min((r-a)/k,d)),k=(r-a)/N,F=a,D=r):E?(F=w?a:F,D=C?r:D,N=l-1,k=(D-F)/N):(N=(D-F)/k,zn(N,Math.round(N),k/1e3)?N=Math.round(N):N=Math.ceil(N));let q=Math.max(er(k),er(F));I=Math.pow(10,Z(c)?q:c),F=Math.round(F*I)/I,D=Math.round(D*I)/I;let W=0;for(w&&(f&&F!==a?(e.push({value:a}),F<a&&W++,zn(Math.round((F+W*k)*I)/I,a,vm(a,T,n))&&W++):F<a&&W++);W<N;++W){let U=Math.round((F+W*k)*I)/I;if(C&&U>r)break;e.push({value:U})}return C&&f&&D!==r?e.length&&zn(e[e.length-1].value,r,vm(r,T,n))?e[e.length-1].value=r:e.push({value:r}):(!C||D===r)&&e.push({value:D}),e}function vm(n,i,{horizontal:e,minRotation:t}){let o=vt(t),s=(e?Math.sin(o):Math.cos(o))||.001,a=.75*i*(""+n).length;return Math.min(i/s,a)}var Un=class extends en{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,e){return Z(i)||(typeof i=="number"||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){let{beginAtZero:i}=this.options,{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:o,max:s}=this,a=c=>o=e?o:c,r=c=>s=t?s:c;if(i){let c=kt(o),l=kt(s);c<0&&l<0?r(0):c>0&&l>0&&a(0)}if(o===s){let c=s===0?1:Math.abs(s*.05);r(s+c),i||a(o-c)}this.min=o,this.max=s}getTickLimit(){let i=this.options.ticks,{maxTicksLimit:e,stepSize:t}=i,o;return t?(o=Math.ceil(this.max/t)-Math.floor(this.min/t)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${t} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let i=this.options,e=i.ticks,t=this.getTickLimit();t=Math.max(2,t);let o={maxTicks:t,bounds:i.bounds,min:i.min,max:i.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=Ev(o,s);return i.bounds==="ticks"&&Ja(a,this,"value"),i.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){let i=this.ticks,e=this.min,t=this.max;if(super.configure(),this.options.offset&&i.length){let o=(t-e)/Math.max(i.length-1,1)/2;e-=o,t+=o}this._startValue=e,this._endValue=t,this._valueRange=t-e}getLabelForValue(i){return jn(i,this.chart.options.locale,this.options.ticks.format)}},Gr=class extends Un{static id="linear";static defaults={ticks:{callback:bo.formatters.numeric}};determineDataLimits(){let{min:i,max:e}=this.getMinMax(!0);this.min=ve(i)?i:0,this.max=ve(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let i=this.isHorizontal(),e=i?this.width:this.height,t=vt(this.options.ticks.minRotation),o=(i?Math.sin(t):Math.cos(t))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/o))}getPixelForValue(i){return i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}},Do=n=>Math.floor(ci(n)),Ji=(n,i)=>Math.pow(10,Do(n)+i);function ym(n){return n/Math.pow(10,Do(n))===1}function xm(n,i,e){let t=Math.pow(10,e),o=Math.floor(n/t);return Math.ceil(i/t)-o}function Tv(n,i){let e=i-n,t=Do(e);for(;xm(n,i,t)>10;)t++;for(;xm(n,i,t)<10;)t--;return Math.min(t,Do(n))}function Iv(n,{min:i,max:e}){i=et(n.min,i);let t=[],o=Do(i),s=Tv(i,e),a=s<0?Math.pow(10,Math.abs(s)):1,r=Math.pow(10,s),c=o>s?Math.pow(10,o):0,l=Math.round((i-c)*a)/a,d=Math.floor((i-c)/r/10)*r*10,u=Math.floor((l-d)/Math.pow(10,s)),f=et(n.min,Math.round((c+d+u*Math.pow(10,s))*a)/a);for(;f<e;)t.push({value:f,major:ym(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,a=s>=0?1:a),f=Math.round((c+d+u*Math.pow(10,s))*a)/a;let g=et(n.max,f);return t.push({value:g,major:ym(g),significand:u}),t}var Qr=class extends en{static id="logarithmic";static defaults={ticks:{callback:bo.formatters.logarithmic,major:{enabled:!0}}};constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,e){let t=Un.prototype.parse.apply(this,[i,e]);if(t===0){this._zero=!0;return}return ve(t)&&t>0?t:null}determineDataLimits(){let{min:i,max:e}=this.getMinMax(!0);this.min=ve(i)?Math.max(0,i):null,this.max=ve(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ve(this._userMin)&&(this.min=i===Ji(this.min,0)?Ji(this.min,-1):Ji(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:i,maxDefined:e}=this.getUserBounds(),t=this.min,o=this.max,s=r=>t=i?t:r,a=r=>o=e?o:r;t===o&&(t<=0?(s(1),a(10)):(s(Ji(t,-1)),a(Ji(o,1)))),t<=0&&s(Ji(o,-1)),o<=0&&a(Ji(t,1)),this.min=t,this.max=o}buildTicks(){let i=this.options,e={min:this._userMin,max:this._userMax},t=Iv(e,this);return i.bounds==="ticks"&&Ja(t,this,"value"),i.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(i){return i===void 0?"0":jn(i,this.chart.options.locale,this.options.ticks.format)}configure(){let i=this.min;super.configure(),this._startValue=ci(i),this._valueRange=ci(this.max)-ci(i)}getPixelForValue(i){return(i===void 0||i===0)&&(i=this.min),i===null||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:(ci(i)-this._startValue)/this._valueRange)}getValueForPixel(i){let e=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+e*this._valueRange)}};function Kr(n){let i=n.ticks;if(i.display&&n.display){let e=Ve(i.backdropPadding);return $(i.font&&i.font.size,ye.font.size)+e.height}return 0}function Dv(n,i,e){return e=me(e)?e:[e],{w:mh(n,i.string,e),h:e.length*i.lineHeight}}function Cm(n,i,e,t,o){return n===t||n===o?{start:i-e/2,end:i+e/2}:n<t||n>o?{start:i-e,end:i}:{start:i,end:i+e}}function Pv(n){let i={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},i),t=[],o=[],s=n._pointLabels.length,a=n.options.pointLabels,r=a.centerPointLabels?ue/s:0;for(let c=0;c<s;c++){let l=a.setContext(n.getPointLabelContext(c));o[c]=l.padding;let d=n.getPointPosition(c,n.drawingArea+o[c],r),u=Ie(l.font),f=Dv(n.ctx,u,n._pointLabels[c]);t[c]=f;let g=Je(n.getIndexAngle(c)+r),_=Math.round(ks(g)),v=Cm(_,d.x,f.w,0,180),y=Cm(_,d.y,f.h,90,270);Rv(e,i,g,v,y)}n.setCenterPoint(i.l-e.l,e.r-i.r,i.t-e.t,e.b-i.b),n._pointLabelItems=Fv(n,t,o)}function Rv(n,i,e,t,o){let s=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e)),r=0,c=0;t.start<i.l?(r=(i.l-t.start)/s,n.l=Math.min(n.l,i.l-r)):t.end>i.r&&(r=(t.end-i.r)/s,n.r=Math.max(n.r,i.r+r)),o.start<i.t?(c=(i.t-o.start)/a,n.t=Math.min(n.t,i.t-c)):o.end>i.b&&(c=(o.end-i.b)/a,n.b=Math.max(n.b,i.b+c))}function Ov(n,i,e){let t=n.drawingArea,{extra:o,additionalAngle:s,padding:a,size:r}=e,c=n.getPointPosition(i,t+o+a,s),l=Math.round(ks(Je(c.angle+we))),d=zv(c.y,r.h,l),u=Lv(l),f=Nv(c.x,r.w,u);return{visible:!0,x:c.x,y:d,textAlign:u,left:f,top:d,right:f+r.w,bottom:d+r.h}}function Av(n,i){if(!i)return!0;let{left:e,top:t,right:o,bottom:s}=n;return!($t({x:e,y:t},i)||$t({x:e,y:s},i)||$t({x:o,y:t},i)||$t({x:o,y:s},i))}function Fv(n,i,e){let t=[],o=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:r}=s.pointLabels,c={extra:Kr(s)/2,additionalAngle:a?ue/o:0},l;for(let d=0;d<o;d++){c.padding=e[d],c.size=i[d];let u=Ov(n,d,c);t.push(u),r==="auto"&&(u.visible=Av(u,l),u.visible&&(l=u))}return t}function Lv(n){return n===0||n===180?"center":n<180?"left":"right"}function Nv(n,i,e){return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function zv(n,i,e){return e===90||e===270?n-=i/2:(e>270||e<90)&&(n-=i),n}function Bv(n,i,e){let{left:t,top:o,right:s,bottom:a}=e,{backdropColor:r}=i;if(!Z(r)){let c=Ri(i.borderRadius),l=Ve(i.backdropPadding);n.fillStyle=r;let d=t-l.left,u=o-l.top,f=s-t+l.width,g=a-o+l.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),Vn(n,{x:d,y:u,w:f,h:g,radius:c}),n.fill()):n.fillRect(d,u,f,g)}}function jv(n,i){let{ctx:e,options:{pointLabels:t}}=n;for(let o=i-1;o>=0;o--){let s=n._pointLabelItems[o];if(!s.visible)continue;let a=t.setContext(n.getPointLabelContext(o));Bv(e,a,s);let r=Ie(a.font),{x:c,y:l,textAlign:d}=s;Pi(e,n._pointLabels[o],c,l+r.lineHeight/2,r,{color:a.color,textAlign:d,textBaseline:"middle"})}}function Qm(n,i,e,t){let{ctx:o}=n;if(e)o.arc(n.xCenter,n.yCenter,i,0,pe);else{let s=n.getPointPosition(0,i);o.moveTo(s.x,s.y);for(let a=1;a<t;a++)s=n.getPointPosition(a,i),o.lineTo(s.x,s.y)}}function Vv(n,i,e,t,o){let s=n.ctx,a=i.circular,{color:r,lineWidth:c}=i;!a&&!t||!r||!c||e<0||(s.save(),s.strokeStyle=r,s.lineWidth=c,s.setLineDash(o.dash),s.lineDashOffset=o.dashOffset,s.beginPath(),Qm(n,e,a,t),s.closePath(),s.stroke(),s.restore())}function Hv(n,i,e){return di(n,{label:e,index:i,type:"pointLabel"})}var Yr=class extends Un{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let i=this._padding=Ve(Kr(this.options)/2),e=this.width=this.maxWidth-i.width,t=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+e/2+i.left),this.yCenter=Math.floor(this.top+t/2+i.top),this.drawingArea=Math.floor(Math.min(e,t)/2)}determineDataLimits(){let{min:i,max:e}=this.getMinMax(!1);this.min=ve(i)&&!isNaN(i)?i:0,this.max=ve(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Kr(this.options))}generateTickLabels(i){Un.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((e,t)=>{let o=ce(this.options.pointLabels.callback,[e,t],this);return o||o===0?o:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){let i=this.options;i.display&&i.pointLabels.display?Pv(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,e,t,o){this.xCenter+=Math.floor((i-e)/2),this.yCenter+=Math.floor((t-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,e,t,o))}getIndexAngle(i){let e=pe/(this._pointLabels.length||1),t=this.options.startAngle||0;return Je(i*e+vt(t))}getDistanceFromCenterForValue(i){if(Z(i))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*e:(i-this.min)*e}getValueForDistanceFromCenter(i){if(Z(i))return NaN;let e=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(i){let e=this._pointLabels||[];if(i>=0&&i<e.length){let t=e[i];return Hv(this.getContext(),i,t)}}getPointPosition(i,e,t=0){let o=this.getIndexAngle(i)-we+t;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(i,e){return this.getPointPosition(i,this.getDistanceFromCenterForValue(e))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){let{left:e,top:t,right:o,bottom:s}=this._pointLabelItems[i];return{left:e,top:t,right:o,bottom:s}}drawBackground(){let{backgroundColor:i,grid:{circular:e}}=this.options;if(i){let t=this.ctx;t.save(),t.beginPath(),Qm(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),t.closePath(),t.fillStyle=i,t.fill(),t.restore()}}drawGrid(){let i=this.ctx,e=this.options,{angleLines:t,grid:o,border:s}=e,a=this._pointLabels.length,r,c,l;if(e.pointLabels.display&&jv(this,a),o.display&&this.ticks.forEach((d,u)=>{if(u!==0){c=this.getDistanceFromCenterForValue(d.value);let f=this.getContext(u),g=o.setContext(f),_=s.setContext(f);Vv(this,g,c,a,_)}}),t.display){for(i.save(),r=a-1;r>=0;r--){let d=t.setContext(this.getPointLabelContext(r)),{color:u,lineWidth:f}=d;!f||!u||(i.lineWidth=f,i.strokeStyle=u,i.setLineDash(d.borderDash),i.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(r,c),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(l.x,l.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){let i=this.ctx,e=this.options,t=e.ticks;if(!t.display)return;let o=this.getIndexAngle(0),s,a;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(o),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((r,c)=>{if(c===0&&!e.reverse)return;let l=t.setContext(this.getContext(c)),d=Ie(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){i.font=d.string,a=i.measureText(r.label).width,i.fillStyle=l.backdropColor;let u=Ve(l.backdropPadding);i.fillRect(-a/2-u.left,-s-d.size/2-u.top,a+u.width,d.size+u.height)}Pi(i,r.label,0,-s,d,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),i.restore()}drawTitle(){}},Zs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},it=Object.keys(Zs);function wm(n,i){return n-i}function Mm(n,i){if(Z(i))return null;let e=n._adapter,{parser:t,round:o,isoWeekday:s}=n._parseOpts,a=i;return typeof t=="function"&&(a=t(a)),ve(a)||(a=typeof t=="string"?e.parse(a,t):e.parse(a)),a===null?null:(o&&(a=o==="week"&&(Yi(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,o)),+a)}function Sm(n,i,e,t){let o=it.length;for(let s=it.indexOf(n);s<o-1;++s){let a=Zs[it[s]],r=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-i)/(r*a.size))<=t)return it[s]}return it[o-1]}function qv(n,i,e,t,o){for(let s=it.length-1;s>=it.indexOf(e);s--){let a=it[s];if(Zs[a].common&&n._adapter.diff(o,t,a)>=i-1)return a}return it[e?it.indexOf(e):0]}function Wv(n){for(let i=it.indexOf(n)+1,e=it.length;i<e;++i)if(Zs[it[i]].common)return it[i]}function km(n,i,e){if(!e)n[i]=!0;else if(e.length){let{lo:t,hi:o}=Es(e,i),s=e[t]>=i?e[t]:e[o];n[s]=!0}}function Uv(n,i,e,t){let o=n._adapter,s=+o.startOf(i[0].value,t),a=i[i.length-1].value,r,c;for(r=s;r<=a;r=+o.add(r,1,t))c=e[r],c>=0&&(i[c].major=!0);return i}function Em(n,i,e){let t=[],o={},s=i.length,a,r;for(a=0;a<s;++a)r=i[a],o[r]=a,t.push({value:r,major:!1});return s===0||!e?t:Uv(n,t,o,e)}var Xr=(()=>{class n extends en{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let o=e.time||(e.time={}),s=this._adapter=new n_._date(e.adapters.date);s.init(t),Ln(o.displayFormats,s.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Mm(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,o=e.time.unit||"day",{min:s,max:a,minDefined:r,maxDefined:c}=this.getUserBounds();function l(d){!r&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!r||!c)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ve(s)&&!isNaN(s)?s:+t.startOf(Date.now(),o),a=ve(a)&&!isNaN(a)?a:+t.endOf(Date.now(),o)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],o=e[e.length-1]),{min:t,max:o}}buildTicks(){let e=this.options,t=e.time,o=e.ticks,s=o.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let a=this.min,r=this.max,c=ah(s,a,r);return this._unit=t.unit||(o.autoSkip?Sm(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):qv(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!o.major.enabled||this._unit==="year"?void 0:Wv(this._unit),this.initOffsets(s),e.reverse&&c.reverse(),Em(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,o=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?o=a:o=(a-this.getDecimalForValue(e[e.length-2]))/2);let r=e.length<3?.5:.25;t=Re(t,0,r),o=Re(o,0,r),this._offsets={start:t,end:o,factor:1/(t+1+o)}}_generate(){let e=this._adapter,t=this.min,o=this.max,s=this.options,a=s.time,r=a.unit||Sm(a.minUnit,t,o,this._getLabelCapacity(t)),c=$(s.ticks.stepSize,1),l=r==="week"?a.isoWeekday:!1,d=Yi(l)||l===!0,u={},f=t,g,_;if(d&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,d?"day":r),e.diff(o,t,r)>1e5*c)throw new Error(t+" and "+o+" are too far apart with stepSize of "+c+" "+r);let v=s.ticks.source==="data"&&this.getDataTimestamps();for(g=f,_=0;g<o;g=+e.add(g,c,r),_++)km(u,g,v);return(g===o||s.bounds==="ticks"||_===1)&&km(u,g,v),Object.keys(u).sort(wm).map(y=>+y)}getLabelForValue(e){let t=this._adapter,o=this.options.time;return o.tooltipFormat?t.format(e,o.tooltipFormat):t.format(e,o.displayFormats.datetime)}format(e,t){let s=this.options.time.displayFormats,a=this._unit,r=t||s[a];return this._adapter.format(e,r)}_tickFormatFunction(e,t,o,s){let a=this.options,r=a.ticks.callback;if(r)return ce(r,[e,t,o],this);let c=a.time.displayFormats,l=this._unit,d=this._majorUnit,u=l&&c[l],f=d&&c[d],g=o[t],_=d&&f&&g&&g.major;return this._adapter.format(e,s||(_?f:u))}generateTickLabels(e){let t,o,s;for(t=0,o=e.length;t<o;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,o=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+o)*t.factor)}getValueForPixel(e){let t=this._offsets,o=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+o*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,o=this.ctx.measureText(e).width,s=vt(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),r=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:o*a+c*r,h:o*r+c*a}}_getLabelCapacity(e){let t=this.options.time,o=t.displayFormats,s=o[t.unit]||o.millisecond,a=this._tickFormatFunction(e,0,Em(this,[e],this._majorUnit),s),r=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,o;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,o=s.length;t<o;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],t,o;if(e.length)return e;let s=this.getLabels();for(t=0,o=s.length;t<o;++t)e.push(Mm(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return nr(e.sort(wm))}}return n})();function Hs(n,i,e){let t=0,o=n.length-1,s,a,r,c;e?(i>=n[t].pos&&i<=n[o].pos&&({lo:t,hi:o}=Ut(n,"pos",i)),{pos:s,time:r}=n[t],{pos:a,time:c}=n[o]):(i>=n[t].time&&i<=n[o].time&&({lo:t,hi:o}=Ut(n,"time",i)),{time:s,pos:r}=n[t],{time:a,pos:c}=n[o]);let l=a-s;return l?r+(c-r)*(i-s)/l:r}var Zr=class extends Xr{static id="timeseries";static defaults=Xr.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=Hs(e,this.min),this._tableRange=Hs(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){let{min:e,max:t}=this,o=[],s=[],a,r,c,l,d;for(a=0,r=i.length;a<r;++a)l=i[a],l>=e&&l<=t&&o.push(l);if(o.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(a=0,r=o.length;a<r;++a)d=o[a+1],c=o[a-1],l=o[a],Math.round((d+c)/2)!==l&&s.push({time:l,pos:a/(r-1)});return s}_generate(){let i=this.min,e=this.max,t=super.getDataTimestamps();return(!t.includes(i)||!t.length)&&t.splice(0,0,i),(!t.includes(e)||t.length===1)&&t.push(e),t.sort((o,s)=>o-s)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;let e=this.getDataTimestamps(),t=this.getLabelTimestamps();return e.length&&t.length?i=this.normalize(e.concat(t)):i=e.length?e:t,i=this._cache.all=i,i}getDecimalForValue(i){return(Hs(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){let e=this._offsets,t=this.getDecimalForPixel(i)/e.factor-e.end;return Hs(this._table,t*this._tableRange+this._minPos,!0)}},$v=Object.freeze({__proto__:null,CategoryScale:kv,LinearScale:Gr,LogarithmicScale:Qr,RadialLinearScale:Yr,TimeScale:Xr,TimeSeriesScale:Zr}),Km=[i_,Tb,Cv,$v];var Gn=(()=>{class n{constructor(e){this.http=e}getAdminStats(){return this.http.get(`${Fe.apiUrl}/dashboard/stats`)}getVictimDashboard(){return this.http.get(`${Fe.apiUrl}/dashboard/victim`)}getDepartmentDashboard(){return this.http.get(`${Fe.apiUrl}/dashboard/department`)}getRecentRequests(e=10){return this.http.get(`${Fe.apiUrl}/requests/recent?limit=${e}`)}static{this.\u0275fac=function(t){return new(t||n)(ge(mt))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Js=(()=>{class n{constructor(e){this.http=e}sendMessage(e){return this.http.post(`${Fe.apiUrl}/direct-messages`,e)}getConversation(e){return this.http.get(`${Fe.apiUrl}/direct-messages/conversation/${e}`)}getMyMessages(e=0,t=20){return this.http.get(`${Fe.apiUrl}/direct-messages/my-messages?page=${e}&size=${t}`)}getUnreadMessages(){return this.http.get(`${Fe.apiUrl}/direct-messages/unread`)}getUnreadCount(){return this.http.get(`${Fe.apiUrl}/direct-messages/unread-count`)}markAsRead(e){return this.http.patch(`${Fe.apiUrl}/direct-messages/${e}/read`,{})}markConversationAsRead(e){return this.http.patch(`${Fe.apiUrl}/direct-messages/conversation/${e}/read`,{})}getAvailableRecipients(){return this.http.get(`${Fe.apiUrl}/direct-messages/available-recipients`)}getConversationPartners(){return this.http.get(`${Fe.apiUrl}/direct-messages/conversation-partners`)}deleteMessage(e){return this.http.delete(`${Fe.apiUrl}/direct-messages/${e}`)}static{this.\u0275fac=function(t){return new(t||n)(ge(mt))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gv(n,i){if(n&1&&(h(0,"span",26),p(1),m()),n&2){let e=R();b(),j(" ",e.unreadCount," ")}}function Qv(n,i){if(n&1&&(h(0,"span",27),p(1),m()),n&2){let e=R();b(),z(e.unreadCount)}}function Kv(n,i){n&1&&(h(0,"div",28)(1,"div",29)(2,"span",30),p(3,"Loading..."),m()()())}function Yv(n,i){if(n&1){let e=ee();h(0,"div",31),M(1,"i",32),p(2),h(3,"button",33),A("click",function(){G(e);let o=R();return Q(o.error="")}),h(4,"span"),p(5,"\xD7"),m()()()}if(n&2){let e=R();b(2),j(" ",e.error," ")}}function Xv(n,i){if(n&1){let e=ee();h(0,"div",34),M(1,"i",35),p(2),h(3,"button",33),A("click",function(){G(e);let o=R();return Q(o.success="")}),h(4,"span"),p(5,"\xD7"),m()()()}if(n&2){let e=R();b(2),j(" ",e.success," ")}}function Zv(n,i){if(n&1){let e=ee();h(0,"button",41),A("click",function(){let o=G(e).$implicit,s=R(4);return Q(s.openConversation(o))}),h(1,"div",42)(2,"div")(3,"h6",43),M(4,"i",44),p(5),h(6,"span",45),p(7),m()(),h(8,"small",46),p(9),m()(),M(10,"i",47),m()()}if(n&2){let e=i.$implicit,t=R(4);b(5),j(" ",e.fullName," "),b(),x("ngClass",t.getRoleBadgeClass(e.role)),b(),j(" ",t.getRoleDisplayName(e.role)," "),b(2),z(e.email)}}function Jv(n,i){if(n&1&&(h(0,"div",39),P(1,Zv,11,4,"button",40),m()),n&2){let e=R(3);b(),x("ngForOf",e.conversationPartners)}}function ey(n,i){if(n&1){let e=ee();h(0,"div",48),M(1,"i",49),h(2,"p"),p(3,"No conversations yet"),m(),h(4,"button",50),A("click",function(){G(e);let o=R(3);return Q(o.switchTab("compose"))}),M(5,"i",13),p(6," Send a Message "),m()()}}function ty(n,i){if(n&1&&(h(0,"div"),P(1,Jv,2,1,"div",37)(2,ey,7,0,"div",38),m()),n&2){let e=R(2);b(),x("ngIf",e.conversationPartners.length>0),b(),x("ngIf",e.conversationPartners.length===0)}}function iy(n,i){n&1&&(h(0,"span",55),M(1,"i",66),m())}function ny(n,i){if(n&1&&(h(0,"div",60)(1,"div",61)(2,"div",62)(3,"strong"),p(4),m(),h(5,"small",63),p(6),m(),P(7,iy,2,0,"span",64),m(),h(8,"div",65),p(9),m()()()),n&2){let e=i.$implicit,t=R(3);ae("message-sent",t.isMessageFromMe(e))("message-received",!t.isMessageFromMe(e)),b(4),z(e.sender.fullName),b(2),z(t.formatDate(e.createdAt)),b(),x("ngIf",e.isRead&&t.isMessageFromMe(e)),b(2),z(e.content)}}function oy(n,i){if(n&1){let e=ee();h(0,"div",51)(1,"div",52)(2,"button",53),A("click",function(){G(e);let o=R(2);return Q(o.backToList())}),M(3,"i",54),p(4," Back "),m(),h(5,"span",55),M(6,"i",44),p(7),h(8,"span",45),p(9),m()()(),h(10,"div",56),P(11,ny,10,8,"div",57),m(),h(12,"div",58)(13,"button",50),A("click",function(){G(e);let o=R(2);return Q(o.replyToConversation())}),M(14,"i",59),p(15," Reply "),m()()()}if(n&2){let e=R(2);b(7),j(" ",e.selectedPartner.fullName," "),b(),x("ngClass",e.getRoleBadgeClass(e.selectedPartner.role)),b(),j(" ",e.getRoleDisplayName(e.selectedPartner.role)," "),b(2),x("ngForOf",e.conversationMessages)}}function sy(n,i){if(n&1&&(h(0,"div"),P(1,ty,3,2,"div",19)(2,oy,16,4,"div",36),m()),n&2){let e=R();b(),x("ngIf",!e.selectedPartner),b(),x("ngIf",e.selectedPartner)}}function ay(n,i){if(n&1&&(h(0,"option",73),p(1),m()),n&2){let e=i.$implicit,t=R(2);x("value",e.id),b(),Vc(" ",e.fullName," (",t.getRoleDisplayName(e.role),") ")}}function ry(n,i){if(n&1){let e=ee();h(0,"div")(1,"div",67)(2,"div",68)(3,"label",69),M(4,"i",70),p(5," To: "),h(6,"span",71),p(7,"*"),m()(),h(8,"select",72),Hi("ngModelChange",function(o){G(e);let s=R();return Vi(s.selectedRecipient,o)||(s.selectedRecipient=o),Q(o)}),h(9,"option",73),p(10,"-- Select recipient --"),m(),P(11,ay,2,3,"option",74),m()(),h(12,"div",68)(13,"label",75),M(14,"i",76),p(15," Message "),h(16,"span",71),p(17,"*"),m()(),h(18,"textarea",77),Hi("ngModelChange",function(o){G(e);let s=R();return Vi(s.messageContent,o)||(s.messageContent=o),Q(o)}),m(),h(19,"small",78),p(20),m()()()()}if(n&2){let e=R();b(8),ji("ngModel",e.selectedRecipient),x("disabled",e.loading),b(),x("value",null),b(2),x("ngForOf",e.availableRecipients),b(7),ji("ngModel",e.messageContent),x("disabled",e.loading),b(2),j(" ",e.messageContent.length,"/2000 characters ")}}function cy(n,i){if(n&1){let e=ee();h(0,"button",79),A("click",function(){G(e);let o=R();return Q(o.resetComposeForm())}),M(1,"i",80),p(2," Clear "),m()}if(n&2){let e=R();x("disabled",e.loading)}}function ly(n,i){n&1&&(h(0,"span"),M(1,"span",82),p(2," Sending... "),m())}function dy(n,i){n&1&&(h(0,"span"),M(1,"i",83),p(2," Send Message "),m())}function hy(n,i){if(n&1){let e=ee();h(0,"button",81),A("click",function(){G(e);let o=R();return Q(o.sendMessage())}),P(1,ly,3,0,"span",19)(2,dy,3,0,"span",19),m()}if(n&2){let e=R();x("disabled",e.loading||!e.selectedRecipient||!e.messageContent.trim()),b(),x("ngIf",e.loading),b(),x("ngIf",!e.loading)}}function my(n,i){if(n&1&&M(0,"div",84),n&2){let e=R();ae("show",e.showMessaging)}}var Qn=(()=>{class n{constructor(e){this.messageService=e,this.showMessaging=!1,this.activeTab="inbox",this.unreadCount=0,this.conversationPartners=[],this.selectedPartner=null,this.conversationMessages=[],this.availableRecipients=[],this.selectedRecipient=null,this.messageContent="",this.loading=!1,this.error="",this.success=""}ngOnInit(){this.loadUnreadCount()}openMessaging(e="inbox"){this.showMessaging=!0,this.activeTab=e,this.error="",this.success="",e==="inbox"?this.loadConversationPartners():this.loadAvailableRecipients()}closeMessaging(){this.showMessaging=!1,this.selectedPartner=null,this.conversationMessages=[],this.resetComposeForm()}switchTab(e){this.activeTab=e,this.error="",this.success="",e==="inbox"?(this.loadConversationPartners(),this.selectedPartner=null,this.conversationMessages=[]):(this.loadAvailableRecipients(),this.resetComposeForm())}loadUnreadCount(){this.messageService.getUnreadCount().subscribe({next:e=>{this.unreadCount=e},error:e=>{console.error("Error loading unread count:",e)}})}loadConversationPartners(){this.loading=!0,this.messageService.getConversationPartners().subscribe({next:e=>{this.conversationPartners=e,this.loading=!1},error:e=>{console.error("Error loading conversation partners:",e),this.error="Failed to load conversations",this.loading=!1}})}loadAvailableRecipients(){this.loading=!0,this.messageService.getAvailableRecipients().subscribe({next:e=>{this.availableRecipients=e,this.loading=!1},error:e=>{console.error("Error loading recipients:",e),this.error="Failed to load recipients",this.loading=!1}})}openConversation(e){this.selectedPartner=e,this.loading=!0,this.messageService.getConversation(e.id).subscribe({next:t=>{this.conversationMessages=t,this.loading=!1,this.messageService.markConversationAsRead(e.id).subscribe({next:()=>{this.loadUnreadCount(),this.conversationMessages.forEach(o=>{!o.isRead&&!this.isMessageFromMe(o)&&(o.isRead=!0)})}})},error:t=>{console.error("Error loading conversation:",t),this.error="Failed to load conversation",this.loading=!1}})}backToList(){this.selectedPartner=null,this.conversationMessages=[],this.loadConversationPartners()}replyToConversation(){this.selectedPartner&&(this.activeTab="compose",this.selectedRecipient=this.selectedPartner.id,this.loadAvailableRecipients())}sendMessage(){if(!this.selectedRecipient){this.error="Please select a recipient";return}if(!this.messageContent.trim()){this.error="Please enter a message";return}if(this.messageContent.length>2e3){this.error="Message cannot exceed 2000 characters";return}this.loading=!0,this.error="";let e={recipientId:this.selectedRecipient,content:this.messageContent.trim()};this.messageService.sendMessage(e).subscribe({next:t=>{this.success="Message sent successfully!",this.loading=!1,this.resetComposeForm(),setTimeout(()=>{this.success="",this.switchTab("inbox")},1500)},error:t=>{console.error("Error sending message:",t),this.error=t.error?.message||"Failed to send message",this.loading=!1}})}resetComposeForm(){this.selectedRecipient=null,this.messageContent="",this.error="",this.success=""}formatDate(e){let t=new Date(e),o=new Date,s=Math.floor((o.getTime()-t.getTime())/(1e3*60*60));if(s<1){let a=Math.floor((o.getTime()-t.getTime())/6e4);return a<1?"Just now":`${a}m ago`}else return s<24?`${s}h ago`:t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}isMessageFromMe(e){let t=this.getCurrentUserId();return e.sender.id===t}getCurrentUserId(){let e=localStorage.getItem("userId");return e?parseInt(e):1}getRoleBadgeClass(e){return{ROLE_ADMIN:"badge-danger",ROLE_DEPARTMENT_HEAD:"badge-primary",ROLE_DISPATCHER:"badge-info",ROLE_RESCUE_TEAM_MEMBER:"badge-warning",ROLE_VICTIM:"badge-secondary"}[e]||"badge-secondary"}getRoleDisplayName(e){return{ROLE_ADMIN:"Admin",ROLE_DEPARTMENT_HEAD:"Department Head",ROLE_DISPATCHER:"Dispatcher",ROLE_RESCUE_TEAM_MEMBER:"Rescue Team",ROLE_VICTIM:"Victim"}[e]||e}static{this.\u0275fac=function(t){return new(t||n)(S(Js))}}static{this.\u0275cmp=V({type:n,selectors:[["app-unified-messaging"]],decls:36,vars:23,consts:[["type","button",1,"btn","btn-primary","position-relative",3,"click"],[1,"fas","fa-envelope"],["class","badge badge-pill badge-danger unread-badge",4,"ngIf"],[1,"modal","messaging-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"d-flex","align-items-center","w-100"],[1,"modal-title","mb-0"],["role","group",1,"btn-group","ml-auto","mr-3"],["type","button",1,"btn","btn-sm",3,"click"],[1,"fas","fa-inbox"],["class","badge badge-danger ml-1",4,"ngIf"],[1,"fas","fa-edit"],["type","button",1,"close","text-white",3,"click"],[1,"modal-body","messaging-body"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show",4,"ngIf"],["class","alert alert-success alert-dismissible fade show",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times"],["type","button","class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[1,"badge","badge-pill","badge-danger","unread-badge"],[1,"badge","badge-danger","ml-1"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle"],["type","button",1,"close",3,"click"],[1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle"],["class","conversation-view",4,"ngIf"],["class","list-group",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"fas","fa-user-circle"],[1,"badge","ml-2",3,"ngClass"],[1,"text-muted"],[1,"fas","fa-chevron-right"],[1,"text-center","py-5","text-muted"],[1,"fas","fa-inbox","fa-3x","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"conversation-view"],[1,"conversation-header","mb-3"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],[1,"ml-2"],[1,"messages-container"],["class","message-item",3,"message-sent","message-received",4,"ngFor","ngForOf"],[1,"conversation-footer","mt-3","text-center"],[1,"fas","fa-reply"],[1,"message-item"],[1,"message-bubble"],[1,"message-header"],[1,"ml-2","text-muted"],["class","ml-2",4,"ngIf"],[1,"message-content"],["title","Read",1,"fas","fa-check-double","text-info"],[1,"compose-form"],[1,"form-group"],["for","recipient"],[1,"fas","fa-user"],[1,"text-danger"],["id","recipient",1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","messageContent"],[1,"fas","fa-comment"],["id","messageContent","rows","8","placeholder","Type your message here...","maxlength","2000",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-text","text-muted"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-eraser"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"fas","fa-paper-plane"],[1,"modal-backdrop","fade"]],template:function(t,o){t&1&&(h(0,"button",0),A("click",function(){return o.openMessaging("inbox")}),M(1,"i",1),p(2," Messages "),P(3,Gv,2,1,"span",2),m(),h(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),M(10,"i",1),p(11," Messages "),m(),h(12,"div",9)(13,"button",10),A("click",function(){return o.switchTab("inbox")}),M(14,"i",11),p(15," Inbox "),P(16,Qv,2,1,"span",12),m(),h(17,"button",10),A("click",function(){return o.switchTab("compose")}),M(18,"i",13),p(19," Compose "),m()()(),h(20,"button",14),A("click",function(){return o.closeMessaging()}),h(21,"span"),p(22,"\xD7"),m()()(),h(23,"div",15),P(24,Kv,4,0,"div",16)(25,Yv,6,1,"div",17)(26,Xv,6,1,"div",18)(27,sy,3,2,"div",19)(28,ry,21,7,"div",19),m(),h(29,"div",20)(30,"button",21),A("click",function(){return o.closeMessaging()}),M(31,"i",22),p(32," Close "),m(),P(33,cy,3,1,"button",23)(34,hy,3,3,"button",24),m()()()(),P(35,my,1,2,"div",25)),t&2&&(b(3),x("ngIf",o.unreadCount>0),b(),ze("display",o.showMessaging?"block":"none"),ae("show",o.showMessaging),b(9),ae("btn-light",o.activeTab==="inbox")("btn-outline-light",o.activeTab!=="inbox"),b(3),x("ngIf",o.unreadCount>0),b(),ae("btn-light",o.activeTab==="compose")("btn-outline-light",o.activeTab!=="compose"),b(7),x("ngIf",o.loading),b(),x("ngIf",o.error),b(),x("ngIf",o.success),b(),x("ngIf",o.activeTab==="inbox"&&!o.loading),b(),x("ngIf",o.activeTab==="compose"&&!o.loading),b(2),x("disabled",o.loading),b(3),x("ngIf",o.activeTab==="compose"),b(),x("ngIf",o.activeTab==="compose"),b(),x("ngIf",o.showMessaging))},dependencies:[bi,ht,re,Go,Qo,ut,$o,pt,sl,tl],styles:[".modal.show[_ngcontent-%COMP%]{display:block!important}.messaging-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6}.modal-footer[_ngcontent-%COMP%]{border-top:2px solid #dee2e6}.messaging-body[_ngcontent-%COMP%]{min-height:500px;max-height:600px;overflow-y:auto}.unread-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-10px;padding:.25em .6em;border-radius:10rem;font-size:.75rem;font-weight:700}.btn-group[_ngcontent-%COMP%]{box-shadow:none!important}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.25rem}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transform:translate(2px)}.conversation-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.conversation-header[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #dee2e6}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:15px 0;max-height:400px}.message-item[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.message-sent[_ngcontent-%COMP%]{justify-content:flex-end}.message-received[_ngcontent-%COMP%]{justify-content:flex-start}.message-bubble[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:18px;box-shadow:0 1px 2px #0000001a;word-wrap:break-word}.message-sent[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-bottom-right-radius:4px}.message-received[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#212529;border-bottom-left-radius:4px}.message-header[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:6px;display:flex;align-items:center;gap:5px}.message-sent[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{color:#ffffffe6}.message-sent[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#ffffffb3!important}.message-content[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}.conversation-footer[_ngcontent-%COMP%]{padding-top:15px;border-top:1px solid #dee2e6}.compose-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:150px;font-family:inherit}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25em .6em;font-weight:600}.close[_ngcontent-%COMP%]{background:transparent;border:0;font-size:1.5rem;font-weight:700;line-height:1;color:inherit;opacity:.7;cursor:pointer;padding:0;margin-left:.5rem}.close[_ngcontent-%COMP%]:hover{opacity:1}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar, .messaging-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track, .messaging-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .messaging-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .messaging-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.alert[_ngcontent-%COMP%]{margin-bottom:1rem}.fa-check-double[_ngcontent-%COMP%]{font-size:.8rem}.message-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.list-group-item[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{transition:all .2s ease}.btn[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}}return n})();function uy(n,i){n&1&&(h(0,"div",18)(1,"div",19)(2,"span",20),p(3,"Loading..."),m()()())}function py(n,i){if(n&1&&(h(0,"div",21),p(1),m()),n&2){let e=R();b(),z(e.error)}}function fy(n,i){n&1&&M(0,"br")}function gy(n,i){if(n&1&&(h(0,"small",55),p(1),m()),n&2){let e=R().$implicit;b(),z(e.victimPhone)}}function _y(n,i){if(n&1&&(h(0,"span",56),p(1),m()),n&2){let e=R().$implicit;b(),z(e.assignedTeam.name)}}function by(n,i){n&1&&(h(0,"span",57),p(1,"Unassigned"),m())}function vy(n,i){if(n&1){let e=ee();h(0,"button",58),A("click",function(){G(e);let o=R().$implicit,s=R(2);return Q(s.openAssignModal(o))}),M(1,"i",12),p(2," Assign "),m()}}function yy(n,i){n&1&&(h(0,"span",56),M(1,"i",59),p(2," Completed "),m())}function xy(n,i){if(n&1&&(h(0,"tr")(1,"td")(2,"strong"),p(3),m()(),h(4,"td"),p(5),P(6,fy,1,0,"br",6)(7,gy,2,1,"small",48),m(),h(8,"td"),M(9,"i",49),p(10),m(),h(11,"td")(12,"span",50),p(13),m()(),h(14,"td")(15,"span",51),p(16),m()(),h(17,"td")(18,"span",51),p(19),m()(),h(20,"td"),P(21,_y,2,1,"span",52)(22,by,2,0,"span",53),m(),h(23,"td")(24,"small"),p(25),Pt(26,"date"),m()(),h(27,"td"),P(28,vy,3,0,"button",54)(29,yy,3,0,"span",52),m()()),n&2){let e=i.$implicit,t=R(2);ae("table-danger",e.priority==="CRITICAL")("table-warning",e.priority==="HIGH"),b(3),j("#",e.id,""),b(2),j(" ",e.victimName," "),b(),x("ngIf",e.victimPhone),b(),x("ngIf",e.victimPhone),b(3),j(" ",e.location," "),b(3),z(e.emergencyType),b(2),x("ngClass",t.getPriorityBadgeClass(e.priority)),b(),z(e.priority),b(2),x("ngClass",t.getStatusBadgeClass(e.status)),b(),z(e.status),b(2),x("ngIf",e.assignedTeam),b(),x("ngIf",!e.assignedTeam),b(3),z(Rt(26,19,e.createdAt,"short")),b(3),x("ngIf",e.status!=="RESOLVED"&&e.status!=="CANCELLED"),b(),x("ngIf",e.status==="RESOLVED")}}function Cy(n,i){n&1&&(h(0,"tr")(1,"td",60),p(2,"No requests found"),m()())}function wy(n,i){if(n&1&&(h(0,"div")(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25)(5,"div",26)(6,"div")(7,"h6",27),p(8,"Total Requests"),m(),h(9,"h2",2),p(10),m()(),M(11,"i",28),m()()()(),h(12,"div",23)(13,"div",29)(14,"div",25)(15,"div",26)(16,"div")(17,"h6",27),p(18,"Pending"),m(),h(19,"h2",2),p(20),m()(),M(21,"i",30),m()()()(),h(22,"div",23)(23,"div",31)(24,"div",25)(25,"div",26)(26,"div")(27,"h6",27),p(28,"Active"),m(),h(29,"h2",2),p(30),m()(),M(31,"i",32),m()()()(),h(32,"div",23)(33,"div",33)(34,"div",25)(35,"div",26)(36,"div")(37,"h6",27),p(38,"Resolved"),m(),h(39,"h2",2),p(40),m()(),M(41,"i",34),m()()()()(),h(42,"div",22)(43,"div",35)(44,"div",36)(45,"div",37),M(46,"canvas",38),m()()(),h(47,"div",35)(48,"div",36)(49,"div",37),M(50,"canvas",39),m()()(),h(51,"div",35)(52,"div",36)(53,"div",40),M(54,"canvas",41),m()()()(),h(55,"div",36)(56,"div",42)(57,"h5",2),M(58,"i",43),p(59),m()(),h(60,"div",25)(61,"div",44)(62,"table",45)(63,"thead",46)(64,"tr")(65,"th"),p(66,"ID"),m(),h(67,"th"),p(68,"Victim"),m(),h(69,"th"),p(70,"Location"),m(),h(71,"th"),p(72,"Type"),m(),h(73,"th"),p(74,"Priority"),m(),h(75,"th"),p(76,"Status"),m(),h(77,"th"),p(78,"Assigned Team"),m(),h(79,"th"),p(80,"Created"),m(),h(81,"th"),p(82,"Actions"),m()()(),h(83,"tbody"),P(84,xy,30,22,"tr",47)(85,Cy,3,0,"tr",6),m()()()()()()),n&2){let e=R();b(10),z(e.stats.totalRequests),b(10),z(e.stats.pendingRequests),b(10),z(e.stats.activeRequests),b(10),z(e.stats.resolvedRequests),b(19),j(" Emergency Requests (",e.allRequests.length,")"),b(25),x("ngForOf",e.allRequests),b(),x("ngIf",e.allRequests.length===0)}}function My(n,i){if(n&1){let e=ee();h(0,"button",67),A("click",function(){let o=G(e).$implicit,s=R(2);return Q(s.assignTeamToRequest(o.id))}),h(1,"div",68)(2,"h6",69),p(3),m(),h(4,"small")(5,"span",70),p(6),m()()(),h(7,"p",69)(8,"small"),p(9),m()(),h(10,"p",69)(11,"small"),p(12),m()()()}if(n&2){let e=i.$implicit;b(3),z(e.name),b(2),ae("badge-success",e.status==="AVAILABLE")("badge-warning",e.status!=="AVAILABLE"),b(),z(e.status),b(3),j("Department: ",e.department==null?null:e.department.name,""),b(3),j("Members: ",e.memberCount,"")}}function Sy(n,i){n&1&&(h(0,"div",71),p(1,"No rescue teams available"),m())}function ky(n,i){if(n&1&&(h(0,"div",61)(1,"div",62)(2,"div",63)(3,"h6"),p(4,"Request Details:"),m(),h(5,"p")(6,"strong"),p(7,"ID:"),m(),p(8),m(),h(9,"p")(10,"strong"),p(11,"Victim:"),m(),p(12),m(),h(13,"p")(14,"strong"),p(15,"Location:"),m(),p(16),m(),h(17,"p")(18,"strong"),p(19,"Emergency Type:"),m(),h(20,"span",50),p(21),m()(),h(22,"p")(23,"strong"),p(24,"Priority:"),m(),h(25,"span",51),p(26),m()()(),h(27,"div",63)(28,"p")(29,"strong"),p(30,"Description:"),m()(),h(31,"p",55),p(32),m()()(),M(33,"hr"),h(34,"h6"),p(35,"Select Rescue Team:"),m(),h(36,"div",64),P(37,My,13,8,"button",65)(38,Sy,2,0,"div",66),m()()),n&2){let e=R();b(8),j(" #",e.selectedRequest.id,""),b(4),j(" ",e.selectedRequest.victimName,""),b(4),j(" ",e.selectedRequest.location,""),b(5),z(e.selectedRequest.emergencyType),b(4),x("ngClass",e.getPriorityBadgeClass(e.selectedRequest.priority)),b(),z(e.selectedRequest.priority),b(6),z(e.selectedRequest.description||"No description provided"),b(5),x("ngForOf",e.allTeams),b(),x("ngIf",e.allTeams.length===0)}}function Ey(n,i){if(n&1&&M(0,"div",72),n&2){let e=R();ze("display",e.showAssignModal?"block":"none"),ae("show",e.showAssignModal)}}$n.register(...Km);var Ym=(()=>{class n{constructor(e,t,o){this.dashboardService=e,this.requestService=t,this.teamService=o,this.stats=null,this.allRequests=[],this.allTeams=[],this.loading=!0,this.error="",this.selectedRequest=null,this.showAssignModal=!1}ngOnInit(){this.loadDashboardData(),this.loadAllRequests(),this.loadTeams()}loadDashboardData(){this.loading=!0,this.dashboardService.getAdminStats().subscribe({next:e=>{console.log("Dashboard stats loaded:",e),this.stats=e,this.loading=!1,setTimeout(()=>this.initializeCharts(),100)},error:e=>{console.error("Error loading dashboard stats:",e),console.error("Error details:",e.error),this.error="Failed to load dashboard data",this.loading=!1}})}loadAllRequests(){this.requestService.getAllActiveRequest().subscribe({next:e=>{console.log("Requests loaded:",e),e&&e.content?(this.allRequests=e.content.sort((t,o)=>new Date(o.createdAt).getTime()-new Date(t.createdAt).getTime()),console.log("Total requests:",this.allRequests.length)):(console.warn("No content in requests response:",e),this.allRequests=[])},error:e=>{console.error("Error loading requests:",e),console.error("Error details:",e.error),this.allRequests=[]}})}loadTeams(){this.teamService.getAllTeams().subscribe({next:e=>{this.allTeams=e},error:e=>{console.error("Error loading teams:",e)}})}openAssignModal(e){this.selectedRequest=e,this.showAssignModal=!0}closeAssignModal(){this.showAssignModal=!1,this.selectedRequest=null}assignTeamToRequest(e){this.selectedRequest&&this.teamService.assignRequest(this.selectedRequest.id,e).subscribe({next:t=>{console.log("Team assigned successfully:",t),this.showAssignModal=!1,this.selectedRequest=null,this.loadAllRequests(),this.loadDashboardData()},error:t=>{console.error("Error assigning team:",t),this.error="Failed to assign team. Please try again.",setTimeout(()=>this.error="",3e3)}})}updateRequestStatus(e,t){console.log("Updating request",e,"to status",t)}initializeCharts(){if(!this.stats){console.warn("Stats data not available, skipping chart initialization");return}if(!this.stats.requestsByStatus){console.warn("Incomplete stats data, skipping chart initialization");return}let e=document.getElementById("statusChart");e&&(this.statusChart=new $n(e,{type:"doughnut",data:{labels:Object.keys(this.stats.requestsByStatus),datasets:[{data:Object.values(this.stats.requestsByStatus),backgroundColor:["#d4a859","#6ba3c4","#2c5f8d","#5a9f7b","#4a7ba7","#c9504d"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Requests by Status"}}}}));let t=document.getElementById("priorityChart");t&&this.stats.requestsByPriority&&(this.priorityChart=new $n(t,{type:"bar",data:{labels:Object.keys(this.stats.requestsByPriority),datasets:[{label:"Requests",data:Object.values(this.stats.requestsByPriority),backgroundColor:["#5a9f7b","#6ba3c4","#d4a859","#c9504d"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Requests by Priority"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}}));let o=document.getElementById("teamChart");o&&(this.teamChart=new $n(o,{type:"pie",data:{labels:["Available Teams","Busy Teams"],datasets:[{data:[this.stats.availableTeams,this.stats.busyTeams],backgroundColor:["#5a9f7b","#c9504d"]}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Team Availability"}}}}))}getStatusBadgeClass(e){return{PENDING:"badge-warning",ASSIGNED:"badge-info",EN_ROUTE:"badge-primary",ON_SCENE:"badge-secondary",RESOLVED:"badge-success",CANCELLED:"badge-danger"}[e]||"badge-secondary"}getPriorityBadgeClass(e){return{LOW:"badge-success",MEDIUM:"badge-info",HIGH:"badge-warning",CRITICAL:"badge-danger"}[e]||"badge-secondary"}ngOnDestroy(){this.statusChart&&this.statusChart.destroy(),this.priorityChart&&this.priorityChart.destroy(),this.teamChart&&this.teamChart.destroy()}static{this.\u0275fac=function(t){return new(t||n)(S(Gn),S(Mi),S(En))}}static{this.\u0275cmp=V({type:n,selectors:[["app-admin-dashboard"]],decls:24,vars:9,consts:[[1,"container-fluid","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"fas","fa-tachometer-alt"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"fas","fa-user-plus"],["type","button",1,"close","text-white",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["class","modal-backdrop fade",3,"show","display",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row","mb-4"],[1,"col-md-3","col-sm-6","mb-3"],[1,"card","bg-primary","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"fas","fa-exclamation-circle","fa-3x","opacity-50"],[1,"card","bg-warning","text-white"],[1,"fas","fa-clock","fa-3x","opacity-50"],[1,"card","bg-info","text-white"],[1,"fas","fa-sync","fa-3x","opacity-50"],[1,"card","bg-success","text-white"],[1,"fas","fa-check-circle","fa-3x","opacity-50"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body",2,"height","300px"],["id","statusChart"],["id","priorityChart"],[1,"card-body",2,"height","300px","display","flex","align-items","center","justify-content","center"],["id","teamChart"],[1,"card-header"],[1,"fas","fa-list-alt"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[1,"table-dark"],[3,"table-danger","table-warning",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"fas","fa-map-marker-alt","text-danger"],[1,"badge","badge-info"],[1,"badge",3,"ngClass"],["class","badge badge-success",4,"ngIf"],["class","badge badge-secondary",4,"ngIf"],["class","btn btn-sm btn-primary mr-1",3,"click",4,"ngIf"],[1,"text-muted"],[1,"badge","badge-success"],[1,"badge","badge-secondary"],[1,"btn","btn-sm","btn-primary","mr-1",3,"click"],[1,"fas","fa-check"],["colspan","9",1,"text-center","text-muted","py-4"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-md-6"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["class","alert alert-warning",4,"ngIf"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[1,"badge"],[1,"alert","alert-warning"],[1,"modal-backdrop","fade"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1)(2,"h2",2),M(3,"i",3),p(4," Admin Dashboard"),m(),M(5,"app-unified-messaging"),m(),P(6,uy,4,0,"div",4)(7,py,2,1,"div",5)(8,wy,86,7,"div",6),m(),h(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h5",11),M(14,"i",12),p(15," Assign Team to Request"),m(),h(16,"button",13),A("click",function(){return o.closeAssignModal()}),h(17,"span"),p(18,"\xD7"),m()()(),P(19,ky,39,9,"div",14),h(20,"div",15)(21,"button",16),A("click",function(){return o.closeAssignModal()}),p(22,"Cancel"),m()()()()(),P(23,Ey,1,4,"div",17)),t&2&&(b(6),x("ngIf",o.loading),b(),x("ngIf",o.error),b(),x("ngIf",!o.loading&&o.stats),b(),ze("display",o.showAssignModal?"block":"none"),ae("show",o.showAssignModal),b(10),x("ngIf",o.selectedRequest),b(4),x("ngIf",o.showAssignModal))},dependencies:[bi,ht,re,Qn,vi]})}}return n})();function Ty(n,i){n&1&&(h(0,"div",8)(1,"div",9)(2,"span",10),p(3,"Loading..."),m()()())}function Iy(n,i){if(n&1&&(h(0,"div",11),p(1),m()),n&2){let e=R();b(),z(e.error)}}function Dy(n,i){if(n&1){let e=ee();h(0,"tr")(1,"td"),p(2),m(),h(3,"td"),p(4),m(),h(5,"td")(6,"span",30),p(7),m()(),h(8,"td")(9,"span",31),p(10),m()(),h(11,"td")(12,"span",31),p(13),m()(),h(14,"td"),p(15),Pt(16,"date"),m(),h(17,"td")(18,"button",32),A("click",function(){let o=G(e).$implicit,s=R(2);return Q(s.viewRequest(o.id))}),M(19,"i",33),p(20," View "),m()()()}if(n&2){let e=i.$implicit,t=R(2);b(2),j("#",e.id,""),b(2),z(e.location),b(3),z(e.emergencyType),b(2),x("ngClass",t.getPriorityBadgeClass(e.priority)),b(),z(e.priority),b(2),x("ngClass",t.getStatusBadgeClass(e.status)),b(),z(e.status),b(2),z(Rt(16,8,e.createdAt,"short"))}}function Py(n,i){if(n&1){let e=ee();h(0,"tr")(1,"td",34),M(2,"i",35),h(3,"p"),p(4,"No requests yet. Create your first emergency request!"),m(),h(5,"button",36),A("click",function(){G(e);let o=R(2);return Q(o.createNewRequest())}),M(6,"i",4),p(7," Create Request "),m()()()}}function Ry(n,i){if(n&1&&(h(0,"div")(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div")(7,"h6",17),p(8,"Total Requests"),m(),h(9,"h2",18),p(10),m()(),M(11,"i",19),m()()()(),h(12,"div",13)(13,"div",20)(14,"div",15)(15,"div",16)(16,"div")(17,"h6",17),p(18,"Pending"),m(),h(19,"h2",18),p(20),m()(),M(21,"i",21),m()()()(),h(22,"div",13)(23,"div",22)(24,"div",15)(25,"div",16)(26,"div")(27,"h6",17),p(28,"Resolved"),m(),h(29,"h2",18),p(30),m()(),M(31,"i",23),m()()()()(),h(32,"div",24)(33,"div",25)(34,"h5",18),M(35,"i",26),p(36," My Emergency Requests"),m()(),h(37,"div",15)(38,"div",27)(39,"table",28)(40,"thead")(41,"tr")(42,"th"),p(43,"ID"),m(),h(44,"th"),p(45,"Location"),m(),h(46,"th"),p(47,"Type"),m(),h(48,"th"),p(49,"Priority"),m(),h(50,"th"),p(51,"Status"),m(),h(52,"th"),p(53,"Created"),m(),h(54,"th"),p(55,"Actions"),m()()(),h(56,"tbody"),P(57,Dy,21,11,"tr",29)(58,Py,8,0,"tr",7),m()()()()()()),n&2){let e=R();b(10),z(e.dashboard.totalRequests),b(10),z(e.dashboard.pendingRequests),b(10),z(e.dashboard.resolvedRequests),b(27),x("ngForOf",e.dashboard.recentRequests),b(),x("ngIf",e.dashboard.recentRequests.length===0)}}var Xm=(()=>{class n{constructor(e,t){this.dashboardService=e,this.router=t,this.dashboard=null,this.loading=!0,this.error=""}ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading=!0,this.dashboardService.getVictimDashboard().subscribe({next:e=>{this.dashboard=e,this.loading=!1},error:e=>{console.error("Error loading dashboard:",e),this.error="Failed to load dashboard data",this.loading=!1}})}createNewRequest(){this.router.navigate(["/victim/new-request"])}viewRequest(e){this.router.navigate(["/victim/request",e])}getStatusBadgeClass(e){return{PENDING:"badge-warning",ASSIGNED:"badge-info",EN_ROUTE:"badge-primary",ON_SCENE:"badge-secondary",RESOLVED:"badge-success",CANCELLED:"badge-danger"}[e]||"badge-secondary"}getPriorityBadgeClass(e){return{LOW:"badge-success",MEDIUM:"badge-info",HIGH:"badge-warning",CRITICAL:"badge-danger"}[e]||"badge-secondary"}static{this.\u0275fac=function(t){return new(t||n)(S(Gn),S(be))}}static{this.\u0275cmp=V({type:n,selectors:[["app-victim-dashboard"]],decls:13,vars:3,consts:[[1,"container-fluid","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fas","fa-home"],[1,"btn","btn-primary","ml-2",3,"click"],[1,"fas","fa-plus"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row","mb-4"],[1,"col-md-4","mb-3"],[1,"card","bg-primary","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"mb-0"],[1,"fas","fa-exclamation-circle","fa-3x","opacity-50"],[1,"card","bg-warning","text-white"],[1,"fas","fa-clock","fa-3x","opacity-50"],[1,"card","bg-success","text-white"],[1,"fas","fa-check-circle","fa-3x","opacity-50"],[1,"card"],[1,"card-header"],[1,"fas","fa-list"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-eye"],["colspan","7",1,"text-center","text-muted","py-4"],[1,"fas","fa-inbox","fa-3x","mb-3","d-block"],[1,"btn","btn-primary",3,"click"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1)(2,"h2"),M(3,"i",2),p(4," My Dashboard"),m(),h(5,"div"),M(6,"app-unified-messaging"),h(7,"button",3),A("click",function(){return o.createNewRequest()}),M(8,"i",4),p(9," New Emergency Request "),m()()(),P(10,Ty,4,0,"div",5)(11,Iy,2,1,"div",6)(12,Ry,59,5,"div",7),m()),t&2&&(b(10),x("ngIf",o.loading),b(),x("ngIf",o.error),b(),x("ngIf",!o.loading&&o.dashboard))},dependencies:[bi,ht,re,Qn,vi]})}}return n})();function Oy(n,i){n&1&&(h(0,"div",18)(1,"div",19)(2,"span",20),p(3,"Loading..."),m()()())}function Ay(n,i){if(n&1&&(h(0,"div",21),p(1),m()),n&2){let e=R();b(),z(e.error)}}function Fy(n,i){if(n&1){let e=ee();h(0,"tr")(1,"td"),p(2),m(),h(3,"td"),p(4),m(),h(5,"td"),p(6),m(),h(7,"td")(8,"span",41),p(9),m()(),h(10,"td")(11,"span",42),p(12),m()(),h(13,"td")(14,"span",42),p(15),m()(),h(16,"td"),p(17),Pt(18,"date"),m(),h(19,"td")(20,"button",43),A("click",function(){let o=G(e).$implicit,s=R(2);return Q(s.viewRequestDetail(o))}),M(21,"i",44),p(22," View "),m()()()}if(n&2){let e=i.$implicit,t=R(2);b(2),j("#",e.id,""),b(2),z(e.victimName),b(2),z(e.location),b(3),z(e.emergencyType),b(2),x("ngClass",t.getPriorityBadgeClass(e.priority)),b(),z(e.priority),b(2),x("ngClass",t.getStatusBadgeClass(e.status)),b(),z(e.status),b(2),z(Rt(18,9,e.createdAt,"short"))}}function Ly(n,i){n&1&&(h(0,"tr")(1,"td",45),p(2,"No requests assigned"),m()())}function Ny(n,i){if(n&1&&(h(0,"div")(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25)(5,"div",26)(6,"div")(7,"h6",27),p(8,"Assigned"),m(),h(9,"h2",2),p(10),m()(),M(11,"i",28),m()()()(),h(12,"div",23)(13,"div",29)(14,"div",25)(15,"div",26)(16,"div")(17,"h6",27),p(18,"Pending"),m(),h(19,"h2",2),p(20),m()(),M(21,"i",30),m()()()(),h(22,"div",23)(23,"div",31)(24,"div",25)(25,"div",26)(26,"div")(27,"h6",27),p(28,"Completed"),m(),h(29,"h2",2),p(30),m()(),M(31,"i",32),m()()()(),h(32,"div",23)(33,"div",33)(34,"div",25)(35,"div",26)(36,"div")(37,"h6",27),p(38,"Team Utilization"),m(),h(39,"h2",2),p(40),Pt(41,"number"),m()(),M(42,"i",34),m()()()()(),h(43,"div",35)(44,"div",36)(45,"h5",2),M(46,"i",37),p(47," Assigned Requests"),m()(),h(48,"div",25)(49,"div",38)(50,"table",39)(51,"thead")(52,"tr")(53,"th"),p(54,"ID"),m(),h(55,"th"),p(56,"Victim"),m(),h(57,"th"),p(58,"Location"),m(),h(59,"th"),p(60,"Type"),m(),h(61,"th"),p(62,"Priority"),m(),h(63,"th"),p(64,"Status"),m(),h(65,"th"),p(66,"Created"),m(),h(67,"th"),p(68,"Actions"),m()()(),h(69,"tbody"),P(70,Fy,23,12,"tr",40)(71,Ly,3,0,"tr",6),m()()()()()()),n&2){let e=R();b(10),z(e.dashboard.assignedRequests),b(10),z(e.dashboard.pendingAssignments),b(10),z(e.dashboard.completedRequests),b(10),j("",Rt(41,6,e.dashboard.teamUtilization,"1.0-0"),"%"),b(30),x("ngForOf",e.dashboard.requests),b(),x("ngIf",e.dashboard.requests.length===0)}}function zy(n,i){if(n&1){let e=ee();h(0,"button",57),A("click",function(){G(e);let o=R(2);return Q(o.updateStatus("EN_ROUTE"))}),M(1,"i",58),p(2," Mark as En Route "),m()}}function By(n,i){if(n&1){let e=ee();h(0,"button",59),A("click",function(){G(e);let o=R(2);return Q(o.updateStatus("ON_SCENE"))}),M(1,"i",60),p(2," Mark as On Scene "),m()}}function jy(n,i){if(n&1){let e=ee();h(0,"button",61),A("click",function(){G(e);let o=R(2);return Q(o.updateStatus("RESOLVED"))}),M(1,"i",62),p(2," Mark as Resolved "),m()}}function Vy(n,i){n&1&&(h(0,"button",63),M(1,"i",64),p(2," Completed "),m())}function Hy(n,i){if(n&1&&(h(0,"div",46)(1,"div",47)(2,"div",48)(3,"h6",49),p(4,"Request Information"),m(),h(5,"p")(6,"strong"),p(7,"Request ID:"),m(),p(8),m(),h(9,"p")(10,"strong"),p(11,"Victim Name:"),m(),p(12),m(),h(13,"p")(14,"strong"),p(15,"Contact:"),m(),p(16),m(),h(17,"p")(18,"strong"),p(19,"Location:"),m(),p(20),m()(),h(21,"div",48)(22,"h6",49),p(23,"Emergency Details"),m(),h(24,"p")(25,"strong"),p(26,"Type:"),m(),h(27,"span",50),p(28),m()(),h(29,"p")(30,"strong"),p(31,"Priority:"),m(),h(32,"span",42),p(33),m()(),h(34,"p")(35,"strong"),p(36,"Status:"),m(),h(37,"span",42),p(38),m()(),h(39,"p")(40,"strong"),p(41,"Created:"),m(),p(42),Pt(43,"date"),m()()(),M(44,"hr"),h(45,"div",47)(46,"div",51)(47,"h6",49),p(48,"Description"),m(),h(49,"p"),p(50),m()()(),M(51,"hr"),h(52,"div",47)(53,"div",51)(54,"h6",49),p(55,"Update Status"),m(),h(56,"div",52),P(57,zy,3,0,"button",53)(58,By,3,0,"button",54)(59,jy,3,0,"button",55)(60,Vy,3,0,"button",56),m()()()()),n&2){let e=R();b(8),j(" #",e.selectedRequest.id,""),b(4),j(" ",e.selectedRequest.victimName,""),b(4),j(" ",e.selectedRequest.victimPhone||"N/A",""),b(4),j(" ",e.selectedRequest.location,""),b(8),z(e.selectedRequest.emergencyType),b(4),x("ngClass",e.getPriorityBadgeClass(e.selectedRequest.priority)),b(),z(e.selectedRequest.priority),b(4),x("ngClass",e.getStatusBadgeClass(e.selectedRequest.status)),b(),z(e.selectedRequest.status),b(4),j(" ",Rt(43,15,e.selectedRequest.createdAt,"medium"),""),b(8),z(e.selectedRequest.description||"No description provided"),b(7),x("ngIf",e.selectedRequest.status==="ASSIGNED"),b(),x("ngIf",e.selectedRequest.status==="EN_ROUTE"),b(),x("ngIf",e.selectedRequest.status==="ON_SCENE"),b(),x("ngIf",e.selectedRequest.status==="RESOLVED")}}function qy(n,i){if(n&1&&M(0,"div",65),n&2){let e=R();ae("show",e.showDetailModal)}}var Zm=(()=>{class n{constructor(e,t){this.dashboardService=e,this.requestService=t,this.dashboard=null,this.loading=!0,this.error="",this.selectedRequest=null,this.showDetailModal=!1}ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading=!0,this.dashboardService.getDepartmentDashboard().subscribe({next:e=>{this.dashboard=e,this.loading=!1},error:e=>{console.error("Error loading dashboard:",e),this.error="Failed to load dashboard data",this.loading=!1}})}getStatusBadgeClass(e){return{PENDING:"badge-warning",ASSIGNED:"badge-info",EN_ROUTE:"badge-primary",ON_SCENE:"badge-secondary",RESOLVED:"badge-success",CANCELLED:"badge-danger"}[e]||"badge-secondary"}getPriorityBadgeClass(e){return{LOW:"badge-success",MEDIUM:"badge-info",HIGH:"badge-warning",CRITICAL:"badge-danger"}[e]||"badge-secondary"}viewRequestDetail(e){this.selectedRequest=e,this.showDetailModal=!0}closeDetailModal(){this.showDetailModal=!1,this.selectedRequest=null}updateStatus(e){this.selectedRequest&&(this.requestService.completeRequest(this.selectedRequest.id.toString()),this.closeDetailModal(),setTimeout(()=>this.loadDashboard(),1e3))}static{this.\u0275fac=function(t){return new(t||n)(S(Gn),S(Mi))}}static{this.\u0275cmp=V({type:n,selectors:[["app-department-dashboard"]],decls:24,vars:9,consts:[[1,"container-fluid","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"fas","fa-building"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"fas","fa-info-circle"],["type","button",1,"close","text-white",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row","mb-4"],[1,"col-md-3","mb-3"],[1,"card","bg-primary","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"fas","fa-tasks","fa-3x","opacity-50"],[1,"card","bg-warning","text-white"],[1,"fas","fa-clock","fa-3x","opacity-50"],[1,"card","bg-success","text-white"],[1,"fas","fa-check-circle","fa-3x","opacity-50"],[1,"card","bg-info","text-white"],[1,"fas","fa-users","fa-3x","opacity-50"],[1,"card"],[1,"card-header"],[1,"fas","fa-list"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-eye"],["colspan","8",1,"text-center","text-muted"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[1,"text-muted"],[1,"badge","badge-info"],[1,"col-12"],["role","group",1,"btn-group"],["class","btn btn-info",3,"click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-secondary","disabled","",4,"ngIf"],[1,"btn","btn-info",3,"click"],[1,"fas","fa-route"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-map-marker-alt"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check-circle"],["disabled","",1,"btn","btn-secondary"],[1,"fas","fa-check"],[1,"modal-backdrop","fade"]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1)(2,"h2",2),M(3,"i",3),p(4," Department Dashboard"),m(),M(5,"app-unified-messaging"),m(),P(6,Oy,4,0,"div",4)(7,Ay,2,1,"div",5)(8,Ny,72,9,"div",6),m(),h(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h5",11),M(14,"i",12),p(15," Request Details"),m(),h(16,"button",13),A("click",function(){return o.closeDetailModal()}),h(17,"span"),p(18,"\xD7"),m()()(),P(19,Hy,61,18,"div",14),h(20,"div",15)(21,"button",16),A("click",function(){return o.closeDetailModal()}),p(22,"Close"),m()()()()(),P(23,qy,1,2,"div",17)),t&2&&(b(6),x("ngIf",o.loading),b(),x("ngIf",o.error),b(),x("ngIf",!o.loading&&o.dashboard),b(),ze("display",o.showDetailModal?"block":"none"),ae("show",o.showDetailModal),b(10),x("ngIf",o.selectedRequest),b(4),x("ngIf",o.showDetailModal))},dependencies:[bi,ht,re,Qn,qc,vi]})}}return n})();var Wy=[{path:"login",component:Na},{path:"register-victim",component:Ad},{path:"request",component:id},{path:"logout",component:nd,canActivate:[St]},{path:"admin",children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Ym},{path:"manage",loadChildren:()=>import("./chunk-RECZ2Y3F.js").then(n=>n.AdminModule)}],canActivate:[St],data:{roles:["ROLE_ADMIN"]}},{path:"victim",children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Xm}],canActivate:[St],data:{roles:["ROLE_VICTIM"]}},{path:"department",children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Zm}],canActivate:[St],data:{roles:["ROLE_DEPARTMENT_HEAD","ROLE_DISPATCHER","ROLE_RESCUE_TEAM_MEMBER"]}},{path:"signup",component:Md,canActivate:[St],data:{roles:["ROLE_ADMIN"]}},{path:"header",component:ps,canActivate:[St]},{path:"chatLobby",loadChildren:()=>import("./chunk-LON35UF7.js").then(n=>n.ChatLobbyModule),canActivate:[St]},{path:"",component:Na},{path:"sidebar",component:Ed,canActivate:[St]},{path:"toolbar",component:Td,canActivate:[St]},{path:"home",component:wd,canActivate:[St]},{path:"requestLanding",component:Id},{path:"requestLogin",component:Dd}],Jm=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[Ea.forRoot(Wy),Ea]})}}return n})();var ea=(()=>{class n{constructor(){this.loadingSubject=new Oe,this.loading$=this.loadingSubject.asObservable(),this.activeRequests=0}show(){this.activeRequests++,this.activeRequests===1&&this.loadingSubject.next(!0)}hide(){this.activeRequests--,this.activeRequests===0&&this.loadingSubject.next(!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uy(n,i){n&1&&(h(0,"div",1)(1,"div",2)(2,"div",3),M(3,"div",4)(4,"div",5),m(),h(5,"p",6),p(6,"Loading..."),m()()())}var tu=(()=>{class n{constructor(e){this.loadingService=e,this.loading=!1}ngOnInit(){this.loadingService.loading$.subscribe(e=>{this.loading=e})}static{this.\u0275fac=function(t){return new(t||n)(S(ea))}}static{this.\u0275cmp=V({type:n,selectors:[["app-loading-spinner"]],decls:1,vars:1,consts:[["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"spinner-container"],[1,"spinner"],[1,"double-bounce1"],[1,"double-bounce2"],[1,"loading-text"]],template:function(t,o){t&1&&P(0,Uy,7,0,"div",0),t&2&&x("ngIf",o.loading)},dependencies:[re],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner-container[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;position:relative;margin:0 auto 20px}.double-bounce1[_ngcontent-%COMP%], .double-bounce2[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#3f51b5;opacity:.6;position:absolute;top:0;left:0;animation:_ngcontent-%COMP%_sk-bounce 2s infinite ease-in-out}.double-bounce2[_ngcontent-%COMP%]{animation-delay:-1s}@keyframes _ngcontent-%COMP%_sk-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.loading-text[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:500;margin:0}"]})}}return n})();var iu=(()=>{class n{constructor(){this.title="FrontEnd-app"}static{this.API_URL="http://localhost:8080/api"}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,o){t&1&&M(0,"app-loading-spinner")(1,"app-header")(2,"router-outlet")},dependencies:[Zc,ps,tu]})}}return n})();function nu(n){return new J(3e3,!1)}function Gy(){return new J(3100,!1)}function Qy(){return new J(3101,!1)}function Ky(n){return new J(3001,!1)}function Yy(n){return new J(3003,!1)}function Xy(n){return new J(3004,!1)}function Zy(n,i){return new J(3005,!1)}function Jy(){return new J(3006,!1)}function ex(){return new J(3007,!1)}function tx(n,i){return new J(3008,!1)}function ix(n){return new J(3002,!1)}function nx(n,i,e,t,o){return new J(3010,!1)}function ox(){return new J(3011,!1)}function sx(){return new J(3012,!1)}function ax(){return new J(3200,!1)}function rx(){return new J(3202,!1)}function cx(){return new J(3013,!1)}function lx(n){return new J(3014,!1)}function dx(n){return new J(3015,!1)}function hx(n){return new J(3016,!1)}function mx(n,i){return new J(3404,!1)}function ux(n){return new J(3502,!1)}function px(n){return new J(3503,!1)}function fx(){return new J(3300,!1)}function gx(n){return new J(3504,!1)}function _x(n){return new J(3301,!1)}function bx(n,i){return new J(3302,!1)}function vx(n){return new J(3303,!1)}function yx(n,i){return new J(3400,!1)}function xx(n){return new J(3401,!1)}function Cx(n){return new J(3402,!1)}function wx(n,i){return new J(3505,!1)}function Li(n){switch(n.length){case 0:return new hn;case 1:return n[0];default:return new Ta(n)}}function _u(n,i,e=new Map,t=new Map){let o=[],s=[],a=-1,r=null;if(i.forEach(c=>{let l=c.get("offset"),d=l==a,u=d&&r||new Map;c.forEach((f,g)=>{let _=g,v=f;if(g!=="offset")switch(_=n.normalizePropertyName(_,o),v){case Yo:v=e.get(g);break;case zt:v=t.get(g);break;default:v=n.normalizeStyleValue(g,_,v,o);break}u.set(_,v)}),d||s.push(u),r=u,a=l}),o.length)throw ux(o);return s}function kc(n,i,e,t){switch(i){case"start":n.onStart(()=>t(e&&oc(e,"start",n)));break;case"done":n.onDone(()=>t(e&&oc(e,"done",n)));break;case"destroy":n.onDestroy(()=>t(e&&oc(e,"destroy",n)));break}}function oc(n,i,e){let t=e.totalTime,o=!!e.disabled,s=Ec(n.element,n.triggerName,n.fromState,n.toState,i||n.phaseName,t??n.totalTime,o),a=n._data;return a!=null&&(s._data=a),s}function Ec(n,i,e,t,o="",s=0,a){return{element:n,triggerName:i,fromState:e,toState:t,phaseName:o,totalTime:s,disabled:!!a}}function rt(n,i,e){let t=n.get(i);return t||n.set(i,t=e),t}function ou(n){let i=n.indexOf(":"),e=n.substring(1,i),t=n.slice(i+1);return[e,t]}var Mx=typeof document>"u"?null:document.documentElement;function Tc(n){let i=n.parentNode||n.host||null;return i===Mx?null:i}function Sx(n){return n.substring(1,6)=="ebkit"}var tn=null,su=!1;function kx(n){tn||(tn=Ex()||{},su=tn.style?"WebkitAppearance"in tn.style:!1);let i=!0;return tn.style&&!Sx(n)&&(i=n in tn.style,!i&&su&&(i="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in tn.style)),i}function Ex(){return typeof document<"u"?document.body:null}function bu(n,i){for(;i;){if(i===n)return!0;i=Tc(i)}return!1}function vu(n,i,e){if(e)return Array.from(n.querySelectorAll(i));let t=n.querySelector(i);return t?[t]:[]}var Ic=(()=>{class n{validateStyleProperty(e){return kx(e)}containsElement(e,t){return bu(e,t)}getParentElement(e){return Tc(e)}query(e,t,o){return vu(e,t,o)}computeStyle(e,t,o){return o||""}animate(e,t,o,s,a,r=[],c){return new hn(o,s)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),sn=class{static{this.NOOP=new Ic}},an=class{};var Tx=1e3,yu="{{",Ix="}}",xu="ng-enter",dc="ng-leave",ta="ng-trigger",aa=".ng-trigger",au="ng-animating",hc=".ng-animating";function ui(n){if(typeof n=="number")return n;let i=n.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:mc(parseFloat(i[1]),i[2])}function mc(n,i){switch(i){case"s":return n*Tx;default:return n}}function ra(n,i,e){return n.hasOwnProperty("duration")?n:Dx(n,i,e)}function Dx(n,i,e){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,s=0,a="";if(typeof n=="string"){let r=n.match(t);if(r===null)return i.push(nu(n)),{duration:0,delay:0,easing:""};o=mc(parseFloat(r[1]),r[2]);let c=r[3];c!=null&&(s=mc(parseFloat(c),r[4]));let l=r[5];l&&(a=l)}else o=n;if(!e){let r=!1,c=i.length;o<0&&(i.push(Gy()),r=!0),s<0&&(i.push(Qy()),r=!0),r&&i.splice(c,0,nu(n))}return{duration:o,delay:s,easing:a}}function Px(n){return n.length?n[0]instanceof Map?n:n.map(i=>new Map(Object.entries(i))):[]}function Xt(n,i,e){i.forEach((t,o)=>{let s=Dc(o);e&&!e.has(o)&&e.set(o,n.style[s]),n.style[s]=t})}function on(n,i){i.forEach((e,t)=>{let o=Dc(t);n.style[o]=""})}function Ro(n){return Array.isArray(n)?n.length==1?n[0]:ml(n):n}function Rx(n,i,e){let t=i.params||{},o=Cu(n);o.length&&o.forEach(s=>{t.hasOwnProperty(s)||e.push(Ky(s))})}var uc=new RegExp(`${yu}\\s*(.+?)\\s*${Ix}`,"g");function Cu(n){let i=[];if(typeof n=="string"){let e;for(;e=uc.exec(n);)i.push(e[1]);uc.lastIndex=0}return i}function Ao(n,i,e){let t=`${n}`,o=t.replace(uc,(s,a)=>{let r=i[a];return r==null&&(e.push(Yy(a)),r=""),r.toString()});return o==t?n:o}var Ox=/-+([a-z0-9])/g;function Dc(n){return n.replace(Ox,(...i)=>i[1].toUpperCase())}function Ax(n,i){return n===0||i===0}function Fx(n,i,e){if(e.size&&i.length){let t=i[0],o=[];if(e.forEach((s,a)=>{t.has(a)||o.push(a),t.set(a,s)}),o.length)for(let s=1;s<i.length;s++){let a=i[s];o.forEach(r=>a.set(r,Pc(n,r)))}}return i}function at(n,i,e){switch(i.type){case X.Trigger:return n.visitTrigger(i,e);case X.State:return n.visitState(i,e);case X.Transition:return n.visitTransition(i,e);case X.Sequence:return n.visitSequence(i,e);case X.Group:return n.visitGroup(i,e);case X.Animate:return n.visitAnimate(i,e);case X.Keyframes:return n.visitKeyframes(i,e);case X.Style:return n.visitStyle(i,e);case X.Reference:return n.visitReference(i,e);case X.AnimateChild:return n.visitAnimateChild(i,e);case X.AnimateRef:return n.visitAnimateRef(i,e);case X.Query:return n.visitQuery(i,e);case X.Stagger:return n.visitStagger(i,e);default:throw Xy(i.type)}}function Pc(n,i){return window.getComputedStyle(n)[i]}var Lx=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ca=class extends an{normalizePropertyName(i,e){return Dc(i)}normalizeStyleValue(i,e,t,o){let s="",a=t.toString().trim();if(Lx.has(e)&&t!==0&&t!=="0")if(typeof t=="number")s="px";else{let r=t.match(/^[+-]?[\d\.]+([a-z]*)$/);r&&r[1].length==0&&o.push(Zy(i,t))}return a+s}};var la="*";function Nx(n,i){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(t=>zx(t,e,i)):e.push(n),e}function zx(n,i,e){if(n[0]==":"){let c=Bx(n,e);if(typeof c=="function"){i.push(c);return}n=c}let t=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return e.push(dx(n)),i;let o=t[1],s=t[2],a=t[3];i.push(ru(o,a));let r=o==la&&a==la;s[0]=="<"&&!r&&i.push(ru(a,o))}function Bx(n,i){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return i.push(hx(n)),"* => *"}}var ia=new Set(["true","1"]),na=new Set(["false","0"]);function ru(n,i){let e=ia.has(n)||na.has(n),t=ia.has(i)||na.has(i);return(o,s)=>{let a=n==la||n==o,r=i==la||i==s;return!a&&e&&typeof o=="boolean"&&(a=o?ia.has(n):na.has(n)),!r&&t&&typeof s=="boolean"&&(r=s?ia.has(i):na.has(i)),a&&r}}var wu=":self",jx=new RegExp(`s*${wu}s*,?`,"g");function Mu(n,i,e,t){return new pc(n).build(i,e,t)}var cu="",pc=class{constructor(i){this._driver=i}build(i,e,t){let o=new fc(e);return this._resetContextStyleTimingState(o),at(this,Ro(i),o)}_resetContextStyleTimingState(i){i.currentQuerySelector=cu,i.collectedStyles=new Map,i.collectedStyles.set(cu,new Map),i.currentTime=0}visitTrigger(i,e){let t=e.queryCount=0,o=e.depCount=0,s=[],a=[];return i.name.charAt(0)=="@"&&e.errors.push(Jy()),i.definitions.forEach(r=>{if(this._resetContextStyleTimingState(e),r.type==X.State){let c=r,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,e))}),c.name=l}else if(r.type==X.Transition){let c=this.visitTransition(r,e);t+=c.queryCount,o+=c.depCount,a.push(c)}else e.errors.push(ex())}),{type:X.Trigger,name:i.name,states:s,transitions:a,queryCount:t,depCount:o,options:null}}visitState(i,e){let t=this.visitStyle(i.styles,e),o=i.options&&i.options.params||null;if(t.containsDynamicStyles){let s=new Set,a=o||{};t.styles.forEach(r=>{r instanceof Map&&r.forEach(c=>{Cu(c).forEach(l=>{a.hasOwnProperty(l)||s.add(l)})})}),s.size&&e.errors.push(tx(i.name,[...s.values()]))}return{type:X.State,name:i.name,style:t,options:o?{params:o}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;let t=at(this,Ro(i.animation),e),o=Nx(i.expr,e.errors);return{type:X.Transition,matchers:o,animation:t,queryCount:e.queryCount,depCount:e.depCount,options:nn(i.options)}}visitSequence(i,e){return{type:X.Sequence,steps:i.steps.map(t=>at(this,t,e)),options:nn(i.options)}}visitGroup(i,e){let t=e.currentTime,o=0,s=i.steps.map(a=>{e.currentTime=t;let r=at(this,a,e);return o=Math.max(o,e.currentTime),r});return e.currentTime=o,{type:X.Group,steps:s,options:nn(i.options)}}visitAnimate(i,e){let t=Wx(i.timings,e.errors);e.currentAnimateTimings=t;let o,s=i.styles?i.styles:st({});if(s.type==X.Keyframes)o=this.visitKeyframes(s,e);else{let a=i.styles,r=!1;if(!a){r=!0;let l={};t.easing&&(l.easing=t.easing),a=st(l)}e.currentTime+=t.duration+t.delay;let c=this.visitStyle(a,e);c.isEmptyStep=r,o=c}return e.currentAnimateTimings=null,{type:X.Animate,timings:t,style:o,options:null}}visitStyle(i,e){let t=this._makeStyleAst(i,e);return this._validateStyleAst(t,e),t}_makeStyleAst(i,e){let t=[],o=Array.isArray(i.styles)?i.styles:[i.styles];for(let r of o)typeof r=="string"?r===zt?t.push(r):e.errors.push(ix(r)):t.push(new Map(Object.entries(r)));let s=!1,a=null;return t.forEach(r=>{if(r instanceof Map&&(r.has("easing")&&(a=r.get("easing"),r.delete("easing")),!s)){for(let c of r.values())if(c.toString().indexOf(yu)>=0){s=!0;break}}}),{type:X.Style,styles:t,easing:a,offset:i.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(i,e){let t=e.currentAnimateTimings,o=e.currentTime,s=e.currentTime;t&&s>0&&(s-=t.duration+t.delay),i.styles.forEach(a=>{typeof a!="string"&&a.forEach((r,c)=>{let l=e.collectedStyles.get(e.currentQuerySelector),d=l.get(c),u=!0;d&&(s!=o&&s>=d.startTime&&o<=d.endTime&&(e.errors.push(nx(c,d.startTime,d.endTime,s,o)),u=!1),s=d.startTime),u&&l.set(c,{startTime:s,endTime:o}),e.options&&Rx(r,e.options,e.errors)})})}visitKeyframes(i,e){let t={type:X.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(ox()),t;let o=1,s=0,a=[],r=!1,c=!1,l=0,d=i.steps.map(w=>{let C=this._makeStyleAst(w,e),E=C.offset!=null?C.offset:qx(C.styles),T=0;return E!=null&&(s++,T=C.offset=E),c=c||T<0||T>1,r=r||T<l,l=T,a.push(T),C});c&&e.errors.push(sx()),r&&e.errors.push(ax());let u=i.steps.length,f=0;s>0&&s<u?e.errors.push(rx()):s==0&&(f=o/(u-1));let g=u-1,_=e.currentTime,v=e.currentAnimateTimings,y=v.duration;return d.forEach((w,C)=>{let E=f>0?C==g?1:f*C:a[C],T=E*y;e.currentTime=_+v.delay+T,v.duration=T,this._validateStyleAst(w,e),w.offset=E,t.styles.push(w)}),t}visitReference(i,e){return{type:X.Reference,animation:at(this,Ro(i.animation),e),options:nn(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:X.AnimateChild,options:nn(i.options)}}visitAnimateRef(i,e){return{type:X.AnimateRef,animation:this.visitReference(i.animation,e),options:nn(i.options)}}visitQuery(i,e){let t=e.currentQuerySelector,o=i.options||{};e.queryCount++,e.currentQuery=i;let[s,a]=Vx(i.selector);e.currentQuerySelector=t.length?t+" "+s:s,rt(e.collectedStyles,e.currentQuerySelector,new Map);let r=at(this,Ro(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=t,{type:X.Query,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:r,originalSelector:i.selector,options:nn(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(cx());let t=i.timings==="full"?{duration:0,delay:0,easing:"full"}:ra(i.timings,e.errors,!0);return{type:X.Stagger,animation:at(this,Ro(i.animation),e),timings:t,options:null}}};function Vx(n){let i=!!n.split(/\s*,\s*/).find(e=>e==wu);return i&&(n=n.replace(jx,"")),n=n.replace(/@\*/g,aa).replace(/@\w+/g,e=>aa+"-"+e.slice(1)).replace(/:animating/g,hc),[n,i]}function Hx(n){return n?le({},n):null}var fc=class{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function qx(n){if(typeof n=="string")return null;let i=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let t=e;i=parseFloat(t.get("offset")),t.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;i=parseFloat(e.get("offset")),e.delete("offset")}return i}function Wx(n,i){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=ra(n,i).duration;return sc(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=sc(0,0,"");return s.dynamic=!0,s.strValue=e,s}let o=ra(e,i);return sc(o.duration,o.delay,o.easing)}function nn(n){return n?(n=le({},n),n.params&&(n.params=Hx(n.params))):n={},n}function sc(n,i,e){return{duration:n,delay:i,easing:e}}function Rc(n,i,e,t,o,s,a=null,r=!1){return{type:1,element:n,keyframes:i,preStyleProps:e,postStyleProps:t,duration:o,delay:s,totalTime:o+s,easing:a,subTimeline:r}}var Fo=class{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,e){let t=this._map.get(i);t||this._map.set(i,t=[]),t.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}},Ux=1,$x=":enter",Gx=new RegExp($x,"g"),Qx=":leave",Kx=new RegExp(Qx,"g");function Su(n,i,e,t,o,s=new Map,a=new Map,r,c,l=[]){return new gc().buildKeyframes(n,i,e,t,o,s,a,r,c,l)}var gc=class{buildKeyframes(i,e,t,o,s,a,r,c,l,d=[]){l=l||new Fo;let u=new _c(i,e,l,o,s,d,[]);u.options=c;let f=c.delay?ui(c.delay):0;u.currentTimeline.delayNextStep(f),u.currentTimeline.setStyles([a],null,u.errors,c),at(this,t,u);let g=u.timelines.filter(_=>_.containsAnimation());if(g.length&&r.size){let _;for(let v=g.length-1;v>=0;v--){let y=g[v];if(y.element===e){_=y;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([r],null,u.errors,c)}return g.length?g.map(_=>_.buildKeyframes()):[Rc(e,[],[],[],0,f,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){let t=e.subInstructions.get(e.element);if(t){let o=e.createSubContext(i.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(t,o,o.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=i}visitAnimateRef(i,e){let t=e.createSubContext(i.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,t),this.visitReference(i.animation,t),e.transformIntoNewTimeline(t.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,t){for(let o of i){let s=o?.delay;if(s){let a=typeof s=="number"?s:ui(Ao(s,o?.params??{},e.errors));t.delayNextStep(a)}}}_visitSubInstructions(i,e,t){let s=e.currentTimeline.currentTime,a=t.duration!=null?ui(t.duration):null,r=t.delay!=null?ui(t.delay):null;return a!==0&&i.forEach(c=>{let l=e.appendInstructionToTimeline(c,a,r);s=Math.max(s,l.duration+l.delay)}),s}visitReference(i,e){e.updateOptions(i.options,!0),at(this,i.animation,e),e.previousNode=i}visitSequence(i,e){let t=e.subContextCount,o=e,s=i.options;if(s&&(s.params||s.delay)&&(o=e.createSubContext(s),o.transformIntoNewTimeline(),s.delay!=null)){o.previousNode.type==X.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=da);let a=ui(s.delay);o.delayNextStep(a)}i.steps.length&&(i.steps.forEach(a=>at(this,a,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>t&&o.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){let t=[],o=e.currentTimeline.currentTime,s=i.options&&i.options.delay?ui(i.options.delay):0;i.steps.forEach(a=>{let r=e.createSubContext(i.options);s&&r.delayNextStep(s),at(this,a,r),o=Math.max(o,r.currentTimeline.currentTime),t.push(r.currentTimeline)}),t.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(o),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){let t=i.strValue,o=e.params?Ao(t,e.params,e.errors):t;return ra(o,e.errors)}else return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){let t=e.currentAnimateTimings=this._visitTiming(i.timings,e),o=e.currentTimeline;t.delay&&(e.incrementTime(t.delay),o.snapshotCurrentStyles());let s=i.style;s.type==X.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(t.duration),this.visitStyle(s,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){let t=e.currentTimeline,o=e.currentAnimateTimings;!o&&t.hasCurrentStyleProperties()&&t.forwardFrame();let s=o&&o.easing||i.easing;i.isEmptyStep?t.applyEmptyStep(s):t.setStyles(i.styles,s,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){let t=e.currentAnimateTimings,o=e.currentTimeline.duration,s=t.duration,r=e.createSubContext().currentTimeline;r.easing=t.easing,i.styles.forEach(c=>{let l=c.offset||0;r.forwardTime(l*s),r.setStyles(c.styles,c.easing,e.errors,e.options),r.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(r),e.transformIntoNewTimeline(o+s),e.previousNode=i}visitQuery(i,e){let t=e.currentTimeline.currentTime,o=i.options||{},s=o.delay?ui(o.delay):0;s&&(e.previousNode.type===X.Style||t==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=da);let a=t,r=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=r.length;let c=null;r.forEach((l,d)=>{e.currentQueryIndex=d;let u=e.createSubContext(i.options,l);s&&u.delayNextStep(s),l===e.element&&(c=u.currentTimeline),at(this,i.animation,u),u.currentTimeline.applyStylesToKeyframe();let f=u.currentTimeline.currentTime;a=Math.max(a,f)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){let t=e.parentContext,o=e.currentTimeline,s=i.timings,a=Math.abs(s.duration),r=a*(e.currentQueryTotal-1),c=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=r-c;break;case"full":c=t.currentStaggerTime;break}let d=e.currentTimeline;c&&d.delayNextStep(c);let u=d.currentTime;at(this,i.animation,e),e.previousNode=i,t.currentStaggerTime=o.currentTime-u+(o.startTime-t.currentTimeline.startTime)}},da={},_c=class n{constructor(i,e,t,o,s,a,r,c){this._driver=i,this.element=e,this.subInstructions=t,this._enterClassName=o,this._leaveClassName=s,this.errors=a,this.timelines=r,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=da,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new ha(this._driver,e,0),r.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;let t=i,o=this.options;t.duration!=null&&(o.duration=ui(t.duration)),t.delay!=null&&(o.delay=ui(t.delay));let s=t.params;if(s){let a=o.params;a||(a=this.options.params={}),Object.keys(s).forEach(r=>{(!e||!a.hasOwnProperty(r))&&(a[r]=Ao(s[r],a,this.errors))})}}_copyOptions(){let i={};if(this.options){let e=this.options.params;if(e){let t=i.params={};Object.keys(e).forEach(o=>{t[o]=e[o]})}}return i}createSubContext(i=null,e,t){let o=e||this.element,s=new n(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,t||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(i),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(i){return this.previousNode=da,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,t){let o={duration:e??i.duration,delay:this.currentTimeline.currentTime+(t??0)+i.delay,easing:""},s=new bc(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,o,i.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,t,o,s,a){let r=[];if(o&&r.push(this.element),i.length>0){i=i.replace(Gx,"."+this._enterClassName),i=i.replace(Kx,"."+this._leaveClassName);let c=t!=1,l=this._driver.query(this.element,i,c);t!==0&&(l=t<0?l.slice(l.length+t,l.length):l.slice(0,t)),r.push(...l)}return!s&&r.length==0&&a.push(lx(e)),r}},ha=class n{constructor(i,e,t,o){this._driver=i,this.element=e,this.startTime=t,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new n(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Ux,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||zt),this._currentKeyframe.set(e,zt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,t,o){e&&this._previousKeyframe.set("easing",e);let s=o&&o.params||{},a=Yx(i,this._globalTimelineStyles);for(let[r,c]of a){let l=Ao(c,s,t);this._pendingStyles.set(r,l),this._localTimelineStyles.has(r)||this._backFill.set(r,this._globalTimelineStyles.get(r)??zt),this._updateStyle(r,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,t)=>{let o=this._styleSummary.get(t);(!o||e.time>o.time)&&this._updateStyle(t,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let i=new Set,e=new Set,t=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((r,c)=>{let l=new Map([...this._backFill,...r]);l.forEach((d,u)=>{d===Yo?i.add(u):d===zt&&e.add(u)}),t||l.set("offset",c/this.duration),o.push(l)});let s=[...i.values()],a=[...e.values()];if(t){let r=o[0],c=new Map(r);r.set("offset",0),c.set("offset",1),o=[r,c]}return Rc(this.element,o,s,a,this.duration,this.startTime,this.easing,!1)}},bc=class extends ha{constructor(i,e,t,o,s,a,r=!1){super(i,e,a.delay),this.keyframes=t,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=r,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:t,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],a=t+e,r=e/a,c=new Map(i[0]);c.set("offset",0),s.push(c);let l=new Map(i[0]);l.set("offset",lu(r)),s.push(l);let d=i.length-1;for(let u=1;u<=d;u++){let f=new Map(i[u]),g=f.get("offset"),_=e+g*t;f.set("offset",lu(_/a)),s.push(f)}t=a,e=0,o="",i=s}return Rc(this.element,i,this.preStyleProps,this.postStyleProps,t,e,o,!0)}};function lu(n,i=3){let e=Math.pow(10,i-1);return Math.round(n*e)/e}function Yx(n,i){let e=new Map,t;return n.forEach(o=>{if(o==="*"){t??=i.keys();for(let s of t)e.set(s,zt)}else for(let[s,a]of o)e.set(s,a)}),e}function du(n,i,e,t,o,s,a,r,c,l,d,u,f){return{type:0,element:n,triggerName:i,isRemovalTransition:o,fromState:e,fromStyles:s,toState:t,toStyles:a,timelines:r,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:u,errors:f}}var ac={},ma=class{constructor(i,e,t){this._triggerName=i,this.ast=e,this._stateStyles=t}match(i,e,t,o){return Xx(this.ast.matchers,i,e,t,o)}buildStyles(i,e,t){let o=this._stateStyles.get("*");return i!==void 0&&(o=this._stateStyles.get(i?.toString())||o),o?o.buildStyles(e,t):new Map}build(i,e,t,o,s,a,r,c,l,d){let u=[],f=this.ast.options&&this.ast.options.params||ac,g=r&&r.params||ac,_=this.buildStyles(t,g,u),v=c&&c.params||ac,y=this.buildStyles(o,v,u),w=new Set,C=new Map,E=new Map,T=o==="void",k={params:ku(v,f),delay:this.ast.options?.delay},I=d?[]:Su(i,e,this.ast.animation,s,a,_,y,k,l,u),F=0;return I.forEach(D=>{F=Math.max(D.duration+D.delay,F)}),u.length?du(e,this._triggerName,t,o,T,_,y,[],[],C,E,F,u):(I.forEach(D=>{let N=D.element,q=rt(C,N,new Set);D.preStyleProps.forEach(U=>q.add(U));let W=rt(E,N,new Set);D.postStyleProps.forEach(U=>W.add(U)),N!==e&&w.add(N)}),du(e,this._triggerName,t,o,T,_,y,I,[...w.values()],C,E,F))}};function Xx(n,i,e,t,o){return n.some(s=>s(i,e,t,o))}function ku(n,i){let e=le({},i);return Object.entries(n).forEach(([t,o])=>{o!=null&&(e[t]=o)}),e}var vc=class{constructor(i,e,t){this.styles=i,this.defaultParams=e,this.normalizer=t}buildStyles(i,e){let t=new Map,o=ku(i,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,r)=>{a&&(a=Ao(a,o,e));let c=this.normalizer.normalizePropertyName(r,e);a=this.normalizer.normalizeStyleValue(r,c,a,e),t.set(r,a)})}),t}};function Zx(n,i,e){return new yc(n,i,e)}var yc=class{constructor(i,e,t){this.name=i,this.ast=e,this._normalizer=t,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{let s=o.options&&o.options.params||{};this.states.set(o.name,new vc(o.style,s,t))}),hu(this.states,"true","1"),hu(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new ma(i,o,this.states))}),this.fallbackTransition=Jx(i,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,t,o){return this.transitionFactories.find(a=>a.match(i,e,t,o))||null}matchStyles(i,e,t){return this.fallbackTransition.buildStyles(i,e,t)}};function Jx(n,i,e){let t=[(a,r)=>!0],o={type:X.Sequence,steps:[],options:null},s={type:X.Transition,animation:o,matchers:t,options:null,queryCount:0,depCount:0};return new ma(n,s,i)}function hu(n,i,e){n.has(i)?n.has(e)||n.set(e,n.get(i)):n.has(e)&&n.set(i,n.get(e))}var e1=new Fo,xc=class{constructor(i,e,t){this.bodyNode=i,this._driver=e,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,e){let t=[],o=[],s=Mu(this._driver,e,t,o);if(t.length)throw px(t);o.length&&void 0,this._animations.set(i,s)}_buildPlayer(i,e,t){let o=i.element,s=_u(this._normalizer,i.keyframes,e,t);return this._driver.animate(o,s,i.duration,i.delay,i.easing,[],!0)}create(i,e,t={}){let o=[],s=this._animations.get(i),a,r=new Map;if(s?(a=Su(this._driver,e,s,xu,dc,new Map,new Map,t,e1,o),a.forEach(d=>{let u=rt(r,d.element,new Map);d.postStyleProps.forEach(f=>u.set(f,null))})):(o.push(fx()),a=[]),o.length)throw gx(o);r.forEach((d,u)=>{d.forEach((f,g)=>{d.set(g,this._driver.computeStyle(u,g,zt))})});let c=a.map(d=>{let u=r.get(d.element);return this._buildPlayer(d,new Map,u)}),l=Li(c);return this._playersById.set(i,l),l.onDestroy(()=>this.destroy(i)),this.players.push(l),l}destroy(i){let e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);let t=this.players.indexOf(e);t>=0&&this.players.splice(t,1)}_getPlayer(i){let e=this._playersById.get(i);if(!e)throw _x(i);return e}listen(i,e,t,o){let s=Ec(e,"","","");return kc(this._getPlayer(i),t,s,o),()=>{}}command(i,e,t,o){if(t=="register"){this.register(i,o[0]);return}if(t=="create"){let a=o[0]||{};this.create(i,e,a);return}let s=this._getPlayer(i);switch(t){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(i);break}}},mu="ng-animate-queued",t1=".ng-animate-queued",rc="ng-animate-disabled",i1=".ng-animate-disabled",n1="ng-star-inserted",o1=".ng-star-inserted",s1=[],Eu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},a1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tt="__ng_removed",Lo=class{get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;let t=i&&i.hasOwnProperty("value"),o=t?i.value:i;if(this.value=c1(o),t){let s=i,{value:a}=s,r=Oc(s,["value"]);this.options=r}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){let e=i.params;if(e){let t=this.options.params;Object.keys(e).forEach(o=>{t[o]==null&&(t[o]=e[o])})}}},Oo="void",cc=new Lo(Oo),Cc=class{constructor(i,e,t){this.id=i,this.hostElement=e,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,yt(e,this._hostClassName)}listen(i,e,t,o){if(!this._triggers.has(e))throw bx(t,e);if(t==null||t.length==0)throw vx(e);if(!l1(t))throw yx(t,e);let s=rt(this._elementListeners,i,[]),a={name:e,phase:t,callback:o};s.push(a);let r=rt(this._engine.statesByElement,i,new Map);return r.has(e)||(yt(i,ta),yt(i,ta+"-"+e),r.set(e,cc)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(a);c>=0&&s.splice(c,1),this._triggers.has(e)||r.delete(e)})}}register(i,e){return this._triggers.has(i)?!1:(this._triggers.set(i,e),!0)}_getTrigger(i){let e=this._triggers.get(i);if(!e)throw xx(i);return e}trigger(i,e,t,o=!0){let s=this._getTrigger(e),a=new No(this.id,e,i),r=this._engine.statesByElement.get(i);r||(yt(i,ta),yt(i,ta+"-"+e),this._engine.statesByElement.set(i,r=new Map));let c=r.get(e),l=new Lo(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),r.set(e,l),c||(c=cc),!(l.value===Oo)&&c.value===l.value){if(!m1(c.params,l.params)){let v=[],y=s.matchStyles(c.value,c.params,v),w=s.matchStyles(l.value,l.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{on(i,y),Xt(i,w)})}return}let f=rt(this._engine.playersByElement,i,[]);f.forEach(v=>{v.namespaceId==this.id&&v.triggerName==e&&v.queued&&v.destroy()});let g=s.matchTransition(c.value,l.value,i,l.params),_=!1;if(!g){if(!o)return;g=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:g,fromState:c,toState:l,player:a,isFallbackTransition:_}),_||(yt(i,mu),a.onStart(()=>{Kn(i,mu)})),a.onDone(()=>{let v=this.players.indexOf(a);v>=0&&this.players.splice(v,1);let y=this._engine.playersByElement.get(i);if(y){let w=y.indexOf(a);w>=0&&y.splice(w,1)}}),this.players.push(a),f.push(a),a}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,t)=>{this._elementListeners.set(t,e.filter(o=>o.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);let e=this._engine.playersByElement.get(i);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){let t=this._engine.driver.query(i,aa,!0);t.forEach(o=>{if(o[Tt])return;let s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(a=>a.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(i,e,t,o){let s=this._engine.statesByElement.get(i),a=new Map;if(s){let r=[];if(s.forEach((c,l)=>{if(a.set(l,c.value),this._triggers.has(l)){let d=this.trigger(i,l,Oo,o);d&&r.push(d)}}),r.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,a),t&&Li(r).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){let e=this._elementListeners.get(i),t=this._engine.statesByElement.get(i);if(e&&t){let o=new Set;e.forEach(s=>{let a=s.name;if(o.has(a))return;o.add(a);let c=this._triggers.get(a).fallbackTransition,l=t.get(a)||cc,d=new Lo(Oo),u=new No(this.id,a,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:a,transition:c,fromState:l,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(i,e){let t=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let o=!1;if(t.totalAnimations){let s=t.players.length?t.playersByQueriedElement.get(i):[];if(s&&s.length)o=!0;else{let a=i;for(;a=a.parentNode;)if(t.statesByElement.get(a)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(i),o)t.markElementAsRemoved(this.id,i,!1,e);else{let s=i[Tt];(!s||s===Eu)&&(t.afterFlush(()=>this.clearElementCache(i)),t.destroyInnerAnimations(i),t._onRemovalComplete(i,e))}}insertNode(i,e){yt(i,this._hostClassName)}drainQueuedTransitions(i){let e=[];return this._queue.forEach(t=>{let o=t.player;if(o.destroyed)return;let s=t.element,a=this._elementListeners.get(s);a&&a.forEach(r=>{if(r.name==t.triggerName){let c=Ec(s,t.triggerName,t.fromState.value,t.toState.value);c._data=i,kc(t.player,r.phase,c,r.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(t)}),this._queue=[],e.sort((t,o)=>{let s=t.transition.ast.depCount,a=o.transition.ast.depCount;return s==0||a==0?s-a:this._engine.driver.containsElement(t.element,o.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}},wc=class{_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,t){this.bodyNode=i,this.driver=e,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let i=[];return this._namespaceList.forEach(e=>{e.players.forEach(t=>{t.queued&&i.push(t)})}),i}createNamespace(i,e){let t=new Cc(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(t,e):(this.newHostElements.set(e,t),this.collectEnterElement(e)),this._namespaceLookup[i]=t}_balanceNamespaceList(i,e){let t=this._namespaceList,o=this.namespacesByHostElement;if(t.length-1>=0){let a=!1,r=this.driver.getParentElement(e);for(;r;){let c=o.get(r);if(c){let l=t.indexOf(c);t.splice(l+1,0,i),a=!0;break}r=this.driver.getParentElement(r)}a||t.unshift(i)}else t.push(i);return o.set(e,i),i}register(i,e){let t=this._namespaceLookup[i];return t||(t=this.createNamespace(i,e)),t}registerTrigger(i,e,t){let o=this._namespaceLookup[i];o&&o.register(e,t)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(i);this.namespacesByHostElement.delete(t.hostElement);let o=this._namespaceList.indexOf(t);o>=0&&this._namespaceList.splice(o,1),t.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){let e=new Set,t=this.statesByElement.get(i);if(t){for(let o of t.values())if(o.namespaceId){let s=this._fetchNamespace(o.namespaceId);s&&e.add(s)}}return e}trigger(i,e,t,o){if(oa(e)){let s=this._fetchNamespace(i);if(s)return s.trigger(e,t,o),!0}return!1}insertNode(i,e,t,o){if(!oa(e))return;let s=e[Tt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(i){let a=this._fetchNamespace(i);a&&a.insertNode(e,t)}o&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),yt(i,rc)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),Kn(i,rc))}removeNode(i,e,t){if(oa(e)){let o=i?this._fetchNamespace(i):null;o?o.removeNode(e,t):this.markElementAsRemoved(i,e,!1,t);let s=this.namespacesByHostElement.get(e);s&&s.id!==i&&s.removeNode(e,t)}else this._onRemovalComplete(e,t)}markElementAsRemoved(i,e,t,o,s){this.collectedLeaveElements.push(e),e[Tt]={namespaceId:i,setForRemoval:o,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:s}}listen(i,e,t,o,s){return oa(e)?this._fetchNamespace(i).listen(e,t,o,s):()=>{}}_buildInstruction(i,e,t,o,s){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,t,o,i.fromState.options,i.toState.options,e,s)}destroyInnerAnimations(i){let e=this.driver.query(i,aa,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(i,hc,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(i){let e=this.playersByElement.get(i);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(i){let e=this.playersByQueriedElement.get(i);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Li(this.players).onDone(()=>i());i()})}processLeaveNode(i){let e=i[Tt];if(e&&e.setForRemoval){if(i[Tt]=Eu,e.namespaceId){this.destroyInnerAnimations(i);let t=this._fetchNamespace(e.namespaceId);t&&t.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(rc)&&this.markElementAsDisabled(i,!1),this.driver.query(i,i1,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,o)=>this._balanceNamespaceList(t,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let o=this.collectedEnterElements[t];yt(o,n1)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{e=this._flushAnimations(t,i)}finally{for(let o=0;o<t.length;o++)t[o]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let o=this.collectedLeaveElements[t];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],e.length?Li(e).onDone(()=>{t.forEach(o=>o())}):t.forEach(o=>o())}}reportError(i){throw Cx(i)}_flushAnimations(i,e){let t=new Fo,o=[],s=new Map,a=[],r=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(O=>{d.add(O);let L=this.driver.query(O,t1,!0);for(let B=0;B<L.length;B++)d.add(L[B])});let u=this.bodyNode,f=Array.from(this.statesByElement.keys()),g=fu(f,this.collectedEnterElements),_=new Map,v=0;g.forEach((O,L)=>{let B=xu+v++;_.set(L,B),O.forEach(H=>yt(H,B))});let y=[],w=new Set,C=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){let L=this.collectedLeaveElements[O],B=L[Tt];B&&B.setForRemoval&&(y.push(L),w.add(L),B.hasAnimation?this.driver.query(L,o1,!0).forEach(H=>w.add(H)):C.add(L))}let E=new Map,T=fu(f,Array.from(w));T.forEach((O,L)=>{let B=dc+v++;E.set(L,B),O.forEach(H=>yt(H,B))}),i.push(()=>{g.forEach((O,L)=>{let B=_.get(L);O.forEach(H=>Kn(H,B))}),T.forEach((O,L)=>{let B=E.get(L);O.forEach(H=>Kn(H,B))}),y.forEach(O=>{this.processLeaveNode(O)})});let k=[],I=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(B=>{let H=B.player,fe=B.element;if(k.push(H),this.collectedEnterElements.length){let qe=fe[Tt];if(qe&&qe.setForMove){if(qe.previousTriggersValues&&qe.previousTriggersValues.has(B.triggerName)){let Ni=qe.previousTriggersValues.get(B.triggerName),ct=this.statesByElement.get(B.element);if(ct&&ct.has(B.triggerName)){let zo=ct.get(B.triggerName);zo.value=Ni,ct.set(B.triggerName,zo)}}H.destroy();return}}let Qe=!u||!this.driver.containsElement(u,fe),Se=E.get(fe),Ye=_.get(fe),ne=this._buildInstruction(B,t,Ye,Se,Qe);if(ne.errors&&ne.errors.length){I.push(ne);return}if(Qe){H.onStart(()=>on(fe,ne.fromStyles)),H.onDestroy(()=>Xt(fe,ne.toStyles)),o.push(H);return}if(B.isFallbackTransition){H.onStart(()=>on(fe,ne.fromStyles)),H.onDestroy(()=>Xt(fe,ne.toStyles)),o.push(H);return}let pi=[];ne.timelines.forEach(qe=>{qe.stretchStartingKeyframe=!0,this.disabledNodes.has(qe.element)||pi.push(qe)}),ne.timelines=pi,t.append(fe,ne.timelines);let Zt={instruction:ne,player:H,element:fe};a.push(Zt),ne.queriedElements.forEach(qe=>rt(r,qe,[]).push(H)),ne.preStyleProps.forEach((qe,Ni)=>{if(qe.size){let ct=c.get(Ni);ct||c.set(Ni,ct=new Set),qe.forEach((zo,_a)=>ct.add(_a))}}),ne.postStyleProps.forEach((qe,Ni)=>{let ct=l.get(Ni);ct||l.set(Ni,ct=new Set),qe.forEach((zo,_a)=>ct.add(_a))})});if(I.length){let O=[];I.forEach(L=>{O.push(wx(L.triggerName,L.errors))}),k.forEach(L=>L.destroy()),this.reportError(O)}let F=new Map,D=new Map;a.forEach(O=>{let L=O.element;t.has(L)&&(D.set(L,L),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,F))}),o.forEach(O=>{let L=O.element;this._getPreviousPlayers(L,!1,O.namespaceId,O.triggerName,null).forEach(H=>{rt(F,L,[]).push(H),H.destroy()})});let N=y.filter(O=>gu(O,c,l)),q=new Map;pu(q,this.driver,C,l,zt).forEach(O=>{gu(O,c,l)&&N.push(O)});let U=new Map;g.forEach((O,L)=>{pu(U,this.driver,new Set(O),c,Yo)}),N.forEach(O=>{let L=q.get(O),B=U.get(O);q.set(O,new Map([...L?.entries()??[],...B?.entries()??[]]))});let Me=[],He=[],ie={};a.forEach(O=>{let{element:L,player:B,instruction:H}=O;if(t.has(L)){if(d.has(L)){B.onDestroy(()=>Xt(L,H.toStyles)),B.disabled=!0,B.overrideTotalTime(H.totalTime),o.push(B);return}let fe=ie;if(D.size>1){let Se=L,Ye=[];for(;Se=Se.parentNode;){let ne=D.get(Se);if(ne){fe=ne;break}Ye.push(Se)}Ye.forEach(ne=>D.set(ne,fe))}let Qe=this._buildAnimation(B.namespaceId,H,F,s,U,q);if(B.setRealPlayer(Qe),fe===ie)Me.push(B);else{let Se=this.playersByElement.get(fe);Se&&Se.length&&(B.parentPlayer=Li(Se)),o.push(B)}}else on(L,H.fromStyles),B.onDestroy(()=>Xt(L,H.toStyles)),He.push(B),d.has(L)&&o.push(B)}),He.forEach(O=>{let L=s.get(O.element);if(L&&L.length){let B=Li(L);O.setRealPlayer(B)}}),o.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<y.length;O++){let L=y[O],B=L[Tt];if(Kn(L,dc),B&&B.hasAnimation)continue;let H=[];if(r.size){let Qe=r.get(L);Qe&&Qe.length&&H.push(...Qe);let Se=this.driver.query(L,hc,!0);for(let Ye=0;Ye<Se.length;Ye++){let ne=r.get(Se[Ye]);ne&&ne.length&&H.push(...ne)}}let fe=H.filter(Qe=>!Qe.destroyed);fe.length?d1(this,L,fe):this.processLeaveNode(L)}return y.length=0,Me.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();let L=this.players.indexOf(O);this.players.splice(L,1)}),O.play()}),Me}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,t,o,s){let a=[];if(e){let r=this.playersByQueriedElement.get(i);r&&(a=r)}else{let r=this.playersByElement.get(i);if(r){let c=!s||s==Oo;r.forEach(l=>{l.queued||!c&&l.triggerName!=o||a.push(l)})}}return(t||o)&&(a=a.filter(r=>!(t&&t!=r.namespaceId||o&&o!=r.triggerName))),a}_beforeAnimationBuild(i,e,t){let o=e.triggerName,s=e.element,a=e.isRemovalTransition?void 0:i,r=e.isRemovalTransition?void 0:o;for(let c of e.timelines){let l=c.element,d=l!==s,u=rt(t,l,[]);this._getPreviousPlayers(l,d,a,r,e.toState).forEach(g=>{let _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),u.push(g)})}on(s,e.fromStyles)}_buildAnimation(i,e,t,o,s,a){let r=e.triggerName,c=e.element,l=[],d=new Set,u=new Set,f=e.timelines.map(_=>{let v=_.element;d.add(v);let y=v[Tt];if(y&&y.removedBeforeQueried)return new hn(_.duration,_.delay);let w=v!==c,C=h1((t.get(v)||s1).map(F=>F.getRealPlayer())).filter(F=>{let D=F;return D.element?D.element===v:!1}),E=s.get(v),T=a.get(v),k=_u(this._normalizer,_.keyframes,E,T),I=this._buildPlayer(_,k,C);if(_.subTimeline&&o&&u.add(v),w){let F=new No(i,r,v);F.setRealPlayer(I),l.push(F)}return I});l.forEach(_=>{rt(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>r1(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>yt(_,au));let g=Li(f);return g.onDestroy(()=>{d.forEach(_=>Kn(_,au)),Xt(c,e.toStyles)}),u.forEach(_=>{rt(o,_,[]).push(g)}),g}_buildPlayer(i,e,t){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,t):new hn(i.duration,i.delay)}},No=class{constructor(i,e,t){this.namespaceId=i,this.triggerName=e,this.element=t,this._player=new hn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,t)=>{e.forEach(o=>kc(i,t,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){let e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){rt(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){let e=this._player;e.triggerCallback&&e.triggerCallback(i)}};function r1(n,i,e){let t=n.get(i);if(t){if(t.length){let o=t.indexOf(e);t.splice(o,1)}t.length==0&&n.delete(i)}return t}function c1(n){return n??null}function oa(n){return n&&n.nodeType===1}function l1(n){return n=="start"||n=="done"}function uu(n,i){let e=n.style.display;return n.style.display=i??"none",e}function pu(n,i,e,t,o){let s=[];e.forEach(c=>s.push(uu(c)));let a=[];t.forEach((c,l)=>{let d=new Map;c.forEach(u=>{let f=i.computeStyle(l,u,o);d.set(u,f),(!f||f.length==0)&&(l[Tt]=a1,a.push(l))}),n.set(l,d)});let r=0;return e.forEach(c=>uu(c,s[r++])),a}function fu(n,i){let e=new Map;if(n.forEach(r=>e.set(r,[])),i.length==0)return e;let t=1,o=new Set(i),s=new Map;function a(r){if(!r)return t;let c=s.get(r);if(c)return c;let l=r.parentNode;return e.has(l)?c=l:o.has(l)?c=t:c=a(l),s.set(r,c),c}return i.forEach(r=>{let c=a(r);c!==t&&e.get(c).push(r)}),e}function yt(n,i){n.classList?.add(i)}function Kn(n,i){n.classList?.remove(i)}function d1(n,i,e){Li(e).onDone(()=>n.processLeaveNode(i))}function h1(n){let i=[];return Tu(n,i),i}function Tu(n,i){for(let e=0;e<n.length;e++){let t=n[e];t instanceof Ta?Tu(t.players,i):i.push(t)}}function m1(n,i){let e=Object.keys(n),t=Object.keys(i);if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++){let s=e[o];if(!i.hasOwnProperty(s)||n[s]!==i[s])return!1}return!0}function gu(n,i,e){let t=e.get(n);if(!t)return!1;let o=i.get(n);return o?t.forEach(s=>o.add(s)):i.set(n,t),e.delete(n),!0}var Yn=class{constructor(i,e,t){this._driver=e,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new wc(i.body,e,t),this._timelineEngine=new xc(i.body,e,t),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(i,e,t,o,s){let a=i+"-"+o,r=this._triggerCache[a];if(!r){let c=[],l=[],d=Mu(this._driver,s,c,l);if(c.length)throw mx(o,c);l.length&&void 0,r=Zx(o,d,this._normalizer),this._triggerCache[a]=r}this._transitionEngine.registerTrigger(e,o,r)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,t,o){this._transitionEngine.insertNode(i,e,t,o)}onRemove(i,e,t){this._transitionEngine.removeNode(i,e,t)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,t,o){if(t.charAt(0)=="@"){let[s,a]=ou(t),r=o;this._timelineEngine.command(s,e,a,r)}else this._transitionEngine.trigger(i,e,t,o)}listen(i,e,t,o,s){if(t.charAt(0)=="@"){let[a,r]=ou(t);return this._timelineEngine.listen(a,e,r,s)}return this._transitionEngine.listen(i,e,t,o,s)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}};function u1(n,i){let e=null,t=null;return Array.isArray(i)&&i.length?(e=lc(i[0]),i.length>1&&(t=lc(i[i.length-1]))):i instanceof Map&&(e=lc(i)),e||t?new Mc(n,e,t):null}var Mc=class n{static{this.initialStylesByElement=new WeakMap}constructor(i,e,t){this._element=i,this._startStyles=e,this._endStyles=t,this._state=0;let o=n.initialStylesByElement.get(i);o||n.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Xt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xt(this._element,this._initialStyles),this._endStyles&&(Xt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(on(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(on(this._element,this._endStyles),this._endStyles=null),Xt(this._element,this._initialStyles),this._state=3)}};function lc(n){let i=null;return n.forEach((e,t)=>{p1(t)&&(i=i||new Map,i.set(t,e))}),i}function p1(n){return n==="display"||n==="position"}var ua=class{constructor(i,e,t,o){this.element=i,this.keyframes=e,this.options=t,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){let e=[];return i.forEach(t=>{e.push(Object.fromEntries(t))}),e}_triggerWebAnimation(i,e,t){return i.animate(this._convertKeyframesToObject(e),t)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,o)=>{o!=="offset"&&i.set(o,this._finished?t:Pc(this.element,o))}),this.currentSnapshot=i}triggerCallback(i){let e=i==="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},pa=class{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}containsElement(i,e){return bu(i,e)}getParentElement(i){return Tc(i)}query(i,e,t){return vu(i,e,t)}computeStyle(i,e,t){return Pc(i,e)}animate(i,e,t,o,s,a=[]){let r=o==0?"both":"forwards",c={duration:t,delay:o,fill:r};s&&(c.easing=s);let l=new Map,d=a.filter(g=>g instanceof ua);Ax(t,o)&&d.forEach(g=>{g.currentSnapshot.forEach((_,v)=>l.set(v,_))});let u=Px(e).map(g=>new Map(g));u=Fx(i,u,l);let f=u1(i,u);return new ua(i,u,c,f)}};var sa="@",Iu="@.disabled",fa=class{constructor(i,e,t,o){this.namespaceId=i,this.delegate=e,this.engine=t,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(i){this.delegate.destroyNode?.(i)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,t,o=!0){this.delegate.insertBefore(i,e,t),this.engine.onInsert(this.namespaceId,e,i,o)}removeChild(i,e,t){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,t,o){this.delegate.setAttribute(i,e,t,o)}removeAttribute(i,e,t){this.delegate.removeAttribute(i,e,t)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,t,o){this.delegate.setStyle(i,e,t,o)}removeStyle(i,e,t){this.delegate.removeStyle(i,e,t)}setProperty(i,e,t){e.charAt(0)==sa&&e==Iu?this.disableAnimations(i,!!t):this.delegate.setProperty(i,e,t)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,t){return this.delegate.listen(i,e,t)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}},Sc=class extends fa{constructor(i,e,t,o,s){super(e,t,o,s),this.factory=i,this.namespaceId=e}setProperty(i,e,t){e.charAt(0)==sa?e.charAt(1)=="."&&e==Iu?(t=t===void 0?!0:!!t,this.disableAnimations(i,t)):this.engine.process(this.namespaceId,i,e.slice(1),t):this.delegate.setProperty(i,e,t)}listen(i,e,t){if(e.charAt(0)==sa){let o=f1(i),s=e.slice(1),a="";return s.charAt(0)!=sa&&([s,a]=g1(s)),this.engine.listen(this.namespaceId,o,s,a,r=>{let c=r._data||-1;this.factory.scheduleListenerCallback(c,t,r)})}return this.delegate.listen(i,e,t)}};function f1(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function g1(n){let i=n.indexOf("."),e=n.substring(0,i),t=n.slice(i+1);return[e,t]}var ga=class{constructor(i,e,t){this.delegate=i,this.engine=e,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(o,s)=>{s?.removeChild(null,o)}}createRenderer(i,e){let t="",o=this.delegate.createRenderer(i,e);if(!i||!e?.data?.animation){let l=this._rendererCache,d=l.get(o);if(!d){let u=()=>l.delete(o);d=new fa(t,o,this.engine,u),l.set(o,d)}return d}let s=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,i);let r=l=>{Array.isArray(l)?l.forEach(r):this.engine.registerTrigger(s,a,i,l.name,l)};return e.data.animation.forEach(r),new Sc(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,t){if(i>=0&&i<this._microtaskId){this._zone.run(()=>e(t));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(s=>{let[a,r]=s;a(r)}),this._animationCallbacksBuffer=[]})}),o.push([e,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var b1=(()=>{class n extends Yn{constructor(e,t,o){super(e,t,o)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(t){return new(t||n)(ge(wt),ge(sn),ge(an))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();function v1(){return new ca}function y1(n,i,e){return new ga(n,i,e)}var Pu=[{provide:an,useFactory:v1},{provide:Yn,useClass:b1},{provide:Bc,useFactory:y1,deps:[Qc,Yn,Ke]}],Du=[{provide:sn,useFactory:()=>new pa},{provide:ii,useValue:"BrowserAnimations"},...Pu],x1=[{provide:sn,useClass:Ic},{provide:ii,useValue:"NoopAnimations"},...Pu],Ru=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?x1:Du}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({providers:Du,imports:[Uo]})}}return n})();var Ou=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[Ia,Te,Ia,Te]})}}return n})();var Au=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=xe({imports:[Te,ao,ao,Te]})}}return n})();var Fu=(()=>{class n{constructor(e){this.authService=e,this.isTokenRefreshing=!1,this.refreshTokenSubject=new Ac(null)}intercept(e,t){if(e.url.indexOf("refresh")!==-1||e.url.indexOf("login")!==-1)return t.handle(e);let o=this.authService.getJwtToken();return o?t.handle(this.addToken(e,o)).pipe(Zn(s=>s instanceof $c&&s.status===403?this.handleAuthErrors(e,t):rn(s))):t.handle(e)}handleAuthErrors(e,t){return this.isTokenRefreshing?this.refreshTokenSubject.pipe(Bi(o=>o!==null),Jn(1),gi(o=>t.handle(this.addToken(e,this.authService.getJwtToken())))):(this.isTokenRefreshing=!0,this.refreshTokenSubject.next(null),this.authService.refreshToken().pipe(gi(o=>(this.isTokenRefreshing=!1,this.refreshTokenSubject.next(o.accessToken),t.handle(this.addToken(e,o.accessToken))))))}addToken(e,t){return e.clone({headers:e.headers.set("Authorization","Bearer "+t)})}static{this.\u0275fac=function(t){return new(t||n)(ge(Xe))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lu=(()=>{class n{constructor(e,t){this.toastr=e,this.router=t}intercept(e,t){return t.handle(e).pipe(Zn(o=>o.status>=500&&e.method==="GET"&&!e.url.includes("/auth/")?t.handle(e).pipe(Zn(s=>this.handleError(s))):this.handleError(o)))}handleError(e){let t="An error occurred";if(e.error instanceof ErrorEvent)t=`Error: ${e.error.message}`;else switch(e.status){case 0:t="Unable to connect to server. Please check your connection.";break;case 400:t=e.error?.message||"Bad request. Please check your input.";break;case 401:t="Session expired. Please login again.",this.router.navigate(["/login"]);break;case 403:t="Access denied. You do not have permission.";break;case 404:t="Resource not found.";break;case 409:t=e.error?.message||"Conflict occurred.";break;case 500:t="Server error. Please try again later.";break;case 503:t="Service unavailable. Please try again later.";break;default:t=e.error?.message||`Error ${e.status}: ${e.message}`}return e.status!==401&&this.toastr.error(t,"Error",{timeOut:5e3,progressBar:!0,closeButton:!0}),console.error("HTTP Error:",e),rn(()=>e)}static{this.\u0275fac=function(t){return new(t||n)(ge(Wt),ge(be))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();var Nu=(()=>{class n{constructor(e){this.loadingService=e}intercept(e,t){return this.loadingService.show(),t.handle(e).pipe(Fc(()=>{this.loadingService.hide()}))}static{this.\u0275fac=function(t){return new(t||n)(ge(ea))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();var zu=(()=>{class n{constructor(){this.cache=new Map,this.CACHE_TTL=5*60*1e3,this.CACHEABLE_URLS=["/department/getAll","/auth/userByUsername","/rescueTeam/getById"]}intercept(e,t){if(e.method!=="GET"||!this.CACHEABLE_URLS.some(a=>e.url.includes(a)))return t.handle(e);let s=this.cache.get(e.urlWithParams);if(s){let a=Date.now()-s.timestamp;if(a<this.CACHE_TTL)return console.log(`Cache HIT: ${e.urlWithParams} (age: ${Math.round(a/1e3)}s)`),Xn(s.response.clone());this.cache.delete(e.urlWithParams)}return t.handle(e).pipe(Lc(a=>{a instanceof Uc&&(console.log(`Cache MISS: ${e.urlWithParams} - caching response`),this.cache.set(e.urlWithParams,{response:a.clone(),timestamp:Date.now()}))}))}clearCache(e){e?Array.from(this.cache.keys()).filter(o=>o.includes(e)).forEach(o=>this.cache.delete(o)):this.cache.clear()}getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys())}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();var Bu=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Ce({type:n,bootstrap:[iu]})}static{this.\u0275inj=xe({providers:[cl(dl(),hl(),ll({separator:":",caseSensitive:!0})),{provide:io,useClass:Fu,multi:!0},{provide:io,useClass:zu,multi:!0},{provide:io,useClass:Lu,multi:!0},{provide:io,useClass:Nu,multi:!0}],imports:[Uo,dn,Jm,Ru,wl,Sl,kl,al,rl,Gc,Ou,Da,td,$l,Sd,Yl.forRoot(),Au,Hl,El,Ul,pd,vd,Nl,Il,Da,Wl,Od]})}}return n})();Fe.production&&void 0;Kc().bootstrapModule(Bu).catch(n=>console.error(n));
